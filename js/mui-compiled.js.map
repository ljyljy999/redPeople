{"version":3,"sources":["mui.js"],"names":[],"mappings":"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","file":"mui-compiled.js","sourcesContent":["/*!\n * =====================================================\n * Mui v3.7.2 (http://dev.dcloud.net.cn/mui)\n * =====================================================\n */\n/**\n * MUI核心JS\n * @type _L4.$|Function\n */\nvar mui = (function(document, undefined) {\n\tvar readyRE = /complete|loaded|interactive/;\n\tvar idSelectorRE = /^#([\\w-]+)$/;\n\tvar classSelectorRE = /^\\.([\\w-]+)$/;\n\tvar tagSelectorRE = /^[\\w-]+$/;\n\tvar translateRE = /translate(?:3d)?\\((.+?)\\)/;\n\tvar translateMatrixRE = /matrix(3d)?\\((.+?)\\)/;\n\n\tvar $ = function(selector, context) {\n\t\tcontext = context || document;\n\t\tif (!selector)\n\t\t\treturn wrap();\n\t\tif (typeof selector === 'object')\n\t\t\tif ($.isArrayLike(selector)) {\n\t\t\t\treturn wrap($.slice.call(selector), null);\n\t\t\t} else {\n\t\t\t\treturn wrap([selector], null);\n\t\t\t}\n\t\tif (typeof selector === 'function')\n\t\t\treturn $.ready(selector);\n\t\tif (typeof selector === 'string') {\n\t\t\ttry {\n\t\t\t\tselector = selector.trim();\n\t\t\t\tif (idSelectorRE.test(selector)) {\n\t\t\t\t\tvar found = document.getElementById(RegExp.$1);\n\t\t\t\t\treturn wrap(found ? [found] : []);\n\t\t\t\t}\n\t\t\t\treturn wrap($.qsa(selector, context), selector);\n\t\t\t} catch (e) {}\n\t\t}\n\t\treturn wrap();\n\t};\n\n\tvar wrap = function(dom, selector) {\n\t\tdom = dom || [];\n\t\tObject.setPrototypeOf(dom, $.fn);\n\t\tdom.selector = selector || '';\n\t\treturn dom;\n\t};\n\n\t$.uuid = 0;\n\n\t$.data = {};\n\t/**\n\t * extend(simple)\n\t * @param {type} target\n\t * @param {type} source\n\t * @param {type} deep\n\t * @returns {unresolved}\n\t */\n\t$.extend = function() { //from jquery2\n\t\tvar options, name, src, copy, copyIsArray, clone,\n\t\t\ttarget = arguments[0] || {},\n\t\t\ti = 1,\n\t\t\tlength = arguments.length,\n\t\t\tdeep = false;\n\n\t\tif (typeof target === \"boolean\") {\n\t\t\tdeep = target;\n\n\t\t\ttarget = arguments[i] || {};\n\t\t\ti++;\n\t\t}\n\n\t\tif (typeof target !== \"object\" && !$.isFunction(target)) {\n\t\t\ttarget = {};\n\t\t}\n\n\t\tif (i === length) {\n\t\t\ttarget = this;\n\t\t\ti--;\n\t\t}\n\n\t\tfor (; i < length; i++) {\n\t\t\tif ((options = arguments[i]) != null) {\n\t\t\t\tfor (name in options) {\n\t\t\t\t\tsrc = target[name];\n\t\t\t\t\tcopy = options[name];\n\n\t\t\t\t\tif (target === copy) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (deep && copy && ($.isPlainObject(copy) || (copyIsArray = $.isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && $.isArray(src) ? src : [];\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && $.isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget[name] = $.extend(deep, clone, copy);\n\n\t\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn target;\n\t};\n\t/**\n\t * mui noop(function)\n\t */\n\t$.noop = function() {};\n\t/**\n\t * mui slice(array)\n\t */\n\t$.slice = [].slice;\n\t/**\n\t * mui filter(array)\n\t */\n\t$.filter = [].filter;\n\n\t$.type = function(obj) {\n\t\treturn obj == null ? String(obj) : class2type[{}.toString.call(obj)] || \"object\";\n\t};\n\t/**\n\t * mui isArray\n\t */\n\t$.isArray = Array.isArray ||\n\t\tfunction(object) {\n\t\t\treturn object instanceof Array;\n\t\t};\n\t/**\n\t * mui isArrayLike \n\t * @param {Object} obj\n\t */\n\t$.isArrayLike = function(obj) {\n\t\tvar length = !!obj && \"length\" in obj && obj.length;\n\t\tvar type = $.type(obj);\n\t\tif (type === \"function\" || $.isWindow(obj)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn type === \"array\" || length === 0 ||\n\t\t\ttypeof length === \"number\" && length > 0 && (length - 1) in obj;\n\t};\n\t/**\n\t * mui isWindow(需考虑obj为undefined的情况)\n\t */\n\t$.isWindow = function(obj) {\n\t\treturn obj != null && obj === obj.window;\n\t};\n\t/**\n\t * mui isObject\n\t */\n\t$.isObject = function(obj) {\n\t\treturn $.type(obj) === \"object\";\n\t};\n\t/**\n\t * mui isPlainObject\n\t */\n\t$.isPlainObject = function(obj) {\n\t\treturn $.isObject(obj) && !$.isWindow(obj) && Object.getPrototypeOf(obj) === Object.prototype;\n\t};\n\t/**\n\t * mui isEmptyObject\n\t * @param {Object} o\n\t */\n\t$.isEmptyObject = function(o) {\n\t\tfor (var p in o) {\n\t\t\tif (p !== undefined) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t};\n\t/**\n\t * mui isFunction\n\t */\n\t$.isFunction = function(value) {\n\t\treturn $.type(value) === \"function\";\n\t};\n\t/**\n\t * mui querySelectorAll\n\t * @param {type} selector\n\t * @param {type} context\n\t * @returns {Array}\n\t */\n\t$.qsa = function(selector, context) {\n\t\tcontext = context || document;\n\t\treturn $.slice.call(classSelectorRE.test(selector) ? context.getElementsByClassName(RegExp.$1) : tagSelectorRE.test(selector) ? context.getElementsByTagName(selector) : context.querySelectorAll(selector));\n\t};\n\t/**\n\t * ready(DOMContentLoaded)\n\t * @param {type} callback\n\t * @returns {_L6.$}\n\t */\n\t$.ready = function(callback) {\n\t\tif (readyRE.test(document.readyState)) {\n\t\t\tcallback($);\n\t\t} else {\n\t\t\tdocument.addEventListener('DOMContentLoaded', function() {\n\t\t\t\tcallback($);\n\t\t\t}, false);\n\t\t}\n\t\treturn this;\n\t};\n\t/**\n\t * 将 fn 缓存一段时间后, 再被调用执行\n\t * 此方法为了避免在 ms 段时间内, 执行 fn 多次. 常用于 resize , scroll , mousemove 等连续性事件中;\n\t * 当 ms 设置为 -1, 表示立即执行 fn, 即和直接调用 fn 一样;\n\t * 调用返回函数的 stop 停止最后一次的 buffer 效果\n\t * @param {Object} fn\n\t * @param {Object} ms\n\t * @param {Object} context\n\t */\n\t$.buffer = function(fn, ms, context) {\n\t\tvar timer;\n\t\tvar lastStart = 0;\n\t\tvar lastEnd = 0;\n\t\tvar ms = ms || 150;\n\n\t\tfunction run() {\n\t\t\tif (timer) {\n\t\t\t\ttimer.cancel();\n\t\t\t\ttimer = 0;\n\t\t\t}\n\t\t\tlastStart = $.now();\n\t\t\tfn.apply(context || this, arguments);\n\t\t\tlastEnd = $.now();\n\t\t}\n\n\t\treturn $.extend(function() {\n\t\t\tif (\n\t\t\t\t(!lastStart) || // 从未运行过\n\t\t\t\t(lastEnd >= lastStart && $.now() - lastEnd > ms) || // 上次运行成功后已经超过ms毫秒\n\t\t\t\t(lastEnd < lastStart && $.now() - lastStart > ms * 8) // 上次运行或未完成，后8*ms毫秒\n\t\t\t) {\n\t\t\t\trun.apply(this, arguments);\n\t\t\t} else {\n\t\t\t\tif (timer) {\n\t\t\t\t\ttimer.cancel();\n\t\t\t\t}\n\t\t\t\ttimer = $.later(run, ms, null, $.slice.call(arguments));\n\t\t\t}\n\t\t}, {\n\t\t\tstop: function() {\n\t\t\t\tif (timer) {\n\t\t\t\t\ttimer.cancel();\n\t\t\t\t\ttimer = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t/**\n\t * each\n\t * @param {type} elements\n\t * @param {type} callback\n\t * @returns {_L8.$}\n\t */\n\t$.each = function(elements, callback, hasOwnProperty) {\n\t\tif (!elements) {\n\t\t\treturn this;\n\t\t}\n\t\tif (typeof elements.length === 'number') {\n\t\t\t[].every.call(elements, function(el, idx) {\n\t\t\t\treturn callback.call(el, idx, el) !== false;\n\t\t\t});\n\t\t} else {\n\t\t\tfor (var key in elements) {\n\t\t\t\tif (hasOwnProperty) {\n\t\t\t\t\tif (elements.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (callback.call(elements[key], key, elements[key]) === false) return elements;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (callback.call(elements[key], key, elements[key]) === false) return elements;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t};\n\t$.focus = function(element) {\n\t\tif ($.os.ios) {\n\t\t\tsetTimeout(function() {\n\t\t\t\telement.focus();\n\t\t\t}, 10);\n\t\t} else {\n\t\t\telement.focus();\n\t\t}\n\t};\n\t/**\n\t * trigger event\n\t * @param {type} element\n\t * @param {type} eventType\n\t * @param {type} eventData\n\t * @returns {_L8.$}\n\t */\n\t$.trigger = function(element, eventType, eventData) {\n\t\telement.dispatchEvent(new CustomEvent(eventType, {\n\t\t\tdetail: eventData,\n\t\t\tbubbles: true,\n\t\t\tcancelable: true\n\t\t}));\n\t\treturn this;\n\t};\n\t/**\n\t * getStyles\n\t * @param {type} element\n\t * @param {type} property\n\t * @returns {styles}\n\t */\n\t$.getStyles = function(element, property) {\n\t\tvar styles = element.ownerDocument.defaultView.getComputedStyle(element, null);\n\t\tif (property) {\n\t\t\treturn styles.getPropertyValue(property) || styles[property];\n\t\t}\n\t\treturn styles;\n\t};\n\t/**\n\t * parseTranslate\n\t * @param {type} translateString\n\t * @param {type} position\n\t * @returns {Object}\n\t */\n\t$.parseTranslate = function(translateString, position) {\n\t\tvar result = translateString.match(translateRE || '');\n\t\tif (!result || !result[1]) {\n\t\t\tresult = ['', '0,0,0'];\n\t\t}\n\t\tresult = result[1].split(\",\");\n\t\tresult = {\n\t\t\tx: parseFloat(result[0]),\n\t\t\ty: parseFloat(result[1]),\n\t\t\tz: parseFloat(result[2])\n\t\t};\n\t\tif (position && result.hasOwnProperty(position)) {\n\t\t\treturn result[position];\n\t\t}\n\t\treturn result;\n\t};\n\t/**\n\t * parseTranslateMatrix\n\t * @param {type} translateString\n\t * @param {type} position\n\t * @returns {Object}\n\t */\n\t$.parseTranslateMatrix = function(translateString, position) {\n\t\tvar matrix = translateString.match(translateMatrixRE);\n\t\tvar is3D = matrix && matrix[1];\n\t\tif (matrix) {\n\t\t\tmatrix = matrix[2].split(\",\");\n\t\t\tif (is3D === \"3d\")\n\t\t\t\tmatrix = matrix.slice(12, 15);\n\t\t\telse {\n\t\t\t\tmatrix.push(0);\n\t\t\t\tmatrix = matrix.slice(4, 7);\n\t\t\t}\n\t\t} else {\n\t\t\tmatrix = [0, 0, 0];\n\t\t}\n\t\tvar result = {\n\t\t\tx: parseFloat(matrix[0]),\n\t\t\ty: parseFloat(matrix[1]),\n\t\t\tz: parseFloat(matrix[2])\n\t\t};\n\t\tif (position && result.hasOwnProperty(position)) {\n\t\t\treturn result[position];\n\t\t}\n\t\treturn result;\n\t};\n\t$.hooks = {};\n\t$.addAction = function(type, hook) {\n\t\tvar hooks = $.hooks[type];\n\t\tif (!hooks) {\n\t\t\thooks = [];\n\t\t}\n\t\thook.index = hook.index || 1000;\n\t\thooks.push(hook);\n\t\thooks.sort(function(a, b) {\n\t\t\treturn a.index - b.index;\n\t\t});\n\t\t$.hooks[type] = hooks;\n\t\treturn $.hooks[type];\n\t};\n\t$.doAction = function(type, callback) {\n\t\tif ($.isFunction(callback)) { //指定了callback\n\t\t\t$.each($.hooks[type], callback);\n\t\t} else { //未指定callback，直接执行\n\t\t\t$.each($.hooks[type], function(index, hook) {\n\t\t\t\treturn !hook.handle();\n\t\t\t});\n\t\t}\n\t};\n\t/**\n\t * setTimeout封装\n\t * @param {Object} fn\n\t * @param {Object} when\n\t * @param {Object} context\n\t * @param {Object} data\n\t */\n\t$.later = function(fn, when, context, data) {\n\t\twhen = when || 0;\n\t\tvar m = fn;\n\t\tvar d = data;\n\t\tvar f;\n\t\tvar r;\n\n\t\tif (typeof fn === 'string') {\n\t\t\tm = context[fn];\n\t\t}\n\n\t\tf = function() {\n\t\t\tm.apply(context, $.isArray(d) ? d : [d]);\n\t\t};\n\n\t\tr = setTimeout(f, when);\n\n\t\treturn {\n\t\t\tid: r,\n\t\t\tcancel: function() {\n\t\t\t\tclearTimeout(r);\n\t\t\t}\n\t\t};\n\t};\n\t$.now = Date.now || function() {\n\t\treturn +new Date();\n\t};\n\tvar class2type = {};\n\t$.each(['Boolean', 'Number', 'String', 'Function', 'Array', 'Date', 'RegExp', 'Object', 'Error'], function(i, name) {\n\t\tclass2type[\"[object \" + name + \"]\"] = name.toLowerCase();\n\t});\n\tif (window.JSON) {\n\t\t$.parseJSON = JSON.parse;\n\t}\n\t/**\n\t * $.fn\n\t */\n\t$.fn = {\n\t\teach: function(callback) {\n\t\t\t[].every.call(this, function(el, idx) {\n\t\t\t\treturn callback.call(el, idx, el) !== false;\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\t};\n\n\t/**\n\t * 兼容 AMD 模块\n\t **/\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine('mui', [], function() {\n\t\t\treturn $;\n\t\t});\n\t}\n\n\treturn $;\n})(document);\n//window.mui = mui;\n//'$' in window || (window.$ = mui);\n/**\n * $.os\n * @param {type} $\n * @returns {undefined}\n */\n(function($, window) {\n\tfunction detect(ua) {\n\t\tthis.os = {};\n\t\tvar funcs = [\n\n\t\t\tfunction() { //wechat\n\t\t\t\tvar wechat = ua.match(/(MicroMessenger)\\/([\\d\\.]+)/i);\n\t\t\t\tif (wechat) { //wechat\n\t\t\t\t\tthis.os.wechat = {\n\t\t\t\t\t\tversion: wechat[2].replace(/_/g, '.')\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tfunction() { //android\n\t\t\t\tvar android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n\t\t\t\tif (android) {\n\t\t\t\t\tthis.os.android = true;\n\t\t\t\t\tthis.os.version = android[2];\n\n\t\t\t\t\tthis.os.isBadAndroid = !(/Chrome\\/\\d/.test(window.navigator.appVersion));\n\t\t\t\t}\n\t\t\t\treturn this.os.android === true;\n\t\t\t},\n\t\t\tfunction() { //ios\n\t\t\t\tvar iphone = ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n\t\t\t\tif (iphone) { //iphone\n\t\t\t\t\tthis.os.ios = this.os.iphone = true;\n\t\t\t\t\tthis.os.version = iphone[2].replace(/_/g, '.');\n\t\t\t\t} else {\n\t\t\t\t\tvar ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n\t\t\t\t\tif (ipad) { //ipad\n\t\t\t\t\t\tthis.os.ios = this.os.ipad = true;\n\t\t\t\t\t\tthis.os.version = ipad[2].replace(/_/g, '.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.os.ios === true;\n\t\t\t}\n\t\t];\n\t\t[].every.call(funcs, function(func) {\n\t\t\treturn !func.call($);\n\t\t});\n\t}\n\tdetect.call($, navigator.userAgent);\n})(mui, window);\n/**\n * $.os.plus\n * @param {type} $\n * @returns {undefined}\n */\n(function($, document) {\n\tfunction detect(ua) {\n\t\tthis.os = this.os || {};\n\t\tvar plus = ua.match(/Html5Plus/i); //TODO 5\\+Browser?\n\t\tif (plus) {\n\t\t\tthis.os.plus = true;\n\t\t\t$(function() {\n\t\t\t\tdocument.body.classList.add('mui-plus');\n\t\t\t});\n\t\t\tif (ua.match(/StreamApp/i)) { //TODO 最好有流应用自己的标识\n\t\t\t\tthis.os.stream = true;\n\t\t\t\t$(function() {\n\t\t\t\t\tdocument.body.classList.add('mui-plus-stream');\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tdetect.call($, navigator.userAgent);\n})(mui, document);\n/**\n * 仅提供简单的on，off(仅支持事件委托，不支持当前元素绑定，当前元素绑定请直接使用addEventListener,removeEventListener)\n * @param {Object} $\n */\n(function($) {\n\tif ('ontouchstart' in window) {\n\t\t$.isTouchable = true;\n\t\t$.EVENT_START = 'touchstart';\n\t\t$.EVENT_MOVE = 'touchmove';\n\t\t$.EVENT_END = 'touchend';\n\t} else {\n\t\t$.isTouchable = false;\n\t\t$.EVENT_START = 'mousedown';\n\t\t$.EVENT_MOVE = 'mousemove';\n\t\t$.EVENT_END = 'mouseup';\n\t}\n\t$.EVENT_CANCEL = 'touchcancel';\n\t$.EVENT_CLICK = 'click';\n\n\tvar _mid = 1;\n\tvar delegates = {};\n\t//需要wrap的函数\n\tvar eventMethods = {\n\t\tpreventDefault: 'isDefaultPrevented',\n\t\tstopImmediatePropagation: 'isImmediatePropagationStopped',\n\t\tstopPropagation: 'isPropagationStopped'\n\t};\n\t//默认true返回函数\n\tvar returnTrue = function() {\n\t\treturn true\n\t};\n\t//默认false返回函数\n\tvar returnFalse = function() {\n\t\treturn false\n\t};\n\t//wrap浏览器事件\n\tvar compatible = function(event, target) {\n\t\tif (!event.detail) {\n\t\t\tevent.detail = {\n\t\t\t\tcurrentTarget: target\n\t\t\t};\n\t\t} else {\n\t\t\tevent.detail.currentTarget = target;\n\t\t}\n\t\t$.each(eventMethods, function(name, predicate) {\n\t\t\tvar sourceMethod = event[name];\n\t\t\tevent[name] = function() {\n\t\t\t\tthis[predicate] = returnTrue;\n\t\t\t\treturn sourceMethod && sourceMethod.apply(event, arguments)\n\t\t\t}\n\t\t\tevent[predicate] = returnFalse;\n\t\t}, true);\n\t\treturn event;\n\t};\n\t//简单的wrap对象_mid\n\tvar mid = function(obj) {\n\t\treturn obj && (obj._mid || (obj._mid = _mid++));\n\t};\n\t//事件委托对象绑定的事件回调列表\n\tvar delegateFns = {};\n\t//返回事件委托的wrap事件回调\n\tvar delegateFn = function(element, event, selector, callback) {\n\t\treturn function(e) {\n\t\t\t//same event\n\t\t\tvar callbackObjs = delegates[element._mid][event];\n\t\t\tvar handlerQueue = [];\n\t\t\tvar target = e.target;\n\t\t\tvar selectorAlls = {};\n\t\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\t\tif (target === element) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (~['click', 'tap', 'doubletap', 'longtap', 'hold'].indexOf(event) && (target.disabled || target.classList.contains('mui-disabled'))) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tvar matches = {};\n\t\t\t\t$.each(callbackObjs, function(selector, callbacks) { //same selector\n\t\t\t\t\tselectorAlls[selector] || (selectorAlls[selector] = $.qsa(selector, element));\n\t\t\t\t\tif (selectorAlls[selector] && ~(selectorAlls[selector]).indexOf(target)) {\n\t\t\t\t\t\tif (!matches[selector]) {\n\t\t\t\t\t\t\tmatches[selector] = callbacks;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, true);\n\t\t\t\tif (!$.isEmptyObject(matches)) {\n\t\t\t\t\thandlerQueue.push({\n\t\t\t\t\t\telement: target,\n\t\t\t\t\t\thandlers: matches\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tselectorAlls = null;\n\t\t\te = compatible(e); //compatible event\n\t\t\t$.each(handlerQueue, function(index, handler) {\n\t\t\t\ttarget = handler.element;\n\t\t\t\tvar tagName = target.tagName;\n\t\t\t\tif (event === 'tap' && (tagName !== 'INPUT' && tagName !== 'TEXTAREA' && tagName !== 'SELECT')) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.detail && e.detail.gesture && e.detail.gesture.preventDefault();\n\t\t\t\t}\n\t\t\t\t$.each(handler.handlers, function(index, handler) {\n\t\t\t\t\t$.each(handler, function(index, callback) {\n\t\t\t\t\t\tif (callback.call(target, e) === false) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, true);\n\t\t\t\t}, true)\n\t\t\t\tif (e.isPropagationStopped()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}, true);\n\t\t};\n\t};\n\tvar findDelegateFn = function(element, event) {\n\t\tvar delegateCallbacks = delegateFns[mid(element)];\n\t\tvar result = [];\n\t\tif (delegateCallbacks) {\n\t\t\tresult = [];\n\t\t\tif (event) {\n\t\t\t\tvar filterFn = function(fn) {\n\t\t\t\t\treturn fn.type === event;\n\t\t\t\t}\n\t\t\t\treturn delegateCallbacks.filter(filterFn);\n\t\t\t} else {\n\t\t\t\tresult = delegateCallbacks;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\tvar preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\n\t/**\n\t * mui delegate events\n\t * @param {type} event\n\t * @param {type} selector\n\t * @param {type} callback\n\t * @returns {undefined}\n\t */\n\t$.fn.on = function(event, selector, callback) { //仅支持简单的事件委托,主要是tap事件使用，类似mouse,focus之类暂不封装支持\n\t\treturn this.each(function() {\n\t\t\tvar element = this;\n\t\t\tmid(element);\n\t\t\tmid(callback);\n\t\t\tvar isAddEventListener = false;\n\t\t\tvar delegateEvents = delegates[element._mid] || (delegates[element._mid] = {});\n\t\t\tvar delegateCallbackObjs = delegateEvents[event] || ((delegateEvents[event] = {}));\n\t\t\tif ($.isEmptyObject(delegateCallbackObjs)) {\n\t\t\t\tisAddEventListener = true;\n\t\t\t}\n\t\t\tvar delegateCallbacks = delegateCallbackObjs[selector] || (delegateCallbackObjs[selector] = []);\n\t\t\tdelegateCallbacks.push(callback);\n\t\t\tif (isAddEventListener) {\n\t\t\t\tvar delegateFnArray = delegateFns[mid(element)];\n\t\t\t\tif (!delegateFnArray) {\n\t\t\t\t\tdelegateFnArray = [];\n\t\t\t\t}\n\t\t\t\tvar delegateCallback = delegateFn(element, event, selector, callback);\n\t\t\t\tdelegateFnArray.push(delegateCallback);\n\t\t\t\tdelegateCallback.i = delegateFnArray.length - 1;\n\t\t\t\tdelegateCallback.type = event;\n\t\t\t\tdelegateFns[mid(element)] = delegateFnArray;\n\t\t\t\telement.addEventListener(event, delegateCallback);\n\t\t\t\tif (event === 'tap') { //TODO 需要找个更好的解决方案\n\t\t\t\t\telement.addEventListener('click', function(e) {\n\t\t\t\t\t\tif (e.target) {\n\t\t\t\t\t\t\tvar tagName = e.target.tagName;\n\t\t\t\t\t\t\tif (!preventDefaultException.test(tagName)) {\n\t\t\t\t\t\t\t\tif (tagName === 'A') {\n\t\t\t\t\t\t\t\t\tvar href = e.target.href;\n\t\t\t\t\t\t\t\t\tif (!(href && ~href.indexOf('tel:'))) {\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t$.fn.off = function(event, selector, callback) {\n\t\treturn this.each(function() {\n\t\t\tvar _mid = mid(this);\n\t\t\tif (!event) { //mui(selector).off();\n\t\t\t\tdelegates[_mid] && delete delegates[_mid];\n\t\t\t} else if (!selector) { //mui(selector).off(event);\n\t\t\t\tdelegates[_mid] && delete delegates[_mid][event];\n\t\t\t} else if (!callback) { //mui(selector).off(event,selector);\n\t\t\t\tdelegates[_mid] && delegates[_mid][event] && delete delegates[_mid][event][selector];\n\t\t\t} else { //mui(selector).off(event,selector,callback);\n\t\t\t\tvar delegateCallbacks = delegates[_mid] && delegates[_mid][event] && delegates[_mid][event][selector];\n\t\t\t\t$.each(delegateCallbacks, function(index, delegateCallback) {\n\t\t\t\t\tif (mid(delegateCallback) === mid(callback)) {\n\t\t\t\t\t\tdelegateCallbacks.splice(index, 1);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}, true);\n\t\t\t}\n\t\t\tif (delegates[_mid]) {\n\t\t\t\t//如果off掉了所有当前element的指定的event事件，则remove掉当前element的delegate回调\n\t\t\t\tif ((!delegates[_mid][event] || $.isEmptyObject(delegates[_mid][event]))) {\n\t\t\t\t\tfindDelegateFn(this, event).forEach(function(fn) {\n\t\t\t\t\t\tthis.removeEventListener(fn.type, fn);\n\t\t\t\t\t\tdelete delegateFns[_mid][fn.i];\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//如果delegates[_mid]已不存在，删除所有\n\t\t\t\tfindDelegateFn(this).forEach(function(fn) {\n\t\t\t\t\tthis.removeEventListener(fn.type, fn);\n\t\t\t\t\tdelete delegateFns[_mid][fn.i];\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t});\n\n\t};\n})(mui);\n/**\n * mui target(action>popover>modal>tab>toggle)\n */\n(function($, window, document) {\n\t/**\n\t * targets\n\t */\n\t$.targets = {};\n\t/**\n\t * target handles\n\t */\n\t$.targetHandles = [];\n\t/**\n\t * register target\n\t * @param {type} target\n\t * @returns {$.targets}\n\t */\n\t$.registerTarget = function(target) {\n\n\t\ttarget.index = target.index || 1000;\n\n\t\t$.targetHandles.push(target);\n\n\t\t$.targetHandles.sort(function(a, b) {\n\t\t\treturn a.index - b.index;\n\t\t});\n\n\t\treturn $.targetHandles;\n\t};\n\twindow.addEventListener($.EVENT_START, function(event) {\n\t\tvar target = event.target;\n\t\tvar founds = {};\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tvar isFound = false;\n\t\t\t$.each($.targetHandles, function(index, targetHandle) {\n\t\t\t\tvar name = targetHandle.name;\n\t\t\t\tif (!isFound && !founds[name] && targetHandle.hasOwnProperty('handle')) {\n\t\t\t\t\t$.targets[name] = targetHandle.handle(event, target);\n\t\t\t\t\tif ($.targets[name]) {\n\t\t\t\t\t\tfounds[name] = true;\n\t\t\t\t\t\tif (targetHandle.isContinue !== true) {\n\t\t\t\t\t\t\tisFound = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!founds[name]) {\n\t\t\t\t\t\tif (targetHandle.isReset !== false)\n\t\t\t\t\t\t\t$.targets[name] = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (isFound) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\twindow.addEventListener('click', function(event) { //解决touch与click的target不一致的问题(比如链接边缘点击时，touch的target为html，而click的target为A)\n\t\tvar target = event.target;\n\t\tvar isFound = false;\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tif (target.tagName === 'A') {\n\t\t\t\t$.each($.targetHandles, function(index, targetHandle) {\n\t\t\t\t\tvar name = targetHandle.name;\n\t\t\t\t\tif (targetHandle.hasOwnProperty('handle')) {\n\t\t\t\t\t\tif (targetHandle.handle(event, target)) {\n\t\t\t\t\t\t\tisFound = true;\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (isFound) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n})(mui, window, document);\n/**\n * fixed trim\n * @param {type} undefined\n * @returns {undefined}\n */\n(function(undefined) {\n\tif (String.prototype.trim === undefined) { // fix for iOS 3.2\n\t\tString.prototype.trim = function() {\n\t\t\treturn this.replace(/^\\s+|\\s+$/g, '');\n\t\t};\n\t}\n\tObject.setPrototypeOf = Object.setPrototypeOf || function(obj, proto) {\n\t\tobj['__proto__'] = proto;\n\t\treturn obj;\n\t};\n\n})();\n/**\n * fixed CustomEvent\n */\n(function() {\n\tif (typeof window.CustomEvent === 'undefined') {\n\t\tfunction CustomEvent(event, params) {\n\t\t\tparams = params || {\n\t\t\t\tbubbles: false,\n\t\t\t\tcancelable: false,\n\t\t\t\tdetail: undefined\n\t\t\t};\n\t\t\tvar evt = document.createEvent('Events');\n\t\t\tvar bubbles = true;\n\t\t\tfor (var name in params) {\n\t\t\t\t(name === 'bubbles') ? (bubbles = !!params[name]) : (evt[name] = params[name]);\n\t\t\t}\n\t\t\tevt.initEvent(event, bubbles, true);\n\t\t\treturn evt;\n\t\t};\n\t\tCustomEvent.prototype = window.Event.prototype;\n\t\twindow.CustomEvent = CustomEvent;\n\t}\n})();\n/*\n\tA shim for non ES5 supporting browsers.\n\tAdds function bind to Function prototype, so that you can do partial application.\n\tWorks even with the nasty thing, where the first word is the opposite of extranet, the second one is the profession of Columbus, and the version number is 9, flipped 180 degrees.\n*/\n\nFunction.prototype.bind = Function.prototype.bind || function(to) {\n\t// Make an array of our arguments, starting from second argument\n\tvar partial = Array.prototype.splice.call(arguments, 1),\n\t\t// We'll need the original function.\n\t\tfn = this;\n\tvar bound = function() {\n\t\t\t// Join the already applied arguments to the now called ones (after converting to an array again).\n\t\t\tvar args = partial.concat(Array.prototype.splice.call(arguments, 0));\n\t\t\t// If not being called as a constructor\n\t\t\tif (!(this instanceof bound)) {\n\t\t\t\t// return the result of the function called bound to target and partially applied.\n\t\t\t\treturn fn.apply(to, args);\n\t\t\t}\n\t\t\t// If being called as a constructor, apply the function bound to self.\n\t\t\tfn.apply(this, args);\n\t\t}\n\t\t// Attach the prototype of the function to our newly created function.\n\tbound.prototype = fn.prototype;\n\treturn bound;\n};\n/**\n * mui fixed classList\n * @param {type} document\n * @returns {undefined}\n */\n(function(document) {\n    if (!(\"classList\" in document.documentElement) && Object.defineProperty && typeof HTMLElement !== 'undefined') {\n\n        Object.defineProperty(HTMLElement.prototype, 'classList', {\n            get: function() {\n                var self = this;\n                function update(fn) {\n                    return function(value) {\n                        var classes = self.className.split(/\\s+/),\n                                index = classes.indexOf(value);\n\n                        fn(classes, index, value);\n                        self.className = classes.join(\" \");\n                    };\n                }\n\n                var ret = {\n                    add: update(function(classes, index, value) {\n                        ~index || classes.push(value);\n                    }),\n                    remove: update(function(classes, index) {\n                        ~index && classes.splice(index, 1);\n                    }),\n                    toggle: update(function(classes, index, value) {\n                        ~index ? classes.splice(index, 1) : classes.push(value);\n                    }),\n                    contains: function(value) {\n                        return !!~self.className.split(/\\s+/).indexOf(value);\n                    },\n                    item: function(i) {\n                        return self.className.split(/\\s+/)[i] || null;\n                    }\n                };\n\n                Object.defineProperty(ret, 'length', {\n                    get: function() {\n                        return self.className.split(/\\s+/).length;\n                    }\n                });\n\n                return ret;\n            }\n        });\n    }\n})(document);\n\n/**\n * mui fixed requestAnimationFrame\n * @param {type} window\n * @returns {undefined}\n */\n(function(window) {\n\tif (!window.requestAnimationFrame) {\n\t\tvar lastTime = 0;\n\t\twindow.requestAnimationFrame = window.webkitRequestAnimationFrame || function(callback, element) {\n\t\t\tvar currTime = new Date().getTime();\n\t\t\tvar timeToCall = Math.max(0, 16.7 - (currTime - lastTime));\n\t\t\tvar id = window.setTimeout(function() {\n\t\t\t\tcallback(currTime + timeToCall);\n\t\t\t}, timeToCall);\n\t\t\tlastTime = currTime + timeToCall;\n\t\t\treturn id;\n\t\t};\n\t\twindow.cancelAnimationFrame = window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame || function(id) {\n\t\t\tclearTimeout(id);\n\t\t};\n\t};\n}(window));\n/**\n * fastclick(only for radio,checkbox)\n */\n(function($, window, name) {\n\tif (!$.os.android && !$.os.ios) { //目前仅识别android和ios\n\t\treturn;\n\t}\n\tif (window.FastClick) {\n\t\treturn;\n\t}\n\n\tvar handle = function(event, target) {\n\t\tif (target.tagName === 'LABEL') {\n\t\t\tif (target.parentNode) {\n\t\t\t\ttarget = target.parentNode.querySelector('input');\n\t\t\t}\n\t\t}\n\t\tif (target && (target.type === 'radio' || target.type === 'checkbox')) {\n\t\t\tif (!target.disabled) { //disabled\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 40,\n\t\thandle: handle,\n\t\ttarget: false\n\t});\n\tvar dispatchEvent = function(event) {\n\t\tvar targetElement = $.targets.click;\n\t\tif (targetElement) {\n\t\t\tvar clickEvent, touch;\n\t\t\t// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect\n\t\t\tif (document.activeElement && document.activeElement !== targetElement) {\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t}\n\t\t\ttouch = event.detail.gesture.changedTouches[0];\n\t\t\t// Synthesise a click event, with an extra attribute so it can be tracked\n\t\t\tclickEvent = document.createEvent('MouseEvents');\n\t\t\tclickEvent.initMouseEvent('click', true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n\t\t\tclickEvent.forwardedTouchEvent = true;\n\t\t\ttargetElement.dispatchEvent(clickEvent);\n\t\t\tevent.detail && event.detail.gesture.preventDefault();\n\t\t}\n\t};\n\twindow.addEventListener('tap', dispatchEvent);\n\twindow.addEventListener('doubletap', dispatchEvent);\n\t//捕获\n\twindow.addEventListener('click', function(event) {\n\t\tif ($.targets.click) {\n\t\t\tif (!event.forwardedTouchEvent) { //stop click\n\t\t\t\tif (event.stopImmediatePropagation) {\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t} else {\n\t\t\t\t\t// Part of the hack for browsers that don't support Event#stopImmediatePropagation\n\t\t\t\t\tevent.propagationStopped = true;\n\t\t\t\t}\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}, true);\n\n})(mui, window, 'click');\n(function($, document) {\n\t$(function() {\n\t\tif (!$.os.ios) {\n\t\t\treturn;\n\t\t}\n\t\tvar CLASS_FOCUSIN = 'mui-focusin';\n\t\tvar CLASS_BAR_TAB = 'mui-bar-tab';\n\t\tvar CLASS_BAR_FOOTER = 'mui-bar-footer';\n\t\tvar CLASS_BAR_FOOTER_SECONDARY = 'mui-bar-footer-secondary';\n\t\tvar CLASS_BAR_FOOTER_SECONDARY_TAB = 'mui-bar-footer-secondary-tab';\n\t\t// var content = document.querySelector('.' + CLASS_CONTENT);\n\t\t// if (content) {\n\t\t// \tdocument.body.insertBefore(content, document.body.firstElementChild);\n\t\t// }\n\t\tdocument.addEventListener('focusin', function(e) {\n\t\t\tif ($.os.plus) { //在父webview里边不fix\n\t\t\t\tif (window.plus) {\n\t\t\t\t\tif (plus.webview.currentWebview().children().length > 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar target = e.target;\n\t\t\t//TODO 需考虑所有键盘弹起的情况\n\t\t\tif (target.tagName && (target.tagName === 'TEXTAREA' || (target.tagName === 'INPUT' && (target.type === 'text' || target.type === 'search' || target.type === 'number')))) {\n\t\t\t\tif (target.disabled || target.readOnly) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tdocument.body.classList.add(CLASS_FOCUSIN);\n\t\t\t\tvar isFooter = false;\n\t\t\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\t\t\tvar classList = target.classList;\n\t\t\t\t\tif (classList && classList.contains(CLASS_BAR_TAB) || classList.contains(CLASS_BAR_FOOTER) || classList.contains(CLASS_BAR_FOOTER_SECONDARY) || classList.contains(CLASS_BAR_FOOTER_SECONDARY_TAB)) {\n\t\t\t\t\t\tisFooter = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (isFooter) {\n\t\t\t\t\tvar scrollTop = document.body.scrollHeight;\n\t\t\t\t\tvar scrollLeft = document.body.scrollLeft;\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\twindow.scrollTo(scrollLeft, scrollTop);\n\t\t\t\t\t}, 20);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdocument.addEventListener('focusout', function(e) {\n\t\t\tvar classList = document.body.classList;\n\t\t\tif (classList.contains(CLASS_FOCUSIN)) {\n\t\t\t\tclassList.remove(CLASS_FOCUSIN);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\twindow.scrollTo(document.body.scrollLeft, document.body.scrollTop);\n\t\t\t\t}, 20);\n\t\t\t}\n\t\t});\n\t});\n})(mui, document);\n/**\n * mui namespace(optimization)\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\t$.namespace = 'mui';\n\t$.classNamePrefix = $.namespace + '-';\n\t$.classSelectorPrefix = '.' + $.classNamePrefix;\n\t/**\n\t * 返回正确的className\n\t * @param {type} className\n\t * @returns {String}\n\t */\n\t$.className = function(className) {\n\t\treturn $.classNamePrefix + className;\n\t};\n\t/**\n\t * 返回正确的classSelector\n\t * @param {type} classSelector\n\t * @returns {String}\n\t */\n\t$.classSelector = function(classSelector) {\n\t\treturn classSelector.replace(/\\./g, $.classSelectorPrefix);\n\t};\n\t/**\n         * 返回正确的eventName\n         * @param {type} event\n         * @param {type} module\n         * @returns {String}\n         */\n\t$.eventName = function(event, module) {\n\t\treturn event + ($.namespace ? ('.' + $.namespace) : '') + ( module ? ('.' + module) : '');\n\t};\n})(mui);\n\n/**\n * mui gestures\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n\t$.gestures = {\n\t\tsession: {}\n\t};\n\t/**\n\t * Gesture preventDefault\n\t * @param {type} e\n\t * @returns {undefined}\n\t */\n\t$.preventDefault = function(e) {\n\t\te.preventDefault();\n\t};\n\t/**\n\t * Gesture stopPropagation\n\t * @param {type} e\n\t * @returns {undefined}\n\t */\n\t$.stopPropagation = function(e) {\n\t\te.stopPropagation();\n\t};\n\n\t/**\n\t * register gesture\n\t * @param {type} gesture\n\t * @returns {$.gestures}\n\t */\n\t$.addGesture = function(gesture) {\n\t\treturn $.addAction('gestures', gesture);\n\n\t};\n\n\tvar round = Math.round;\n\tvar abs = Math.abs;\n\tvar sqrt = Math.sqrt;\n\tvar atan = Math.atan;\n\tvar atan2 = Math.atan2;\n\t/**\n\t * distance\n\t * @param {type} p1\n\t * @param {type} p2\n\t * @returns {Number}\n\t */\n\tvar getDistance = function(p1, p2, props) {\n\t\tif (!props) {\n\t\t\tprops = ['x', 'y'];\n\t\t}\n\t\tvar x = p2[props[0]] - p1[props[0]];\n\t\tvar y = p2[props[1]] - p1[props[1]];\n\t\treturn sqrt((x * x) + (y * y));\n\t};\n\t/**\n\t * scale\n\t * @param {Object} starts\n\t * @param {Object} moves\n\t */\n\tvar getScale = function(starts, moves) {\n\t\tif (starts.length >= 2 && moves.length >= 2) {\n\t\t\tvar props = ['pageX', 'pageY'];\n\t\t\treturn getDistance(moves[1], moves[0], props) / getDistance(starts[1], starts[0], props);\n\t\t}\n\t\treturn 1;\n\t};\n\t/**\n\t * angle\n\t * @param {type} p1\n\t * @param {type} p2\n\t * @returns {Number}\n\t */\n\tvar getAngle = function(p1, p2, props) {\n\t\tif (!props) {\n\t\t\tprops = ['x', 'y'];\n\t\t}\n\t\tvar x = p2[props[0]] - p1[props[0]];\n\t\tvar y = p2[props[1]] - p1[props[1]];\n\t\treturn atan2(y, x) * 180 / Math.PI;\n\t};\n\t/**\n\t * direction\n\t * @param {Object} x\n\t * @param {Object} y\n\t */\n\tvar getDirection = function(x, y) {\n\t\tif (x === y) {\n\t\t\treturn '';\n\t\t}\n\t\tif (abs(x) >= abs(y)) {\n\t\t\treturn x > 0 ? 'left' : 'right';\n\t\t}\n\t\treturn y > 0 ? 'up' : 'down';\n\t};\n\t/**\n\t * rotation\n\t * @param {Object} start\n\t * @param {Object} end\n\t */\n\tvar getRotation = function(start, end) {\n\t\tvar props = ['pageX', 'pageY'];\n\t\treturn getAngle(end[1], end[0], props) - getAngle(start[1], start[0], props);\n\t};\n\t/**\n\t * px per ms\n\t * @param {Object} deltaTime\n\t * @param {Object} x\n\t * @param {Object} y\n\t */\n\tvar getVelocity = function(deltaTime, x, y) {\n\t\treturn {\n\t\t\tx: x / deltaTime || 0,\n\t\t\ty: y / deltaTime || 0\n\t\t};\n\t};\n\t/**\n\t * detect gestures\n\t * @param {type} event\n\t * @param {type} touch\n\t * @returns {undefined}\n\t */\n\tvar detect = function(event, touch) {\n\t\tif ($.gestures.stoped) {\n\t\t\treturn;\n\t\t}\n\t\t$.doAction('gestures', function(index, gesture) {\n\t\t\tif (!$.gestures.stoped) {\n\t\t\t\tif ($.options.gestureConfig[gesture.name] !== false) {\n\t\t\t\t\tgesture.handle(event, touch);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t/**\n\t * 暂时无用\n\t * @param {Object} node\n\t * @param {Object} parent\n\t */\n\tvar hasParent = function(node, parent) {\n\t\twhile (node) {\n\t\t\tif (node == parent) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\treturn false;\n\t};\n\n\tvar uniqueArray = function(src, key, sort) {\n\t\tvar results = [];\n\t\tvar values = [];\n\t\tvar i = 0;\n\n\t\twhile (i < src.length) {\n\t\t\tvar val = key ? src[i][key] : src[i];\n\t\t\tif (values.indexOf(val) < 0) {\n\t\t\t\tresults.push(src[i]);\n\t\t\t}\n\t\t\tvalues[i] = val;\n\t\t\ti++;\n\t\t}\n\n\t\tif (sort) {\n\t\t\tif (!key) {\n\t\t\t\tresults = results.sort();\n\t\t\t} else {\n\t\t\t\tresults = results.sort(function sortUniqueArray(a, b) {\n\t\t\t\t\treturn a[key] > b[key];\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t};\n\tvar getMultiCenter = function(touches) {\n\t\tvar touchesLength = touches.length;\n\t\tif (touchesLength === 1) {\n\t\t\treturn {\n\t\t\t\tx: round(touches[0].pageX),\n\t\t\t\ty: round(touches[0].pageY)\n\t\t\t};\n\t\t}\n\n\t\tvar x = 0;\n\t\tvar y = 0;\n\t\tvar i = 0;\n\t\twhile (i < touchesLength) {\n\t\t\tx += touches[i].pageX;\n\t\t\ty += touches[i].pageY;\n\t\t\ti++;\n\t\t}\n\n\t\treturn {\n\t\t\tx: round(x / touchesLength),\n\t\t\ty: round(y / touchesLength)\n\t\t};\n\t};\n\tvar multiTouch = function() {\n\t\treturn $.options.gestureConfig.pinch;\n\t};\n\tvar copySimpleTouchData = function(touch) {\n\t\tvar touches = [];\n\t\tvar i = 0;\n\t\twhile (i < touch.touches.length) {\n\t\t\ttouches[i] = {\n\t\t\t\tpageX: round(touch.touches[i].pageX),\n\t\t\t\tpageY: round(touch.touches[i].pageY)\n\t\t\t};\n\t\t\ti++;\n\t\t}\n\t\treturn {\n\t\t\ttimestamp: $.now(),\n\t\t\tgesture: touch.gesture,\n\t\t\ttouches: touches,\n\t\t\tcenter: getMultiCenter(touch.touches),\n\t\t\tdeltaX: touch.deltaX,\n\t\t\tdeltaY: touch.deltaY\n\t\t};\n\t};\n\n\tvar calDelta = function(touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar center = touch.center;\n\t\tvar offset = session.offsetDelta || {};\n\t\tvar prevDelta = session.prevDelta || {};\n\t\tvar prevTouch = session.prevTouch || {};\n\n\t\tif (touch.gesture.type === $.EVENT_START || touch.gesture.type === $.EVENT_END) {\n\t\t\tprevDelta = session.prevDelta = {\n\t\t\t\tx: prevTouch.deltaX || 0,\n\t\t\t\ty: prevTouch.deltaY || 0\n\t\t\t};\n\n\t\t\toffset = session.offsetDelta = {\n\t\t\t\tx: center.x,\n\t\t\t\ty: center.y\n\t\t\t};\n\t\t}\n\t\ttouch.deltaX = prevDelta.x + (center.x - offset.x);\n\t\ttouch.deltaY = prevDelta.y + (center.y - offset.y);\n\t};\n\tvar calTouchData = function(touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar touches = touch.touches;\n\t\tvar touchesLength = touches.length;\n\n\t\tif (!session.firstTouch) {\n\t\t\tsession.firstTouch = copySimpleTouchData(touch);\n\t\t}\n\n\t\tif (multiTouch() && touchesLength > 1 && !session.firstMultiTouch) {\n\t\t\tsession.firstMultiTouch = copySimpleTouchData(touch);\n\t\t} else if (touchesLength === 1) {\n\t\t\tsession.firstMultiTouch = false;\n\t\t}\n\n\t\tvar firstTouch = session.firstTouch;\n\t\tvar firstMultiTouch = session.firstMultiTouch;\n\t\tvar offsetCenter = firstMultiTouch ? firstMultiTouch.center : firstTouch.center;\n\n\t\tvar center = touch.center = getMultiCenter(touches);\n\t\ttouch.timestamp = $.now();\n\t\ttouch.deltaTime = touch.timestamp - firstTouch.timestamp;\n\n\t\ttouch.angle = getAngle(offsetCenter, center);\n\t\ttouch.distance = getDistance(offsetCenter, center);\n\n\t\tcalDelta(touch);\n\n\t\ttouch.offsetDirection = getDirection(touch.deltaX, touch.deltaY);\n\n\t\ttouch.scale = firstMultiTouch ? getScale(firstMultiTouch.touches, touches) : 1;\n\t\ttouch.rotation = firstMultiTouch ? getRotation(firstMultiTouch.touches, touches) : 0;\n\n\t\tcalIntervalTouchData(touch);\n\n\t};\n\tvar CAL_INTERVAL = 25;\n\tvar calIntervalTouchData = function(touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar last = session.lastInterval || touch;\n\t\tvar deltaTime = touch.timestamp - last.timestamp;\n\t\tvar velocity;\n\t\tvar velocityX;\n\t\tvar velocityY;\n\t\tvar direction;\n\n\t\tif (touch.gesture.type != $.EVENT_CANCEL && (deltaTime > CAL_INTERVAL || last.velocity === undefined)) {\n\t\t\tvar deltaX = last.deltaX - touch.deltaX;\n\t\t\tvar deltaY = last.deltaY - touch.deltaY;\n\n\t\t\tvar v = getVelocity(deltaTime, deltaX, deltaY);\n\t\t\tvelocityX = v.x;\n\t\t\tvelocityY = v.y;\n\t\t\tvelocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n\t\t\tdirection = getDirection(deltaX, deltaY) || last.direction;\n\n\t\t\tsession.lastInterval = touch;\n\t\t} else {\n\t\t\tvelocity = last.velocity;\n\t\t\tvelocityX = last.velocityX;\n\t\t\tvelocityY = last.velocityY;\n\t\t\tdirection = last.direction;\n\t\t}\n\n\t\ttouch.velocity = velocity;\n\t\ttouch.velocityX = velocityX;\n\t\ttouch.velocityY = velocityY;\n\t\ttouch.direction = direction;\n\t};\n\tvar targetIds = {};\n\tvar convertTouches = function(touches) {\n\t\tfor (var i = 0; i < touches.length; i++) {\n\t\t\t!touches['identifier'] && (touches['identifier'] = 0);\n\t\t}\n\t\treturn touches;\n\t};\n\tvar getTouches = function(event, touch) {\n\t\tvar allTouches = convertTouches($.slice.call(event.touches || [event]));\n\n\t\tvar type = event.type;\n\n\t\tvar targetTouches = [];\n\t\tvar changedTargetTouches = [];\n\n\t\t//当touchstart或touchmove且touches长度为1，直接获得all和changed\n\t\tif ((type === $.EVENT_START || type === $.EVENT_MOVE) && allTouches.length === 1) {\n\t\t\ttargetIds[allTouches[0].identifier] = true;\n\t\t\ttargetTouches = allTouches;\n\t\t\tchangedTargetTouches = allTouches;\n\t\t\ttouch.target = event.target;\n\t\t} else {\n\t\t\tvar i = 0;\n\t\t\tvar targetTouches = [];\n\t\t\tvar changedTargetTouches = [];\n\t\t\tvar changedTouches = convertTouches($.slice.call(event.changedTouches || [event]));\n\n\t\t\ttouch.target = event.target;\n\t\t\tvar sessionTarget = $.gestures.session.target || event.target;\n\t\t\ttargetTouches = allTouches.filter(function(touch) {\n\t\t\t\treturn hasParent(touch.target, sessionTarget);\n\t\t\t});\n\n\t\t\tif (type === $.EVENT_START) {\n\t\t\t\ti = 0;\n\t\t\t\twhile (i < targetTouches.length) {\n\t\t\t\t\ttargetIds[targetTouches[i].identifier] = true;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti = 0;\n\t\t\twhile (i < changedTouches.length) {\n\t\t\t\tif (targetIds[changedTouches[i].identifier]) {\n\t\t\t\t\tchangedTargetTouches.push(changedTouches[i]);\n\t\t\t\t}\n\t\t\t\tif (type === $.EVENT_END || type === $.EVENT_CANCEL) {\n\t\t\t\t\tdelete targetIds[changedTouches[i].identifier];\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\tif (!changedTargetTouches.length) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\ttargetTouches = uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true);\n\t\tvar touchesLength = targetTouches.length;\n\t\tvar changedTouchesLength = changedTargetTouches.length;\n\t\tif (type === $.EVENT_START && touchesLength - changedTouchesLength === 0) { //first\n\t\t\ttouch.isFirst = true;\n\t\t\t$.gestures.touch = $.gestures.session = {\n\t\t\t\ttarget: event.target\n\t\t\t};\n\t\t}\n\t\ttouch.isFinal = ((type === $.EVENT_END || type === $.EVENT_CANCEL) && (touchesLength - changedTouchesLength === 0));\n\n\t\ttouch.touches = targetTouches;\n\t\ttouch.changedTouches = changedTargetTouches;\n\t\treturn true;\n\n\t};\n\tvar handleTouchEvent = function(event) {\n\t\tvar touch = {\n\t\t\tgesture: event\n\t\t};\n\t\tvar touches = getTouches(event, touch);\n\t\tif (!touches) {\n\t\t\treturn;\n\t\t}\n\t\tcalTouchData(touch);\n\t\tdetect(event, touch);\n\t\t$.gestures.session.prevTouch = touch;\n\t\tif (event.type === $.EVENT_END && !$.isTouchable) {\n\t\t\t$.gestures.touch = $.gestures.session = {};\n\t\t}\n\t};\n\twindow.addEventListener($.EVENT_START, handleTouchEvent);\n\twindow.addEventListener($.EVENT_MOVE, handleTouchEvent);\n\twindow.addEventListener($.EVENT_END, handleTouchEvent);\n\twindow.addEventListener($.EVENT_CANCEL, handleTouchEvent);\n\t//fixed hashchange(android)\n\twindow.addEventListener($.EVENT_CLICK, function(e) {\n\t\t//TODO 应该判断当前target是不是在targets.popover内部，而不是非要相等\n\t\tif (($.os.android || $.os.ios) && (($.targets.popover && e.target === $.targets.popover) || ($.targets.tab) || $.targets.offcanvas || $.targets.modal)) {\n\t\t\te.preventDefault();\n\t\t}\n\t}, true);\n\n\n\t//增加原生滚动识别\n\t$.isScrolling = false;\n\tvar scrollingTimeout = null;\n\twindow.addEventListener('scroll', function() {\n\t\t$.isScrolling = true;\n\t\tscrollingTimeout && clearTimeout(scrollingTimeout);\n\t\tscrollingTimeout = setTimeout(function() {\n\t\t\t$.isScrolling = false;\n\t\t}, 250);\n\t});\n})(mui, window);\n/**\n * mui gesture flick[left|right|up|down]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar flickStartTime = 0;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tvar now = $.now();\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif (now - flickStartTime > 300) {\n\t\t\t\t\tflickStartTime = now;\n\t\t\t\t\tsession.flickStart = touch.center;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\ttouch.flick = false;\n\t\t\t\tif (session.flickStart && options.flickMaxTime > (now - flickStartTime) && touch.distance > options.flickMinDistince) {\n\t\t\t\t\ttouch.flick = true;\n\t\t\t\t\ttouch.flickTime = now - flickStartTime;\n\t\t\t\t\ttouch.flickDistanceX = touch.center.x - session.flickStart.x;\n\t\t\t\t\ttouch.flickDistanceY = touch.center.y - session.flickStart.y;\n\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t};\n\t/**\n\t * mui gesture flick\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 5,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tflickMaxTime: 200,\n\t\t\tflickMinDistince: 10\n\t\t}\n\t});\n})(mui, 'flick');\n/**\n * mui gesture swipe[left|right|up|down]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tif (event.type === $.EVENT_END || event.type === $.EVENT_CANCEL) {\n\t\t\tvar options = this.options;\n\t\t\ttouch.swipe = false;\n\t\t\t//TODO 后续根据velocity计算\n\t\t\tif (touch.direction && options.swipeMaxTime > touch.deltaTime && touch.distance > options.swipeMinDistince) {\n\t\t\t\ttouch.swipe = true;\n\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\n\t\t\t}\n\t\t}\n\t};\n\t/**\n\t * mui gesture swipe\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tswipeMaxTime: 300,\n\t\t\tswipeMinDistince: 18\n\t\t}\n\t});\n})(mui, 'swipe');\n/**\n * mui gesture drag[start|left|right|up|down|end]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif (!touch.direction || !session.target) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//修正direction,可在session期间自行锁定拖拽方向，方便开发scroll类不同方向拖拽插件嵌套\n\t\t\t\tif (session.lockDirection && session.startDirection) {\n\t\t\t\t\tif (session.startDirection && session.startDirection !== touch.direction) {\n\t\t\t\t\t\tif (session.startDirection === 'up' || session.startDirection === 'down') {\n\t\t\t\t\t\t\ttouch.direction = touch.deltaY < 0 ? 'up' : 'down';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttouch.direction = touch.deltaX < 0 ? 'left' : 'right';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!session.drag) {\n\t\t\t\t\tsession.drag = true;\n\t\t\t\t\t$.trigger(session.target, name + 'start', touch);\n\t\t\t\t}\n\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tif (session.drag && touch.isFinal) {\n\t\t\t\t\t$.trigger(session.target, name + 'end', touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture drag\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 20,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1\n\t\t}\n\t});\n})(mui, 'drag');\n/**\n * mui gesture tap and doubleTap\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar lastTarget;\n\tvar lastTapTime;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_END:\n\t\t\t\tif (!touch.isFinal) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar target = session.target;\n\t\t\t\tif (!target || (target.disabled || (target.classList && target.classList.contains('mui-disabled')))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (touch.distance < options.tapMaxDistance && touch.deltaTime < options.tapMaxTime) {\n\t\t\t\t\tif ($.options.gestureConfig.doubletap && lastTarget && (lastTarget === target)) { //same target\n\t\t\t\t\t\tif (lastTapTime && (touch.timestamp - lastTapTime) < options.tapMaxInterval) {\n\t\t\t\t\t\t\t$.trigger(target, 'doubletap', touch);\n\t\t\t\t\t\t\tlastTapTime = $.now();\n\t\t\t\t\t\t\tlastTarget = target;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t$.trigger(target, name, touch);\n\t\t\t\t\tlastTapTime = $.now();\n\t\t\t\t\tlastTarget = target;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture tap\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 30,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1,\n\t\t\ttapMaxInterval: 300,\n\t\t\ttapMaxDistance: 5,\n\t\t\ttapMaxTime: 250\n\t\t}\n\t});\n})(mui, 'tap');\n/**\n * mui gesture longtap\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar timer;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = setTimeout(function() {\n\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t}, options.holdTimeout);\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif (touch.distance > options.holdThreshold) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tclearTimeout(timer);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture longtap\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1,\n\t\t\tholdTimeout: 500,\n\t\t\tholdThreshold: 2\n\t\t}\n\t});\n})(mui, 'longtap');\n/**\n * mui gesture hold\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar timer;\n\tvar handle = function(event, touch) {\n\t\tvar session = $.gestures.session;\n\t\tvar options = this.options;\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tif ($.options.gestureConfig.hold) {\n\t\t\t\t\ttimer && clearTimeout(timer);\n\t\t\t\t\ttimer = setTimeout(function() {\n\t\t\t\t\t\ttouch.hold = true;\n\t\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t\t}, options.holdTimeout);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tif (timer) {\n\t\t\t\t\tclearTimeout(timer) && (timer = null);\n\t\t\t\t\t$.trigger(session.target, 'release', touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture hold\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tfingers: 1,\n\t\t\tholdTimeout: 0\n\t\t}\n\t});\n})(mui, 'hold');\n/**\n * mui gesture pinch\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar handle = function(event, touch) {\n\t\tvar options = this.options;\n\t\tvar session = $.gestures.session;\n\t\tswitch (event.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_MOVE:\n\t\t\t\tif ($.options.gestureConfig.pinch) {\n\t\t\t\t\tif (touch.touches.length < 2) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!session.pinch) { //start\n\t\t\t\t\t\tsession.pinch = true;\n\t\t\t\t\t\t$.trigger(session.target, name + 'start', touch);\n\t\t\t\t\t}\n\t\t\t\t\t$.trigger(session.target, name, touch);\n\t\t\t\t\tvar scale = touch.scale;\n\t\t\t\t\tvar rotation = touch.rotation;\n\t\t\t\t\tvar lastScale = typeof touch.lastScale === 'undefined' ? 1 : touch.lastScale;\n\t\t\t\t\tvar scaleDiff = 0.000000000001; //防止scale与lastScale相等，不触发事件的情况。\n\t\t\t\t\tif (scale > lastScale) { //out\n\t\t\t\t\t\tlastScale = scale - scaleDiff;\n\t\t\t\t\t\t$.trigger(session.target, name + 'out', touch);\n\t\t\t\t\t} //in\n\t\t\t\t\telse if (scale < lastScale) {\n\t\t\t\t\t\tlastScale = scale + scaleDiff;\n\t\t\t\t\t\t$.trigger(session.target, name + 'in', touch);\n\t\t\t\t\t}\n\t\t\t\t\tif (Math.abs(rotation) > options.minRotationAngle) {\n\t\t\t\t\t\t$.trigger(session.target, 'rotate', touch);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tif ($.options.gestureConfig.pinch && session.pinch && touch.touches.length === 2) {\n\t\t\t\t\tsession.pinch = false;\n\t\t\t\t\t$.trigger(session.target, name + 'end', touch);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\t/**\n\t * mui gesture pinch\n\t */\n\t$.addGesture({\n\t\tname: name,\n\t\tindex: 10,\n\t\thandle: handle,\n\t\toptions: {\n\t\t\tminRotationAngle: 0\n\t\t}\n\t});\n})(mui, 'pinch');\n/**\n * mui.init\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\t$.global = $.options = {\n\t\tgestureConfig: {\n\t\t\ttap: true,\n\t\t\tdoubletap: false,\n\t\t\tlongtap: false,\n\t\t\thold: false,\n\t\t\tflick: true,\n\t\t\tswipe: true,\n\t\t\tdrag: true,\n\t\t\tpinch: false\n\t\t}\n\t};\n\t/**\n\t *\n\t * @param {type} options\n\t * @returns {undefined}\n\t */\n\t$.initGlobal = function(options) {\n\t\t$.options = $.extend(true, $.global, options);\n\t\treturn this;\n\t};\n\tvar inits = {};\n\n\t/**\n\t * 单页配置 初始化\n\t * @param {object} options\n\t */\n\t$.init = function(options) {\n\t\t$.options = $.extend(true, $.global, options || {});\n\t\t$.ready(function() {\n\t\t\t$.doAction('inits', function(index, init) {\n\t\t\t\tvar isInit = !!(!inits[init.name] || init.repeat);\n\t\t\t\tif (isInit) {\n\t\t\t\t\tinit.handle.call($);\n\t\t\t\t\tinits[init.name] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn this;\n\t};\n\n\t/**\n\t * 增加初始化执行流程\n\t * @param {function} init\n\t */\n\t$.addInit = function(init) {\n\t\treturn $.addAction('inits', init);\n\t};\n\t/**\n\t * 处理html5版本subpages \n\t */\n\t$.addInit({\n\t\tname: 'iframe',\n\t\tindex: 100,\n\t\thandle: function() {\n\t\t\tvar options = $.options;\n\t\t\tvar subpages = options.subpages || [];\n\t\t\tif (!$.os.plus && subpages.length) {\n\t\t\t\t//暂时只处理单个subpage。后续可以考虑支持多个subpage\n\t\t\t\tcreateIframe(subpages[0]);\n\t\t\t}\n\t\t}\n\t});\n\tvar createIframe = function(options) {\n\t\tvar wrapper = document.createElement('div');\n\t\twrapper.className = 'mui-iframe-wrapper';\n\t\tvar styles = options.styles || {};\n\t\tif (typeof styles.top !== 'string') {\n\t\t\tstyles.top = '0px';\n\t\t}\n\t\tif (typeof styles.bottom !== 'string') {\n\t\t\tstyles.bottom = '0px';\n\t\t}\n\t\twrapper.style.top = styles.top;\n\t\twrapper.style.bottom = styles.bottom;\n\t\tvar iframe = document.createElement('iframe');\n\t\tiframe.src = options.url;\n\t\tiframe.id = options.id || options.url;\n\t\tiframe.name = iframe.id;\n\t\twrapper.appendChild(iframe);\n\t\tdocument.body.appendChild(wrapper);\n\t\t//目前仅处理微信\n\t\t$.os.wechat && handleScroll(wrapper, iframe);\n\t};\n\n\tfunction handleScroll(wrapper, iframe) {\n\t\tvar key = 'MUI_SCROLL_POSITION_' + document.location.href + '_' + iframe.src;\n\t\tvar scrollTop = (parseFloat(localStorage.getItem(key)) || 0);\n\t\tif (scrollTop) {\n\t\t\t(function(y) {\n\t\t\t\tiframe.onload = function() {\n\t\t\t\t\twindow.scrollTo(0, y);\n\t\t\t\t};\n\t\t\t})(scrollTop);\n\t\t}\n\t\tsetInterval(function() {\n\t\t\tvar _scrollTop = window.scrollY;\n\t\t\tif (scrollTop !== _scrollTop) {\n\t\t\t\tlocalStorage.setItem(key, _scrollTop + '');\n\t\t\t\tscrollTop = _scrollTop;\n\t\t\t}\n\t\t}, 100);\n\t};\n\t$(function() {\n\t\tvar classList = document.body.classList;\n\t\tvar os = [];\n\t\tif ($.os.ios) {\n\t\t\tos.push({\n\t\t\t\tos: 'ios',\n\t\t\t\tversion: $.os.version\n\t\t\t});\n\t\t\tclassList.add('mui-ios');\n\t\t} else if ($.os.android) {\n\t\t\tos.push({\n\t\t\t\tos: 'android',\n\t\t\t\tversion: $.os.version\n\t\t\t});\n\t\t\tclassList.add('mui-android');\n\t\t}\n\t\tif ($.os.wechat) {\n\t\t\tos.push({\n\t\t\t\tos: 'wechat',\n\t\t\t\tversion: $.os.wechat.version\n\t\t\t});\n\t\t\tclassList.add('mui-wechat');\n\t\t}\n\t\tif (os.length) {\n\t\t\t$.each(os, function(index, osObj) {\n\t\t\t\tvar version = '';\n\t\t\t\tvar classArray = [];\n\t\t\t\tif (osObj.version) {\n\t\t\t\t\t$.each(osObj.version.split('.'), function(i, v) {\n\t\t\t\t\t\tversion = version + (version ? '-' : '') + v;\n\t\t\t\t\t\tclassList.add($.className(osObj.os + '-' + version));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(mui);\n/**\n * mui.init 5+\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\tvar defaultOptions = {\n\t\tswipeBack: false,\n\t\tpreloadPages: [], //5+ lazyLoad webview\n\t\tpreloadLimit: 10, //预加载窗口的数量限制(一旦超出，先进先出)\n\t\tkeyEventBind: {\n\t\t\tbackbutton: true,\n\t\t\tmenubutton: true\n\t\t},\n\t\ttitleConfig: {\n\t\t\theight: \"44px\",\n\t\t\tbackgroundColor: \"#f7f7f7\", //导航栏背景色\n\t\t\tbottomBorderColor: \"#cccccc\", //底部边线颜色\n\t\t\ttitle: { //标题配置\n\t\t\t\ttext: \"\", //标题文字\n\t\t\t\tposition: {\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\theight: \"100%\"\n\t\t\t\t},\n\t\t\t\tstyles: {\n\t\t\t\t\tcolor: \"#000000\",\n\t\t\t\t\talign: \"center\",\n\t\t\t\t\tfamily: \"'Helvetica Neue',Helvetica,sans-serif\",\n\t\t\t\t\tsize: \"17px\",\n\t\t\t\t\tstyle: \"normal\",\n\t\t\t\t\tweight: \"normal\",\n\t\t\t\t\tfontSrc: \"\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tback: {\n\t\t\t\timage: {\n\t\t\t\t\tbase64Data: '',\n\t\t\t\t\timgSrc: '',\n\t\t\t\t\tsprite: {\n\t\t\t\t\t\ttop: '0px',\n\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\theight: '100%'\n\t\t\t\t\t},\n\t\t\t\t\tposition: {\n\t\t\t\t\t\ttop: \"10px\",\n\t\t\t\t\t\tleft: \"10px\",\n\t\t\t\t\t\twidth: \"24px\",\n\t\t\t\t\t\theight: \"24px\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//默认页面动画\n\tvar defaultShow = {\n\t\tevent:\"titleUpdate\",\n\t\tautoShow: true,\n\t\tduration: 300,\n\t\taniShow: 'slide-in-right',\n\t\textras:{}\n\t};\n\t//若执行了显示动画初始化操作，则要覆盖默认配置\n\tif($.options.show) {\n\t\tdefaultShow = $.extend(true, defaultShow, $.options.show);\n\t}\n\n\t$.currentWebview = null;\n\n\t$.extend(true, $.global, defaultOptions);\n\t$.extend(true, $.options, defaultOptions);\n\t/**\n\t * 等待动画配置\n\t * @param {type} options\n\t * @returns {Object}\n\t */\n\t$.waitingOptions = function(options) {\n\t\treturn $.extend(true, {}, {\n\t\t\tautoShow: true,\n\t\t\ttitle: '',\n\t\t\tmodal: false\n\t\t}, options);\n\t};\n\t/**\n\t * 窗口显示配置\n\t * @param {type} options\n\t * @returns {Object}\n\t */\n\t$.showOptions = function(options) {\n\t\treturn $.extend(true, {}, defaultShow, options);\n\t};\n\t/**\n\t * 窗口默认配置\n\t * @param {type} options\n\t * @returns {Object}\n\t */\n\t$.windowOptions = function(options) {\n\t\treturn $.extend({\n\t\t\tscalable: false,\n\t\t\tbounce: \"\" //vertical\n\t\t}, options);\n\t};\n\t/**\n\t * plusReady\n\t * @param {type} callback\n\t * @returns {_L6.$}\n\t */\n\t$.plusReady = function(callback) {\n\t\tif(window.plus) {\n\t\t\tsetTimeout(function() { //解决callback与plusready事件的执行时机问题(典型案例:showWaiting,closeWaiting)\n\t\t\t\tcallback();\n\t\t\t}, 0);\n\t\t} else {\n\t\t\tdocument.addEventListener(\"plusready\", function() {\n\t\t\t\tcallback();\n\t\t\t}, false);\n\t\t}\n\t\treturn this;\n\t};\n\t/**\n\t * 5+ event(5+没提供之前我自己实现)\n\t * @param {type} webview\n\t * @param {type} eventType\n\t * @param {type} data\n\t * @returns {undefined}\n\t */\n\t$.fire = function(webview, eventType, data) {\n\t\tif(webview) {\n\t\t\tif(typeof data === 'undefined') {\n\t\t\t\tdata = '';\n\t\t\t} else if(typeof data === 'boolean' || typeof data === 'number') {\n\t\t\t\twebview.evalJS(\"typeof mui!=='undefined'&&mui.receive('\" + eventType + \"',\" + data + \")\");\n\t\t\t\treturn;\n\t\t\t} else if($.isPlainObject(data) || $.isArray(data)) {\n\t\t\t\tdata = JSON.stringify(data || {}).replace(/\\'/g, \"\\\\u0027\").replace(/\\\\/g, \"\\\\u005c\");\n\t\t\t}\n\t\t\twebview.evalJS(\"typeof mui!=='undefined'&&mui.receive('\" + eventType + \"','\" + data + \"')\");\n\t\t}\n\t};\n\t/**\n\t * 5+ event(5+没提供之前我自己实现)\n\t * @param {type} eventType\n\t * @param {type} data\n\t * @returns {undefined}\n\t */\n\t$.receive = function(eventType, data) {\n\t\tif(eventType) {\n\t\t\ttry {\n\t\t\t\tif(data && typeof data === 'string') {\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t}\n\t\t\t} catch(e) {}\n\t\t\t$.trigger(document, eventType, data);\n\t\t}\n\t};\n\tvar triggerPreload = function(webview) {\n\t\tif(!webview.preloaded) { //保证仅触发一次\n\t\t\t$.fire(webview, 'preload');\n\t\t\tvar list = webview.children();\n\t\t\tfor(var i = 0; i < list.length; i++) {\n\t\t\t\t$.fire(list[i], 'preload');\n\t\t\t}\n\t\t\twebview.preloaded = true;\n\t\t}\n\t};\n\tvar trigger = function(webview, eventType, timeChecked) {\n\t\tif(timeChecked) {\n\t\t\tif(!webview[eventType + 'ed']) {\n\t\t\t\t$.fire(webview, eventType);\n\t\t\t\tvar list = webview.children();\n\t\t\t\tfor(var i = 0; i < list.length; i++) {\n\t\t\t\t\t$.fire(list[i], eventType);\n\t\t\t\t}\n\t\t\t\twebview[eventType + 'ed'] = true;\n\t\t\t}\n\t\t} else {\n\t\t\t$.fire(webview, eventType);\n\t\t\tvar list = webview.children();\n\t\t\tfor(var i = 0; i < list.length; i++) {\n\t\t\t\t$.fire(list[i], eventType);\n\t\t\t}\n\t\t}\n\n\t};\n\t/**\n\t * 打开新窗口\n\t * @param {string} url 要打开的页面地址\n\t * @param {string} id 指定页面ID\n\t * @param {object} options 可选:参数,等待,窗口,显示配置{params:{},waiting:{},styles:{},show:{}}\n\t */\n\t$.openWindow = function(url, id, options) {\n\t\tif(typeof url === 'object') {\n\t\t\toptions = url;\n\t\t\turl = options.url;\n\t\t\tid = options.id || url;\n\t\t} else {\n\t\t\tif(typeof id === 'object') {\n\t\t\t\toptions = id;\n\t\t\t\tid = options.id || url;\n\t\t\t} else {\n\t\t\t\tid = id || url;\n\t\t\t}\n\t\t}\n\t\tif(!$.os.plus) {\n\t\t\t//TODO 先临时这么处理：手机上顶层跳，PC上parent跳\n\t\t\tif($.os.ios || $.os.android) {\n\t\t\t\twindow.top.location.href = url;\n\t\t\t} else {\n\t\t\t\twindow.parent.location.href = url;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif(!window.plus) {\n\t\t\treturn;\n\t\t}\n\n\t\toptions = options || {};\n\t\tvar params = options.params || {};\n\t\tvar webview = null,\n\t\t\twebviewCache = null,\n\t\t\tnShow, nWaiting;\n\n\t\tif($.webviews[id]) {\n\t\t\twebviewCache = $.webviews[id];\n\t\t\t//webview真实存在，才能获取\n\t\t\tif(plus.webview.getWebviewById(id)) {\n\t\t\t\twebview = webviewCache.webview;\n\t\t\t}\n\t\t} else if(options.createNew !== true) {\n\t\t\twebview = plus.webview.getWebviewById(id);\n\t\t}\n\n\t\tif(webview) { //已缓存\n\t\t\t//每次show都需要传递动画参数；\n\t\t\t//预加载的动画参数优先级：openWindow配置>preloadPages配置>mui默认配置；\n\t\t\tnShow = webviewCache ? webviewCache.show : defaultShow;\n\t\t\tnShow = options.show ? $.extend(nShow, options.show) : nShow;\n\t\t\tnShow.autoShow && webview.show(nShow.aniShow, nShow.duration, function() {\n\t\t\t\ttriggerPreload(webview);\n\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\n\t\t\t});\n\t\t\tif(webviewCache) {\n\t\t\t\twebviewCache.afterShowMethodName && webview.evalJS(webviewCache.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n\t\t\t}\n\t\t\treturn webview;\n\t\t} else { //新窗口\n\t\t\tif(!url) {\n\t\t\t\tthrow new Error('webview[' + id + '] does not exist');\n\t\t\t}\n\n\t\t\t//显示waiting\n\t\t\tvar waitingConfig = $.waitingOptions(options.waiting);\n\t\t\tif(waitingConfig.autoShow) {\n\t\t\t\tnWaiting = plus.nativeUI.showWaiting(waitingConfig.title, waitingConfig.options);\n\t\t\t}\n\n\t\t\t//创建页面\n\t\t\toptions = $.extend(options, {\n\t\t\t\tid: id,\n\t\t\t\turl: url\n\t\t\t});\n\n\t\t\twebview = $.createWindow(options);\n\n\t\t\t//显示\n\t\t\tnShow = $.showOptions(options.show);\n\t\t\tif(nShow.autoShow) {\n\t\t\t\tvar showWebview = function() {\n\t\t\t\t\t//关闭等待框\n\t\t\t\t\tif(nWaiting) {\n\t\t\t\t\t\tnWaiting.close();\n\t\t\t\t\t}\n\t\t\t\t\t//显示页面\n\t\t\t\t\twebview.show(nShow.aniShow, nShow.duration, function() {},nShow.extras);\n\t\t\t\t\toptions.afterShowMethodName && webview.evalJS(options.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n\t\t\t\t};\n\t\t\t\t//titleUpdate触发时机早于loaded，更换为titleUpdate后，可以更早的显示webview\n\t\t\t\twebview.addEventListener(nShow.event, showWebview, false);\n\t\t\t\t//loaded事件发生后，触发预加载和pagebeforeshow事件\n\t\t\t\twebview.addEventListener(\"loaded\", function() {\n\t\t\t\t\ttriggerPreload(webview);\n\t\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\t\treturn webview;\n\t};\n\n\t$.openWindowWithTitle = function(options, titleConfig) {\n\t\toptions = options || {};\n\t\tvar url = options.url;\n\t\tvar id = options.id || url;\n\n\t\tif(!$.os.plus) {\n\t\t\t//TODO 先临时这么处理：手机上顶层跳，PC上parent跳\n\t\t\tif($.os.ios || $.os.android) {\n\t\t\t\twindow.top.location.href = url;\n\t\t\t} else {\n\t\t\t\twindow.parent.location.href = url;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif(!window.plus) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar params = options.params || {};\n\t\tvar webview = null,\n\t\t\twebviewCache = null,\n\t\t\tnShow, nWaiting;\n\n\t\tif($.webviews[id]) {\n\t\t\twebviewCache = $.webviews[id];\n\t\t\t//webview真实存在，才能获取\n\t\t\tif(plus.webview.getWebviewById(id)) {\n\t\t\t\twebview = webviewCache.webview;\n\t\t\t}\n\t\t} else if(options.createNew !== true) {\n\t\t\twebview = plus.webview.getWebviewById(id);\n\t\t}\n\n\t\tif(webview) { //已缓存\n\t\t\t//每次show都需要传递动画参数；\n\t\t\t//预加载的动画参数优先级：openWindow配置>preloadPages配置>mui默认配置；\n\t\t\tnShow = webviewCache ? webviewCache.show : defaultShow;\n\t\t\tnShow = options.show ? $.extend(nShow, options.show) : nShow;\n\t\t\tnShow.autoShow && webview.show(nShow.aniShow, nShow.duration, function() {\n\t\t\t\ttriggerPreload(webview);\n\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\n\t\t\t});\n\t\t\tif(webviewCache) {\n\t\t\t\twebviewCache.afterShowMethodName && webview.evalJS(webviewCache.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n\t\t\t}\n\t\t\treturn webview;\n\t\t} else { //新窗口\n\t\t\tif(!url) {\n\t\t\t\tthrow new Error('webview[' + id + '] does not exist');\n\t\t\t}\n\n\t\t\t//显示waiting\n\t\t\tvar waitingConfig = $.waitingOptions(options.waiting);\n\t\t\tif(waitingConfig.autoShow) {\n\t\t\t\tnWaiting = plus.nativeUI.showWaiting(waitingConfig.title, waitingConfig.options);\n\t\t\t}\n\n\t\t\t//创建页面\n\t\t\toptions = $.extend(options, {\n\t\t\t\tid: id,\n\t\t\t\turl: url\n\t\t\t});\n\n\t\t\twebview = $.createWindow(options);\n\n\t\t\tif(titleConfig) { //处理原生头\n\t\t\t\t$.extend(true, $.options.titleConfig, titleConfig);\n\t\t\t\tvar tid = $.options.titleConfig.id ? $.options.titleConfig.id : id + \"_title\";\n\t\t\t\tvar view = new plus.nativeObj.View(tid, {\n\t\t\t\t\ttop: 0,\n\t\t\t\t\theight: $.options.titleConfig.height,\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\tdock: \"top\",\n\t\t\t\t\tposition: \"dock\"\n\t\t\t\t});\n\t\t\t\tview.drawRect($.options.titleConfig.backgroundColor); //绘制背景色\n\t\t\t\tvar _b = parseInt($.options.titleConfig.height) - 1;\n\t\t\t\tview.drawRect($.options.titleConfig.bottomBorderColor, {\n\t\t\t\t\ttop: _b + \"px\",\n\t\t\t\t\tleft: \"0px\"\n\t\t\t\t}); //绘制底部边线\n\n\t\t\t\t//绘制文字\n\t\t\t\tif($.options.titleConfig.title.text){\n\t\t\t\t\tvar _title = $.options.titleConfig.title;\n\t\t\t\t\tview.drawText(_title.text,_title.position , _title.styles);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//返回图标绘制\n\t\t\t\tvar _back = $.options.titleConfig.back;\n\t\t\t\tvar backClick = null;\n\t\t\t\t//优先字体\n\n\t\t\t\t//其次是图片\n\t\t\t\tvar _backImage = _back.image;\n\t\t\t\tif(_backImage.base64Data || _backImage.imgSrc) {\n\t\t\t\t\t//TODO 此处需要处理百分比的情况\n\t\t\t\t\tbackClick = {\n\t\t\t\t\t\tleft:parseInt(_backImage.position.left),\n\t\t\t\t\t\tright:parseInt(_backImage.position.left) + parseInt(_backImage.position.width)\n\t\t\t\t\t};\n\t\t\t\t\tvar bitmap = new plus.nativeObj.Bitmap(id + \"_back\");\n\t\t\t\t\tif(_backImage.base64Data) { //优先base64编码字符串\n\t\t\t\t\t\tbitmap.loadBase64Data(_backImage.base64Data);\n\t\t\t\t\t} else { //其次加载图片文件\n\t\t\t\t\t\tbitmap.load(_backImage.imgSrc);\n\t\t\t\t\t}\n\t\t\t\t\tview.drawBitmap(bitmap,_backImage.sprite , _backImage.position);\n\t\t\t\t}\n\n\t\t\t\t//处理点击事件\n\t\t\t\tview.setTouchEventRect({\n\t\t\t\t\ttop: \"0px\",\n\t\t\t\t\tleft: \"0px\",\n\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\theight: \"100%\"\n\t\t\t\t});\n\t\t\t\tview.interceptTouchEvent(true);\n\t\t\t\tview.addEventListener(\"click\", function(e) {\n\t\t\t\t\tvar x = e.clientX;\n\t\t\t\t\t\n\t\t\t\t\t//返回按钮点击\n\t\t\t\t\tif(backClick&& x > backClick.left && x < backClick.right){\n\t\t\t\t\t\tif( _back.click && $.isFunction(_back.click)){\n\t\t\t\t\t\t\t_back.click();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\twebview.evalJS(\"window.mui&&mui.back();\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\t\t\t\twebview.append(view);\n\n\t\t\t}\n\n\t\t\t//显示\n\t\t\tnShow = $.showOptions(options.show);\n\t\t\tif(nShow.autoShow) {\n\t\t\t\t//titleUpdate触发时机早于loaded，更换为titleUpdate后，可以更早的显示webview\n\t\t\t\twebview.addEventListener(nShow.event, function () {\n\t\t\t\t\t//关闭等待框\n\t\t\t\t\tif(nWaiting) {\n\t\t\t\t\t\tnWaiting.close();\n\t\t\t\t\t}\n\t\t\t\t\t//显示页面\n\t\t\t\t\twebview.show(nShow.aniShow, nShow.duration, function() {},nShow.extras);\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\t\treturn webview;\n\t};\n\n\t/**\n\t * 根据配置信息创建一个webview\n\t * @param {type} options\n\t * @param {type} isCreate\n\t * @returns {webview}\n\t */\n\t$.createWindow = function(options, isCreate) {\n\t\tif(!window.plus) {\n\t\t\treturn;\n\t\t}\n\t\tvar id = options.id || options.url;\n\t\tvar webview;\n\t\tif(options.preload) {\n\t\t\tif($.webviews[id] && $.webviews[id].webview.getURL()) { //已经cache\n\t\t\t\twebview = $.webviews[id].webview;\n\t\t\t} else { //新增预加载窗口\n\t\t\t\t//判断是否携带createNew参数，默认为false\n\t\t\t\tif(options.createNew !== true) {\n\t\t\t\t\twebview = plus.webview.getWebviewById(id);\n\t\t\t\t}\n\n\t\t\t\t//之前没有，那就新创建\t\n\t\t\t\tif(!webview) {\n\t\t\t\t\twebview = plus.webview.create(options.url, id, $.windowOptions(options.styles), $.extend({\n\t\t\t\t\t\tpreload: true\n\t\t\t\t\t}, options.extras));\n\t\t\t\t\tif(options.subpages) {\n\t\t\t\t\t\t$.each(options.subpages, function(index, subpage) {\n\t\t\t\t\t\t\tvar subpageId = subpage.id || subpage.url;\n\t\t\t\t\t\t\tif(subpageId) { //过滤空对象\n\t\t\t\t\t\t\t\tvar subWebview = plus.webview.getWebviewById(subpageId);\n\t\t\t\t\t\t\t\tif(!subWebview) { //如果该webview不存在，则创建\n\t\t\t\t\t\t\t\t\tsubWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), $.extend({\n\t\t\t\t\t\t\t\t\t\tpreload: true\n\t\t\t\t\t\t\t\t\t}, subpage.extras));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twebview.append(subWebview);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//TODO 理论上，子webview也应该计算到预加载队列中，但这样就麻烦了，要退必须退整体，否则可能出现问题；\n\t\t\t$.webviews[id] = {\n\t\t\t\twebview: webview, //目前仅preload的缓存webview\n\t\t\t\tpreload: true,\n\t\t\t\tshow: $.showOptions(options.show),\n\t\t\t\tafterShowMethodName: options.afterShowMethodName //就不应该用evalJS。应该是通过事件消息通讯\n\t\t\t};\n\t\t\t//索引该预加载窗口\n\t\t\tvar preloads = $.data.preloads;\n\t\t\tvar index = preloads.indexOf(id);\n\t\t\tif(~index) { //删除已存在的(变相调整插入位置)\n\t\t\t\tpreloads.splice(index, 1);\n\t\t\t}\n\t\t\tpreloads.push(id);\n\t\t\tif(preloads.length > $.options.preloadLimit) {\n\t\t\t\t//先进先出\n\t\t\t\tvar first = $.data.preloads.shift();\n\t\t\t\tvar webviewCache = $.webviews[first];\n\t\t\t\tif(webviewCache && webviewCache.webview) {\n\t\t\t\t\t//需要将自己打开的所有页面，全部close；\n\t\t\t\t\t//关闭该预加载webview\t\n\t\t\t\t\t$.closeAll(webviewCache.webview);\n\t\t\t\t}\n\t\t\t\t//删除缓存\n\t\t\t\tdelete $.webviews[first];\n\t\t\t}\n\t\t} else {\n\t\t\tif(isCreate !== false) { //直接创建非预加载窗口\n\t\t\t\twebview = plus.webview.create(options.url, id, $.windowOptions(options.styles), options.extras);\n\t\t\t\tif(options.subpages) {\n\t\t\t\t\t$.each(options.subpages, function(index, subpage) {\n\t\t\t\t\t\tvar subpageId = subpage.id || subpage.url;\n\t\t\t\t\t\tvar subWebview = plus.webview.getWebviewById(subpageId);\n\t\t\t\t\t\tif(!subWebview) {\n\t\t\t\t\t\t\tsubWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), subpage.extras);\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebview.append(subWebview);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn webview;\n\t};\n\n\t/**\n\t * 预加载\n\t */\n\t$.preload = function(options) {\n\t\t//调用预加载函数，不管是否传递preload参数，强制变为true\n\t\tif(!options.preload) {\n\t\t\toptions.preload = true;\n\t\t}\n\t\treturn $.createWindow(options);\n\t};\n\n\t/**\n\t *关闭当前webview打开的所有webview；\n\t */\n\t$.closeOpened = function(webview) {\n\t\tvar opened = webview.opened();\n\t\tif(opened) {\n\t\t\tfor(var i = 0, len = opened.length; i < len; i++) {\n\t\t\t\tvar openedWebview = opened[i];\n\t\t\t\tvar open_open = openedWebview.opened();\n\t\t\t\tif(open_open && open_open.length > 0) {\n\t\t\t\t\t//关闭打开的webview\n\t\t\t\t\t$.closeOpened(openedWebview);\n\t\t\t\t\t//关闭自己\n\t\t\t\t\topenedWebview.close(\"none\");\n\t\t\t\t} else {\n\t\t\t\t\t//如果直接孩子节点，就不用关闭了，因为父关闭的时候，会自动关闭子；\n\t\t\t\t\tif(openedWebview.parent() !== webview) {\n\t\t\t\t\t\topenedWebview.close('none');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t$.closeAll = function(webview, aniShow) {\n\t\t$.closeOpened(webview);\n\t\tif(aniShow) {\n\t\t\twebview.close(aniShow);\n\t\t} else {\n\t\t\twebview.close();\n\t\t}\n\t};\n\n\t/**\n\t * 批量创建webview\n\t * @param {type} options\n\t * @returns {undefined}\n\t */\n\t$.createWindows = function(options) {\n\t\t$.each(options, function(index, option) {\n\t\t\t//初始化预加载窗口(创建)和非预加载窗口(仅配置，不创建)\n\t\t\t$.createWindow(option, false);\n\t\t});\n\t};\n\t/**\n\t * 创建当前页面的子webview\n\t * @param {type} options\n\t * @returns {webview}\n\t */\n\t$.appendWebview = function(options) {\n\t\tif(!window.plus) {\n\t\t\treturn;\n\t\t}\n\t\tvar id = options.id || options.url;\n\t\tvar webview;\n\t\tif(!$.webviews[id]) { //保证执行一遍\n\t\t\t//TODO 这里也有隐患，比如某个webview不是作为subpage创建的，而是作为target webview的话；\n\t\t\tif(!plus.webview.getWebviewById(id)) {\n\t\t\t\twebview = plus.webview.create(options.url, id, options.styles, options.extras);\n\t\t\t}\n\t\t\t//之前的实现方案：子窗口loaded之后再append到父窗口中；\n\t\t\t//问题：部分子窗口loaded事件发生较晚，此时执行父窗口的children方法会返回空，导致父子通讯失败；\n\t\t\t//     比如父页面执行完preload事件后，需触发子页面的preload事件，此时未append的话，就无法触发；\n\t\t\t//修改方式：不再监控loaded事件，直接append\n\t\t\t//by chb@20150521\n\t\t\t// webview.addEventListener('loaded', function() {\n\t\t\tplus.webview.currentWebview().append(webview);\n\t\t\t// });\n\t\t\t$.webviews[id] = options;\n\n\t\t}\n\t\treturn webview;\n\t};\n\n\t//全局webviews\n\t$.webviews = {};\n\t//预加载窗口索引\n\t$.data.preloads = [];\n\t//$.currentWebview\n\t$.plusReady(function() {\n\t\t$.currentWebview = plus.webview.currentWebview();\n\t});\n\t$.addInit({\n\t\tname: '5+',\n\t\tindex: 100,\n\t\thandle: function() {\n\t\t\tvar options = $.options;\n\t\t\tvar subpages = options.subpages || [];\n\t\t\tif($.os.plus) {\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\t//TODO  这里需要判断一下，最好等子窗口加载完毕后，再调用主窗口的show方法；\n\t\t\t\t\t//或者：在openwindow方法中，监听实现；\n\t\t\t\t\t$.each(subpages, function(index, subpage) {\n\t\t\t\t\t\t$.appendWebview(subpage);\n\t\t\t\t\t});\n\t\t\t\t\t//判断是否首页\n\t\t\t\t\tif(plus.webview.currentWebview() === plus.webview.getWebviewById(plus.runtime.appid)) {\n\t\t\t\t\t\t//首页需要自己激活预加载；\n\t\t\t\t\t\t//timeout因为子页面loaded之后才append的，防止子页面尚未append、从而导致其preload未触发的问题；\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\ttriggerPreload(plus.webview.currentWebview());\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t}\n\t\t\t\t\t//设置ios顶部状态栏颜色；\n\t\t\t\t\tif($.os.ios && $.options.statusBarBackground) {\n\t\t\t\t\t\tplus.navigator.setStatusBarBackground($.options.statusBarBackground);\n\t\t\t\t\t}\n\t\t\t\t\tif($.os.android && parseFloat($.os.version) < 4.4) {\n\t\t\t\t\t\t//解决Android平台4.4版本以下，resume后，父窗体标题延迟渲染的问题；\n\t\t\t\t\t\tif(plus.webview.currentWebview().parent() == null) {\n\t\t\t\t\t\t\tdocument.addEventListener(\"resume\", function() {\n\t\t\t\t\t\t\t\tvar body = document.body;\n\t\t\t\t\t\t\t\tbody.style.display = 'none';\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tbody.style.display = '';\n\t\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//已支持iframe嵌入\n\t\t\t\t//\t\t\t\tif (subpages.length > 0) {\n\t\t\t\t//\t\t\t\t\tvar err = document.createElement('div');\n\t\t\t\t//\t\t\t\t\terr.className = 'mui-error';\n\t\t\t\t//\t\t\t\t\t//文字描述\n\t\t\t\t//\t\t\t\t\tvar span = document.createElement('span');\n\t\t\t\t//\t\t\t\t\tspan.innerHTML = '在该浏览器下，不支持创建子页面，具体参考';\n\t\t\t\t//\t\t\t\t\terr.appendChild(span);\n\t\t\t\t//\t\t\t\t\tvar a = document.createElement('a');\n\t\t\t\t//\t\t\t\t\ta.innerHTML = '\"mui框架适用场景\"';\n\t\t\t\t//\t\t\t\t\ta.href = 'http://ask.dcloud.net.cn/article/113';\n\t\t\t\t//\t\t\t\t\terr.appendChild(a);\n\t\t\t\t//\t\t\t\t\tdocument.body.appendChild(err);\n\t\t\t\t//\t\t\t\t\tconsole.log('在该浏览器下，不支持创建子页面');\n\t\t\t\t//\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\t});\n\twindow.addEventListener('preload', function() {\n\t\t//处理预加载部分\n\t\tvar webviews = $.options.preloadPages || [];\n\t\t$.plusReady(function() {\n\t\t\t$.each(webviews, function(index, webview) {\n\t\t\t\t$.createWindow($.extend(webview, {\n\t\t\t\t\tpreload: true\n\t\t\t\t}));\n\t\t\t});\n\n\t\t});\n\t});\n\t$.supportStatusbarOffset = function() {\n\t\treturn $.os.plus && $.os.ios && parseFloat($.os.version) >= 7;\n\t};\n\t$.ready(function() {\n\t\t//标识当前环境支持statusbar\n\t\tif($.supportStatusbarOffset()) {\n\t\t\tdocument.body.classList.add('mui-statusbar');\n\t\t}\n\t});\n})(mui);\n\n/**\n * mui back\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n\t/**\n\t * register back\n\t * @param {type} back\n\t * @returns {$.gestures}\n\t */\n\t$.addBack = function(back) {\n\t\treturn $.addAction('backs', back);\n\t};\n\t/**\n\t * default\n\t */\n\t$.addBack({\n\t\tname: 'browser',\n\t\tindex: 100,\n\t\thandle: function() {\n\t\t\tif (window.history.length > 1) {\n\t\t\t\twindow.history.back();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t});\n\t/**\n\t * 后退\n\t */\n\t$.back = function() {\n\t\tif (typeof $.options.beforeback === 'function') {\n\t\t\tif ($.options.beforeback() === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t$.doAction('backs');\n\t};\n\twindow.addEventListener('tap', function(e) {\n\t\tvar action = $.targets.action;\n\t\tif (action && action.classList.contains('mui-action-back')) {\n\t\t\t$.back();\n\t\t\t$.targets.action = false;\n\t\t}\n\t});\n\twindow.addEventListener('swiperight', function(e) {\n\t\tvar detail = e.detail;\n\t\tif ($.options.swipeBack === true && Math.abs(detail.angle) < 3) {\n\t\t\t$.back();\n\t\t}\n\t});\n\n})(mui, window);\n/**\n * mui back 5+\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n\tif ($.os.plus && $.os.android) {\n\t\t$.addBack({\n\t\t\tname: 'mui',\n\t\t\tindex: 5,\n\t\t\thandle: function() {\n\t\t\t\t//后续重新设计此处，将back放到各个空间内部实现\n\t\t\t\t//popover\n\t\t\t\tif ($.targets._popover && $.targets._popover.classList.contains('mui-active')) {\n\t\t\t\t\t$($.targets._popover).popover('hide');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t//offcanvas\n\t\t\t\tvar offCanvas = document.querySelector('.mui-off-canvas-wrap.mui-active');\n\t\t\t\tif (offCanvas) {\n\t\t\t\t\t$(offCanvas).offCanvas('close');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar previewImage = $.isFunction($.getPreviewImage) && $.getPreviewImage();\n\t\t\t\tif (previewImage && previewImage.isShown()) {\n\t\t\t\t\tpreviewImage.close();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t//popup\n\t\t\t\treturn $.closePopup();\n\t\t\t}\n\t\t});\n\t}\n\t//首次按下back按键的时间\n\t$.__back__first = null;\n\t/**\n\t * 5+ back\n\t */\n\t$.addBack({\n\t\tname: '5+',\n\t\tindex: 10,\n\t\thandle: function() {\n\t\t\tif (!window.plus) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar wobj = plus.webview.currentWebview();\n\t\t\tvar parent = wobj.parent();\n\t\t\tif (parent) {\n\t\t\t\tparent.evalJS('mui&&mui.back();');\n\t\t\t} else {\n\t\t\t\twobj.canBack(function(e) {\n\t\t\t\t\t//by chb 暂时注释，在碰到类似popover之类的锚点的时候，需多次点击才能返回；\n\t\t\t\t\tif (e.canBack) { //webview history back\n\t\t\t\t\t\twindow.history.back();\n\t\t\t\t\t} else { //webview close or hide\n\t\t\t\t\t\t//fixed by fxy 此处不应该用opener判断，因为用户有可能自己close掉当前窗口的opener。这样的话。opener就为空了，导致不能执行close\n\t\t\t\t\t\tif (wobj.id === plus.runtime.appid) { //首页\n\t\t\t\t\t\t\t//首页不存在opener的情况下，后退实际上应该是退出应用；\n\t\t\t\t\t\t\t//首次按键，提示‘再按一次退出应用’\n\t\t\t\t\t\t\tif (!$.__back__first) {\n\t\t\t\t\t\t\t\t$.__back__first = new Date().getTime();\n\t\t\t\t\t\t\t\tmui.toast('再按一次退出应用');\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\t$.__back__first = null;\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (new Date().getTime() - $.__back__first < 2000) {\n\t\t\t\t\t\t\t\t\tplus.runtime.quit();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else { //其他页面，\n\t\t\t\t\t\t\tif (wobj.preload) {\n\t\t\t\t\t\t\t\twobj.hide(\"auto\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//关闭页面时，需要将其打开的所有子页面全部关闭；\n\t\t\t\t\t\t\t\t$.closeAll(wobj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t});\n\n\n\t$.menu = function() {\n\t\tvar menu = document.querySelector('.mui-action-menu');\n\t\tif (menu) {\n\t\t\t$.trigger(menu, $.EVENT_START); //临时处理menu无touchstart的话，找不到当前targets的问题\n\t\t\t$.trigger(menu, 'tap');\n\t\t} else { //执行父窗口的menu\n\t\t\tif (window.plus) {\n\t\t\t\tvar wobj = $.currentWebview;\n\t\t\t\tvar parent = wobj.parent();\n\t\t\t\tif (parent) { //又得evalJS\n\t\t\t\t\tparent.evalJS('mui&&mui.menu();');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tvar __back = function() {\n\t\t$.back();\n\t};\n\tvar __menu = function() {\n\t\t$.menu();\n\t};\n\t//默认监听\n\t$.plusReady(function() {\n\t\tif ($.options.keyEventBind.backbutton) {\n\t\t\tplus.key.addEventListener('backbutton', __back, false);\n\t\t}\n\t\tif ($.options.keyEventBind.menubutton) {\n\t\t\tplus.key.addEventListener('menubutton', __menu, false);\n\t\t}\n\t});\n\t//处理按键监听事件\n\t$.addInit({\n\t\tname: 'keyEventBind',\n\t\tindex: 1000,\n\t\thandle: function() {\n\t\t\t$.plusReady(function() {\n\t\t\t\t//如果不为true，则移除默认监听\n\t\t\t\tif (!$.options.keyEventBind.backbutton) {\n\t\t\t\t\tplus.key.removeEventListener('backbutton', __back);\n\t\t\t\t}\n\t\t\t\tif (!$.options.keyEventBind.menubutton) {\n\t\t\t\t\tplus.key.removeEventListener('menubutton', __menu);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(mui, window);\n/**\n * mui.init pulldownRefresh\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n\t$.addInit({\n\t\tname: 'pullrefresh',\n\t\tindex: 1000,\n\t\thandle: function() {\n\t\t\tvar options = $.options;\n\t\t\tvar pullRefreshOptions = options.pullRefresh || {};\n\t\t\tvar hasPulldown = pullRefreshOptions.down && pullRefreshOptions.down.hasOwnProperty('callback');\n\t\t\tvar hasPullup = pullRefreshOptions.up && pullRefreshOptions.up.hasOwnProperty('callback');\n\t\t\tif(hasPulldown || hasPullup) {\n\t\t\t\tvar container = pullRefreshOptions.container;\n\t\t\t\tif(container) {\n\t\t\t\t\tvar $container = $(container);\n\t\t\t\t\tif($container.length === 1) {\n\t\t\t\t\t\tif($.os.plus) { //5+环境\n\t\t\t\t\t\t\tif(hasPulldown && pullRefreshOptions.down.style == \"circle\") { //原生转圈\n\t\t\t\t\t\t\t\t$.plusReady(function() {\n\t\t\t\t\t\t\t\t\t//这里改写$.fn.pullRefresh\n\t\t\t\t\t\t\t\t\t$.fn.pullRefresh = $.fn.pullRefresh_native;\n\t\t\t\t\t\t\t\t\t$container.pullRefresh(pullRefreshOptions);\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t} else if($.os.android) { //非原生转圈，但是Android环境\n\t\t\t\t\t\t\t\t$.plusReady(function() {\n\t\t\t\t\t\t\t\t\t//这里改写$.fn.pullRefresh\n\t\t\t\t\t\t\t\t\t$.fn.pullRefresh = $.fn.pullRefresh_native\n\t\t\t\t\t\t\t\t\tvar webview = plus.webview.currentWebview();\n\t\t\t\t\t\t\t\t\tif(window.__NWin_Enable__ === false) { //不支持多webview\n\t\t\t\t\t\t\t\t\t\t$container.pullRefresh(pullRefreshOptions);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif(hasPullup) {\n\t\t\t\t\t\t\t\t\t\t\t//当前页面初始化pullup\n\t\t\t\t\t\t\t\t\t\t\tvar upOptions = {};\n\t\t\t\t\t\t\t\t\t\t\tupOptions.up = pullRefreshOptions.up;\n\t\t\t\t\t\t\t\t\t\t\tupOptions.webviewId = webview.id || webview.getURL();\n\t\t\t\t\t\t\t\t\t\t\t$container.pullRefresh(upOptions);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif(hasPulldown) {\n\t\t\t\t\t\t\t\t\t\t\tvar parent = webview.parent();\n\t\t\t\t\t\t\t\t\t\t\tvar id = webview.id || webview.getURL();\n\t\t\t\t\t\t\t\t\t\t\tif(parent) {\n\t\t\t\t\t\t\t\t\t\t\t\tif(!hasPullup) { //如果没有上拉加载，需要手动初始化一个默认的pullRefresh，以便当前页面容器可以调用endPulldownToRefresh等方法\n\t\t\t\t\t\t\t\t\t\t\t\t\t$container.pullRefresh({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twebviewId: id\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tvar downOptions = {\n\t\t\t\t\t\t\t\t\t\t\t\t\twebviewId: id//子页面id\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t\tdownOptions.down = $.extend({}, pullRefreshOptions.down);\n\t\t\t\t\t\t\t\t\t\t\t\tdownOptions.down.callback = '_CALLBACK';\n\t\t\t\t\t\t\t\t\t\t\t\t//改写父页面的$.fn.pullRefresh\n\t\t\t\t\t\t\t\t\t\t\t\tparent.evalJS(\"mui.fn.pullRefresh=mui.fn.pullRefresh_native\");\n\t\t\t\t\t\t\t\t\t\t\t\t//父页面初始化pulldown\n\t\t\t\t\t\t\t\t\t\t\t\tparent.evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify(downOptions) + \"')\");\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else { //非原生转圈，iOS环境\n\t\t\t\t\t\t\t\t$container.pullRefresh(pullRefreshOptions);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$container.pullRefresh(pullRefreshOptions);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n})(mui);\n/**\n * mui ajax\n * @param {type} $\n * @returns {undefined}\n */\n(function($, window, undefined) {\n\n\tvar jsonType = 'application/json';\n\tvar htmlType = 'text/html';\n\tvar rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi;\n\tvar scriptTypeRE = /^(?:text|application)\\/javascript/i;\n\tvar xmlTypeRE = /^(?:text|application)\\/xml/i;\n\tvar blankRE = /^\\s*$/;\n\n\t$.ajaxSettings = {\n\t\ttype: 'GET',\n\t\tbeforeSend: $.noop,\n\t\tsuccess: $.noop,\n\t\terror: $.noop,\n\t\tcomplete: $.noop,\n\t\tcontext: null,\n\t\txhr: function(protocol) {\n\t\t\treturn new window.XMLHttpRequest();\n\t\t},\n\t\taccepts: {\n\t\t\tscript: 'text/javascript, application/javascript, application/x-javascript',\n\t\t\tjson: jsonType,\n\t\t\txml: 'application/xml, text/xml',\n\t\t\thtml: htmlType,\n\t\t\ttext: 'text/plain'\n\t\t},\n\t\ttimeout: 0,\n\t\tprocessData: true,\n\t\tcache: true\n\t};\n\tvar ajaxBeforeSend = function(xhr, settings) {\n\t\tvar context = settings.context\n\t\tif(settings.beforeSend.call(context, xhr, settings) === false) {\n\t\t\treturn false;\n\t\t}\n\t};\n\tvar ajaxSuccess = function(data, xhr, settings) {\n\t\tsettings.success.call(settings.context, data, 'success', xhr);\n\t\tajaxComplete('success', xhr, settings);\n\t};\n\t// type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n\tvar ajaxError = function(error, type, xhr, settings) {\n\t\tsettings.error.call(settings.context, xhr, type, error);\n\t\tajaxComplete(type, xhr, settings);\n\t};\n\t// status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n\tvar ajaxComplete = function(status, xhr, settings) {\n\t\tsettings.complete.call(settings.context, xhr, status);\n\t};\n\n\tvar serialize = function(params, obj, traditional, scope) {\n\t\tvar type, array = $.isArray(obj),\n\t\t\thash = $.isPlainObject(obj);\n\t\t$.each(obj, function(key, value) {\n\t\t\ttype = $.type(value);\n\t\t\tif(scope) {\n\t\t\t\tkey = traditional ? scope :\n\t\t\t\t\tscope + '[' + (hash || type === 'object' || type === 'array' ? key : '') + ']';\n\t\t\t}\n\t\t\t// handle data in serializeArray() format\n\t\t\tif(!scope && array) {\n\t\t\t\tparams.add(value.name, value.value);\n\t\t\t}\n\t\t\t// recurse into nested objects\n\t\t\telse if(type === \"array\" || (!traditional && type === \"object\")) {\n\t\t\t\tserialize(params, value, traditional, key);\n\t\t\t} else {\n\t\t\t\tparams.add(key, value);\n\t\t\t}\n\t\t});\n\t};\n\tvar serializeData = function(options) {\n\t\tif(options.processData && options.data && typeof options.data !== \"string\") {\n\t\t\tvar contentType = options.contentType;\n\t\t\tif(!contentType && options.headers) {\n\t\t\t\tcontentType = options.headers['Content-Type'];\n\t\t\t}\n\t\t\tif(contentType && ~contentType.indexOf(jsonType)) { //application/json\n\t\t\t\toptions.data = JSON.stringify(options.data);\n\t\t\t} else {\n\t\t\t\toptions.data = $.param(options.data, options.traditional);\n\t\t\t}\n\t\t}\n\t\tif(options.data && (!options.type || options.type.toUpperCase() === 'GET')) {\n\t\t\toptions.url = appendQuery(options.url, options.data);\n\t\t\toptions.data = undefined;\n\t\t}\n\t};\n\tvar appendQuery = function(url, query) {\n\t\tif(query === '') {\n\t\t\treturn url;\n\t\t}\n\t\treturn(url + '&' + query).replace(/[&?]{1,2}/, '?');\n\t};\n\tvar mimeToDataType = function(mime) {\n\t\tif(mime) {\n\t\t\tmime = mime.split(';', 2)[0];\n\t\t}\n\t\treturn mime && (mime === htmlType ? 'html' :\n\t\t\tmime === jsonType ? 'json' :\n\t\t\tscriptTypeRE.test(mime) ? 'script' :\n\t\t\txmlTypeRE.test(mime) && 'xml') || 'text';\n\t};\n\tvar parseArguments = function(url, data, success, dataType) {\n\t\tif($.isFunction(data)) {\n\t\t\tdataType = success, success = data, data = undefined;\n\t\t}\n\t\tif(!$.isFunction(success)) {\n\t\t\tdataType = success, success = undefined;\n\t\t}\n\t\treturn {\n\t\t\turl: url,\n\t\t\tdata: data,\n\t\t\tsuccess: success,\n\t\t\tdataType: dataType\n\t\t};\n\t};\n\t$.ajax = function(url, options) {\n\t\tif(typeof url === \"object\") {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\t\tvar settings = options || {};\n\t\tsettings.url = url || settings.url;\n\t\tfor(var key in $.ajaxSettings) {\n\t\t\tif(settings[key] === undefined) {\n\t\t\t\tsettings[key] = $.ajaxSettings[key];\n\t\t\t}\n\t\t}\n\t\tserializeData(settings);\n\t\tvar dataType = settings.dataType;\n\n\t\tif(settings.cache === false || ((!options || options.cache !== true) && ('script' === dataType))) {\n\t\t\tsettings.url = appendQuery(settings.url, '_=' + $.now());\n\t\t}\n\t\tvar mime = settings.accepts[dataType && dataType.toLowerCase()];\n\t\tvar headers = {};\n\t\tvar setHeader = function(name, value) {\n\t\t\theaders[name.toLowerCase()] = [name, value];\n\t\t};\n\t\tvar protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol;\n\t\tvar xhr = settings.xhr(settings);\n\t\tvar nativeSetHeader = xhr.setRequestHeader;\n\t\tvar abortTimeout;\n\n\t\tsetHeader('X-Requested-With', 'XMLHttpRequest');\n\t\tsetHeader('Accept', mime || '*/*');\n\t\tif(!!(mime = settings.mimeType || mime)) {\n\t\t\tif(mime.indexOf(',') > -1) {\n\t\t\t\tmime = mime.split(',', 2)[0];\n\t\t\t}\n\t\t\txhr.overrideMimeType && xhr.overrideMimeType(mime);\n\t\t}\n\t\tif(settings.contentType || (settings.contentType !== false && settings.data && settings.type.toUpperCase() !== 'GET')) {\n\t\t\tsetHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded');\n\t\t}\n\t\tif(settings.headers) {\n\t\t\tfor(var name in settings.headers)\n\t\t\t\tsetHeader(name, settings.headers[name]);\n\t\t}\n\t\txhr.setRequestHeader = setHeader;\n\n\t\txhr.onreadystatechange = function() {\n\t\t\tif(xhr.readyState === 4) {\n\t\t\t\txhr.onreadystatechange = $.noop;\n\t\t\t\tclearTimeout(abortTimeout);\n\t\t\t\tvar result, error = false;\n\t\t\t\tvar isLocal = protocol === 'file:';\n\t\t\t\tif((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 || (xhr.status === 0 && isLocal && xhr.responseText)) {\n\t\t\t\t\tdataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'));\n\t\t\t\t\tresult = xhr.responseText;\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// http://perfectionkills.com/global-eval-what-are-the-options/\n\t\t\t\t\t\tif(dataType === 'script') {\n\t\t\t\t\t\t\t(1, eval)(result);\n\t\t\t\t\t\t} else if(dataType === 'xml') {\n\t\t\t\t\t\t\tresult = xhr.responseXML;\n\t\t\t\t\t\t} else if(dataType === 'json') {\n\t\t\t\t\t\t\tresult = blankRE.test(result) ? null : $.parseJSON(result);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\terror = e;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(error) {\n\t\t\t\t\t\tajaxError(error, 'parsererror', xhr, settings);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tajaxSuccess(result, xhr, settings);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar status = xhr.status ? 'error' : 'abort';\n\t\t\t\t\tvar statusText = xhr.statusText || null;\n\t\t\t\t\tif(isLocal) {\n\t\t\t\t\t\tstatus = 'error';\n\t\t\t\t\t\tstatusText = '404';\n\t\t\t\t\t}\n\t\t\t\t\tajaxError(statusText, status, xhr, settings);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tif(ajaxBeforeSend(xhr, settings) === false) {\n\t\t\txhr.abort();\n\t\t\tajaxError(null, 'abort', xhr, settings);\n\t\t\treturn xhr;\n\t\t}\n\n\t\tif(settings.xhrFields) {\n\t\t\tfor(var name in settings.xhrFields) {\n\t\t\t\txhr[name] = settings.xhrFields[name];\n\t\t\t}\n\t\t}\n\n\t\tvar async = 'async' in settings ? settings.async : true;\n\n\t\txhr.open(settings.type.toUpperCase(), settings.url, async, settings.username, settings.password);\n\n\t\tfor(var name in headers) {\n\t\t\tif(headers.hasOwnProperty(name)) {\n\t\t\t\tnativeSetHeader.apply(xhr, headers[name]);\n\t\t\t}\n\t\t}\n\t\tif(settings.timeout > 0) {\n\t\t\tabortTimeout = setTimeout(function() {\n\t\t\t\txhr.onreadystatechange = $.noop;\n\t\t\t\txhr.abort();\n\t\t\t\tajaxError(null, 'timeout', xhr, settings);\n\t\t\t}, settings.timeout);\n\t\t}\n\t\txhr.send(settings.data ? settings.data : null);\n\t\treturn xhr;\n\t};\n\n\t$.param = function(obj, traditional) {\n\t\tvar params = [];\n\t\tparams.add = function(k, v) {\n\t\t\tthis.push(encodeURIComponent(k) + '=' + encodeURIComponent(v));\n\t\t};\n\t\tserialize(params, obj, traditional);\n\t\treturn params.join('&').replace(/%20/g, '+');\n\t};\n\t$.get = function( /* url, data, success, dataType */ ) {\n\t\treturn $.ajax(parseArguments.apply(null, arguments));\n\t};\n\n\t$.post = function( /* url, data, success, dataType */ ) {\n\t\tvar options = parseArguments.apply(null, arguments);\n\t\toptions.type = 'POST';\n\t\treturn $.ajax(options);\n\t};\n\n\t$.getJSON = function( /* url, data, success */ ) {\n\t\tvar options = parseArguments.apply(null, arguments);\n\t\toptions.dataType = 'json';\n\t\treturn $.ajax(options);\n\t};\n\n\t$.fn.load = function(url, data, success) {\n\t\tif(!this.length)\n\t\t\treturn this;\n\t\tvar self = this,\n\t\t\tparts = url.split(/\\s/),\n\t\t\tselector,\n\t\t\toptions = parseArguments(url, data, success),\n\t\t\tcallback = options.success;\n\t\tif(parts.length > 1)\n\t\t\toptions.url = parts[0], selector = parts[1];\n\t\toptions.success = function(response) {\n\t\t\tif(selector) {\n\t\t\t\tvar div = document.createElement('div');\n\t\t\t\tdiv.innerHTML = response.replace(rscript, \"\");\n\t\t\t\tvar selectorDiv = document.createElement('div');\n\t\t\t\tvar childs = div.querySelectorAll(selector);\n\t\t\t\tif(childs && childs.length > 0) {\n\t\t\t\t\tfor(var i = 0, len = childs.length; i < len; i++) {\n\t\t\t\t\t\tselectorDiv.appendChild(childs[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tself[0].innerHTML = selectorDiv.innerHTML;\n\t\t\t} else {\n\t\t\t\tself[0].innerHTML = response;\n\t\t\t}\n\t\t\tcallback && callback.apply(self, arguments);\n\t\t};\n\t\t$.ajax(options);\n\t\treturn this;\n\t};\n\n})(mui, window);\n/**\n * 5+ ajax\n */\n(function($) {\n\tvar originAnchor = document.createElement('a');\n\toriginAnchor.href = window.location.href;\n\t$.plusReady(function() {\n\t\t$.ajaxSettings = $.extend($.ajaxSettings, {\n\t\t\txhr: function(settings) {\n\t\t\t\tif (settings.crossDomain) { //强制使用plus跨域\n\t\t\t\t\treturn new plus.net.XMLHttpRequest();\n\t\t\t\t}\n\t\t\t\t//仅在webview的url为远程文件，且ajax请求的资源不同源下使用plus.net.XMLHttpRequest\n\t\t\t\tif (originAnchor.protocol !== 'file:') {\n\t\t\t\t\tvar urlAnchor = document.createElement('a');\n\t\t\t\t\turlAnchor.href = settings.url;\n\t\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\t\tsettings.crossDomain = (originAnchor.protocol + '//' + originAnchor.host) !== (urlAnchor.protocol + '//' + urlAnchor.host);\n\t\t\t\t\tif (settings.crossDomain) {\n\t\t\t\t\t\treturn new plus.net.XMLHttpRequest();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ($.os.ios && window.webkit && window.webkit.messageHandlers) { //wkwebview下同样使用5+ xhr\n                    return new plus.net.XMLHttpRequest();\n                }\n\t\t\t\treturn new window.XMLHttpRequest();\n\t\t\t}\n\t\t});\n\t});\n})(mui);\n/**\n * mui layout(offset[,position,width,height...])\n * @param {type} $\n * @param {type} window\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, undefined) {\n\t$.offset = function(element) {\n\t\tvar box = {\n\t\t\ttop : 0,\n\t\t\tleft : 0\n\t\t};\n\t\tif ( typeof element.getBoundingClientRect !== undefined) {\n\t\t\tbox = element.getBoundingClientRect();\n\t\t}\n\t\treturn {\n\t\t\ttop : box.top + window.pageYOffset - element.clientTop,\n\t\t\tleft : box.left + window.pageXOffset - element.clientLeft\n\t\t};\n\t};\n})(mui, window); \n/**\n * mui animation\n */\n(function($, window) {\n\t/**\n\t * scrollTo\n\t */\n\t$.scrollTo = function(scrollTop, duration, callback) {\n\t\tduration = duration || 1000;\n\t\tvar scroll = function(duration) {\n\t\t\tif (duration <= 0) {\n\t\t\t\twindow.scrollTo(0, scrollTop);\n\t\t\t\tcallback && callback();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar distaince = scrollTop - window.scrollY;\n\t\t\tsetTimeout(function() {\n\t\t\t\twindow.scrollTo(0, window.scrollY + distaince / duration * 10);\n\t\t\t\tscroll(duration - 10);\n\t\t\t}, 16.7);\n\t\t};\n\t\tscroll(duration);\n\t};\n\t$.animationFrame = function(cb) {\n\t\tvar args, isQueued, context;\n\t\treturn function() {\n\t\t\targs = arguments;\n\t\t\tcontext = this;\n\t\t\tif (!isQueued) {\n\t\t\t\tisQueued = true;\n\t\t\t\trequestAnimationFrame(function() {\n\t\t\t\t\tcb.apply(context, args);\n\t\t\t\t\tisQueued = false;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\n})(mui, window);\n(function($) {\n\tvar initializing = false,\n\t\tfnTest = /xyz/.test(function() {\n\t\t\txyz;\n\t\t}) ? /\\b_super\\b/ : /.*/;\n\n\tvar Class = function() {};\n\tClass.extend = function(prop) {\n\t\tvar _super = this.prototype;\n\t\tinitializing = true;\n\t\tvar prototype = new this();\n\t\tinitializing = false;\n\t\tfor (var name in prop) {\n\t\t\tprototype[name] = typeof prop[name] == \"function\" &&\n\t\t\t\ttypeof _super[name] == \"function\" && fnTest.test(prop[name]) ?\n\t\t\t\t(function(name, fn) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tvar tmp = this._super;\n\n\t\t\t\t\t\tthis._super = _super[name];\n\n\t\t\t\t\t\tvar ret = fn.apply(this, arguments);\n\t\t\t\t\t\tthis._super = tmp;\n\n\t\t\t\t\t\treturn ret;\n\t\t\t\t\t};\n\t\t\t\t})(name, prop[name]) :\n\t\t\t\tprop[name];\n\t\t}\n\t\tfunction Class() {\n\t\t\tif (!initializing && this.init)\n\t\t\t\tthis.init.apply(this, arguments);\n\t\t}\n\t\tClass.prototype = prototype;\n\t\tClass.prototype.constructor = Class;\n\t\tClass.extend = arguments.callee;\n\t\treturn Class;\n\t};\n\t$.Class = Class;\n})(mui);\n(function($, document, undefined) {\n    var CLASS_PULL_TOP_POCKET = 'mui-pull-top-pocket';\n    var CLASS_PULL_BOTTOM_POCKET = 'mui-pull-bottom-pocket';\n    var CLASS_PULL = 'mui-pull';\n    var CLASS_PULL_LOADING = 'mui-pull-loading';\n    var CLASS_PULL_CAPTION = 'mui-pull-caption';\n    var CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\n    var CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\n    var CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\n\n    var CLASS_ICON = 'mui-icon';\n    var CLASS_SPINNER = 'mui-spinner';\n    var CLASS_ICON_PULLDOWN = 'mui-icon-pulldown';\n\n    var CLASS_BLOCK = 'mui-block';\n    var CLASS_HIDDEN = 'mui-hidden';\n    var CLASS_VISIBILITY = 'mui-visibility';\n\n    var CLASS_LOADING_UP = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\n    var CLASS_LOADING_DOWN = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\n    var CLASS_LOADING = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_SPINNER;\n\n    var pocketHtml = ['<div class=\"' + CLASS_PULL + '\">', '<div class=\"{icon}\"></div>', '<div class=\"' + CLASS_PULL_CAPTION + '\">{contentrefresh}</div>', '</div>'].join('');\n\n    var PullRefresh = {\n        init: function(element, options) {\n            this._super(element, $.extend(true, {\n                scrollY: true,\n                scrollX: false,\n                indicators: true,\n                deceleration: 0.003,\n                down: {\n                    height: 50,\n                    contentinit: '下拉可以刷新',\n                    contentdown: '下拉可以刷新',\n                    contentover: '释放立即刷新',\n                    contentrefresh: '正在刷新...'\n                },\n                up: {\n                    height: 50,\n                    auto: false,\n                    contentinit: '上拉显示更多',\n                    contentdown: '上拉显示更多',\n                    contentrefresh: '正在加载...',\n                    contentnomore: '没有更多数据了',\n                    duration: 300\n                }\n            }, options));\n        },\n        _init: function() {\n            this._super();\n            this._initPocket();\n        },\n        _initPulldownRefresh: function() {\n            this.pulldown = true;\n            if (this.topPocket) {\n                this.pullPocket = this.topPocket;\n                this.pullPocket.classList.add(CLASS_BLOCK);\n                this.pullPocket.classList.add(CLASS_VISIBILITY);\n                this.pullCaption = this.topCaption;\n                this.pullLoading = this.topLoading;\n            }\n        },\n        _initPullupRefresh: function() {\n            this.pulldown = false;\n            if (this.bottomPocket) {\n                this.pullPocket = this.bottomPocket;\n                this.pullPocket.classList.add(CLASS_BLOCK);\n                this.pullPocket.classList.add(CLASS_VISIBILITY);\n                this.pullCaption = this.bottomCaption;\n                this.pullLoading = this.bottomLoading;\n            }\n        },\n        _initPocket: function() {\n            var options = this.options;\n            if (options.down && options.down.hasOwnProperty('callback')) {\n                this.topPocket = this.scroller.querySelector('.' + CLASS_PULL_TOP_POCKET);\n                if (!this.topPocket) {\n                    this.topPocket = this._createPocket(CLASS_PULL_TOP_POCKET, options.down, CLASS_LOADING_DOWN);\n                    this.wrapper.insertBefore(this.topPocket, this.wrapper.firstChild);\n                }\n                this.topLoading = this.topPocket.querySelector('.' + CLASS_PULL_LOADING);\n                this.topCaption = this.topPocket.querySelector('.' + CLASS_PULL_CAPTION);\n            }\n            if (options.up && options.up.hasOwnProperty('callback')) {\n                this.bottomPocket = this.scroller.querySelector('.' + CLASS_PULL_BOTTOM_POCKET);\n                if (!this.bottomPocket) {\n                    this.bottomPocket = this._createPocket(CLASS_PULL_BOTTOM_POCKET, options.up, CLASS_LOADING);\n                    this.scroller.appendChild(this.bottomPocket);\n                }\n                this.bottomLoading = this.bottomPocket.querySelector('.' + CLASS_PULL_LOADING);\n                this.bottomCaption = this.bottomPocket.querySelector('.' + CLASS_PULL_CAPTION);\n                //TODO only for h5\n                this.wrapper.addEventListener('scrollbottom', this);\n            }\n        },\n        _createPocket: function(clazz, options, iconClass) {\n            var pocket = document.createElement('div');\n            pocket.className = clazz;\n            pocket.innerHTML = pocketHtml.replace('{contentrefresh}', options.contentinit).replace('{icon}', iconClass);\n            return pocket;\n        },\n        _resetPullDownLoading: function() {\n            var loading = this.pullLoading;\n            if (loading) {\n                this.pullCaption.innerHTML = this.options.down.contentdown;\n                loading.style.webkitTransition = \"\";\n                loading.style.webkitTransform = \"\";\n                loading.style.webkitAnimation = \"\";\n                loading.className = CLASS_LOADING_DOWN;\n            }\n        },\n        _setCaptionClass: function(isPulldown, caption, title) {\n            if (!isPulldown) {\n                switch (title) {\n                    case this.options.up.contentdown:\n                        caption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n                        break;\n                    case this.options.up.contentrefresh:\n                        caption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH\n                        break;\n                    case this.options.up.contentnomore:\n                        caption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\n                        break;\n                }\n            }\n        },\n        _setCaption: function(title, reset) {\n            if (this.loading) {\n                return;\n            }\n            var options = this.options;\n            var pocket = this.pullPocket;\n            var caption = this.pullCaption;\n            var loading = this.pullLoading;\n            var isPulldown = this.pulldown;\n            var self = this;\n            if (pocket) {\n                if (reset) {\n                    setTimeout(function() {\n                        caption.innerHTML = self.lastTitle = title;\n                        if (isPulldown) {\n                            loading.className = CLASS_LOADING_DOWN;\n                        } else {\n                            self._setCaptionClass(false, caption, title);\n                            loading.className = CLASS_LOADING;\n                        }\n                        loading.style.webkitAnimation = \"\";\n                        loading.style.webkitTransition = \"\";\n                        loading.style.webkitTransform = \"\";\n                    }, 100);\n                } else {\n                    if (title !== this.lastTitle) {\n                        caption.innerHTML = title;\n                        if (isPulldown) {\n                            if (title === options.down.contentrefresh) {\n                                loading.className = CLASS_LOADING;\n                                loading.style.webkitAnimation = \"spinner-spin 1s step-end infinite\";\n                            } else if (title === options.down.contentover) {\n                                loading.className = CLASS_LOADING_UP;\n                                loading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\n                                loading.style.webkitTransform = \"rotate(180deg)\";\n                            } else if (title === options.down.contentdown) {\n                                loading.className = CLASS_LOADING_DOWN;\n                                loading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\n                                loading.style.webkitTransform = \"rotate(0deg)\";\n                            }\n                        } else {\n                            if (title === options.up.contentrefresh) {\n                                loading.className = CLASS_LOADING + ' ' + CLASS_VISIBILITY;\n                            } else {\n                                loading.className = CLASS_LOADING + ' ' + CLASS_HIDDEN;\n                            }\n                            self._setCaptionClass(false, caption, title);\n                        }\n                        this.lastTitle = title;\n                    }\n                }\n\n            }\n        }\n    };\n    $.PullRefresh = PullRefresh;\n})(mui, document);\n(function($, window, document, undefined) {\n\tvar CLASS_SCROLL = 'mui-scroll';\n\tvar CLASS_SCROLLBAR = 'mui-scrollbar';\n\tvar CLASS_INDICATOR = 'mui-scrollbar-indicator';\n\tvar CLASS_SCROLLBAR_VERTICAL = CLASS_SCROLLBAR + '-vertical';\n\tvar CLASS_SCROLLBAR_HORIZONTAL = CLASS_SCROLLBAR + '-horizontal';\n\n\tvar CLASS_ACTIVE = 'mui-active';\n\n\tvar ease = {\n\t\tquadratic: {\n\t\t\tstyle: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n\t\t\tfn: function(k) {\n\t\t\t\treturn k * (2 - k);\n\t\t\t}\n\t\t},\n\t\tcircular: {\n\t\t\tstyle: 'cubic-bezier(0.1, 0.57, 0.1, 1)',\n\t\t\tfn: function(k) {\n\t\t\t\treturn Math.sqrt(1 - (--k * k));\n\t\t\t}\n\t\t},\n\t\toutCirc: {\n\t\t\tstyle: 'cubic-bezier(0.075, 0.82, 0.165, 1)'\n\t\t},\n\t\toutCubic: {\n\t\t\tstyle: 'cubic-bezier(0.165, 0.84, 0.44, 1)'\n\t\t}\n\t}\n\tvar Scroll = $.Class.extend({\n\t\tinit: function(element, options) {\n\t\t\tthis.wrapper = this.element = element;\n\t\t\tthis.scroller = this.wrapper.children[0];\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\n\t\t\tthis.stopped = false;\n\n\t\t\tthis.options = $.extend(true, {\n\t\t\t\tscrollY: true, //是否竖向滚动\n\t\t\t\tscrollX: false, //是否横向滚动\n\t\t\t\tstartX: 0, //初始化时滚动至x\n\t\t\t\tstartY: 0, //初始化时滚动至y\n\n\t\t\t\tindicators: true, //是否显示滚动条\n\t\t\t\tstopPropagation: false,\n\t\t\t\thardwareAccelerated: true,\n\t\t\t\tfixedBadAndorid: false,\n\t\t\t\tpreventDefaultException: {\n\t\t\t\t\ttagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\n\t\t\t\t},\n\t\t\t\tmomentum: true,\n\n\t\t\t\tsnapX: 0.5, //横向切换距离(以当前容器宽度为基准)\n\t\t\t\tsnap: false, //图片轮播，拖拽式选项卡\n\n\t\t\t\tbounce: true, //是否启用回弹\n\t\t\t\tbounceTime: 500, //回弹动画时间\n\t\t\t\tbounceEasing: ease.outCirc, //回弹动画曲线\n\n\t\t\t\tscrollTime: 500,\n\t\t\t\tscrollEasing: ease.outCubic, //轮播动画曲线\n\n\t\t\t\tdirectionLockThreshold: 5,\n\n\t\t\t\tparallaxElement: false, //视差元素\n\t\t\t\tparallaxRatio: 0.5\n\t\t\t}, options);\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.translateZ = this.options.hardwareAccelerated ? ' translateZ(0)' : '';\n\n\t\t\tthis._init();\n\t\t\tif (this.scroller) {\n\t\t\t\tthis.refresh();\n\t\t\t\t//\t\t\t\tif (this.options.startX !== 0 || this.options.startY !== 0) { //需要判断吗？后续根据实际情况再看看\n\t\t\t\tthis.scrollTo(this.options.startX, this.options.startY);\n\t\t\t\t//\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_init: function() {\n\t\t\tthis._initParallax();\n\t\t\tthis._initIndicators();\n\t\t\tthis._initEvent();\n\t\t},\n\t\t_initParallax: function() {\n\t\t\tif (this.options.parallaxElement) {\n\t\t\t\tthis.parallaxElement = document.querySelector(this.options.parallaxElement);\n\t\t\t\tthis.parallaxStyle = this.parallaxElement.style;\n\t\t\t\tthis.parallaxHeight = this.parallaxElement.offsetHeight;\n\t\t\t\tthis.parallaxImgStyle = this.parallaxElement.querySelector('img').style;\n\t\t\t}\n\t\t},\n\t\t_initIndicators: function() {\n\t\t\tvar self = this;\n\t\t\tself.indicators = [];\n\t\t\tif (!this.options.indicators) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar indicators = [],\n\t\t\t\tindicator;\n\n\t\t\t// Vertical scrollbar\n\t\t\tif (self.options.scrollY) {\n\t\t\t\tindicator = {\n\t\t\t\t\tel: this._createScrollBar(CLASS_SCROLLBAR_VERTICAL),\n\t\t\t\t\tlistenX: false\n\t\t\t\t};\n\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\n\t\t\t\tindicators.push(indicator);\n\t\t\t}\n\n\t\t\t// Horizontal scrollbar\n\t\t\tif (this.options.scrollX) {\n\t\t\t\tindicator = {\n\t\t\t\t\tel: this._createScrollBar(CLASS_SCROLLBAR_HORIZONTAL),\n\t\t\t\t\tlistenY: false\n\t\t\t\t};\n\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\n\t\t\t\tindicators.push(indicator);\n\t\t\t}\n\n\t\t\tfor (var i = indicators.length; i--;) {\n\t\t\t\tthis.indicators.push(new Indicator(this, indicators[i]));\n\t\t\t}\n\n\t\t},\n\t\t_initSnap: function() {\n\t\t\tthis.currentPage = {};\n\t\t\tthis.pages = [];\n\t\t\tvar snaps = this.snaps;\n\t\t\tvar length = snaps.length;\n\t\t\tvar m = 0;\n\t\t\tvar n = -1;\n\t\t\tvar x = 0;\n\t\t\tvar leftX = 0;\n\t\t\tvar rightX = 0;\n\t\t\tvar snapX = 0;\n\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\tvar snap = snaps[i];\n\t\t\t\tvar offsetLeft = snap.offsetLeft;\n\t\t\t\tvar offsetWidth = snap.offsetWidth;\n\t\t\t\tif (i === 0 || offsetLeft <= snaps[i - 1].offsetLeft) {\n\t\t\t\t\tm = 0;\n\t\t\t\t\tn++;\n\t\t\t\t}\n\t\t\t\tif (!this.pages[m]) {\n\t\t\t\t\tthis.pages[m] = [];\n\t\t\t\t}\n\t\t\t\tx = this._getSnapX(offsetLeft);\n\t\t\t\tsnapX = Math.round((offsetWidth) * this.options.snapX);\n\t\t\t\tleftX = x - snapX;\n\t\t\t\trightX = x - offsetWidth + snapX;\n\t\t\t\tthis.pages[m][n] = {\n\t\t\t\t\tx: x,\n\t\t\t\t\tleftX: leftX,\n\t\t\t\t\trightX: rightX,\n\t\t\t\t\tpageX: m,\n\t\t\t\t\telement: snap\n\t\t\t\t}\n\t\t\t\tif (snap.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\tthis.currentPage = this.pages[m][0];\n\t\t\t\t}\n\t\t\t\tif (x >= this.maxScrollX) {\n\t\t\t\t\tm++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.options.startX = this.currentPage.x || 0;\n\t\t},\n\t\t_getSnapX: function(offsetLeft) {\n\t\t\treturn Math.max(Math.min(0, -offsetLeft + (this.wrapperWidth / 2)), this.maxScrollX);\n\t\t},\n\t\t_gotoPage: function(index) {\n\t\t\tthis.currentPage = this.pages[Math.min(index, this.pages.length - 1)][0];\n\t\t\tfor (var i = 0, len = this.snaps.length; i < len; i++) {\n\t\t\t\tif (i === index) {\n\t\t\t\t\tthis.snaps[i].classList.add(CLASS_ACTIVE);\n\t\t\t\t} else {\n\t\t\t\t\tthis.snaps[i].classList.remove(CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scrollTo(this.currentPage.x, 0, this.options.scrollTime);\n\t\t},\n\t\t_nearestSnap: function(x) {\n\t\t\tif (!this.pages.length) {\n\t\t\t\treturn {\n\t\t\t\t\tx: 0,\n\t\t\t\t\tpageX: 0\n\t\t\t\t};\n\t\t\t}\n\t\t\tvar i = 0;\n\t\t\tvar length = this.pages.length;\n\t\t\tif (x > 0) {\n\t\t\t\tx = 0;\n\t\t\t} else if (x < this.maxScrollX) {\n\t\t\t\tx = this.maxScrollX;\n\t\t\t}\n\t\t\tfor (; i < length; i++) {\n\t\t\t\tvar nearestX = this.direction === 'left' ? this.pages[i][0].leftX : this.pages[i][0].rightX;\n\t\t\t\tif (x >= nearestX) {\n\t\t\t\t\treturn this.pages[i][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tx: 0,\n\t\t\t\tpageX: 0\n\t\t\t};\n\t\t},\n\t\t_initEvent: function(detach) {\n\t\t\tvar action = detach ? 'removeEventListener' : 'addEventListener';\n\t\t\twindow[action]('orientationchange', this);\n\t\t\twindow[action]('resize', this);\n\n\t\t\tthis.scroller[action]('webkitTransitionEnd', this);\n\n\t\t\tthis.wrapper[action]($.EVENT_START, this);\n\t\t\tthis.wrapper[action]($.EVENT_CANCEL, this);\n\t\t\tthis.wrapper[action]($.EVENT_END, this);\n\t\t\tthis.wrapper[action]('drag', this);\n\t\t\tthis.wrapper[action]('dragend', this);\n\t\t\tthis.wrapper[action]('flick', this);\n\t\t\tthis.wrapper[action]('scrollend', this);\n\t\t\tif (this.options.scrollX) {\n\t\t\t\tthis.wrapper[action]('swiperight', this);\n\t\t\t}\n\t\t\tvar segmentedControl = this.wrapper.querySelector('.mui-segmented-control');\n\t\t\tif (segmentedControl) { //靠，这个bug排查了一下午，阻止hash跳转，一旦hash跳转会导致可拖拽选项卡的tab不见\n\t\t\t\tmui(segmentedControl)[detach ? 'off' : 'on']('click', 'a', $.preventDefault);\n\t\t\t}\n\n\t\t\tthis.wrapper[action]('scrollstart', this);\n\t\t\tthis.wrapper[action]('refresh', this);\n\t\t},\n\t\t_handleIndicatorScrollend: function() {\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.fade();\n\t\t\t});\n\t\t},\n\t\t_handleIndicatorScrollstart: function() {\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.fade(1);\n\t\t\t});\n\t\t},\n\t\t_handleIndicatorRefresh: function() {\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.refresh();\n\t\t\t});\n\t\t},\n\t\thandleEvent: function(e) {\n\t\t\tif (this.stopped) {\n\t\t\t\tthis.resetPosition();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (e.type) {\n\t\t\t\tcase $.EVENT_START:\n\t\t\t\t\tthis._start(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'drag':\n\t\t\t\t\tthis.options.stopPropagation && e.stopPropagation();\n\t\t\t\t\tthis._drag(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dragend':\n\t\t\t\tcase 'flick':\n\t\t\t\t\tthis.options.stopPropagation && e.stopPropagation();\n\t\t\t\t\tthis._flick(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tcase $.EVENT_END:\n\t\t\t\t\tthis._end(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'webkitTransitionEnd':\n\t\t\t\t\tthis.transitionTimer && this.transitionTimer.cancel();\n\t\t\t\t\tthis._transitionEnd(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scrollstart':\n\t\t\t\t\tthis._handleIndicatorScrollstart(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scrollend':\n\t\t\t\t\tthis._handleIndicatorScrollend(e);\n\t\t\t\t\tthis._scrollend(e);\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'orientationchange':\n\t\t\t\tcase 'resize':\n\t\t\t\t\tthis._resize();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'swiperight':\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'refresh':\n\t\t\t\t\tthis._handleIndicatorRefresh(e);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t},\n\t\t_start: function(e) {\n\t\t\tthis.moved = this.needReset = false;\n\t\t\tthis._transitionTime();\n\t\t\tif (this.isInTransition) {\n\t\t\t\tthis.needReset = true;\n\t\t\t\tthis.isInTransition = false;\n\t\t\t\tvar pos = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\n\t\t\t\tthis.setTranslate(Math.round(pos.x), Math.round(pos.y));\n\t\t\t\t//\t\t\t\tthis.resetPosition(); //reset\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t\t//\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tthis.reLayout();\n\t\t\t$.trigger(this.scroller, 'beforescrollstart', this);\n\t\t},\n\t\t_getDirectionByAngle: function(angle) {\n\t\t\tif (angle < -80 && angle > -100) {\n\t\t\t\treturn 'up';\n\t\t\t} else if (angle >= 80 && angle < 100) {\n\t\t\t\treturn 'down';\n\t\t\t} else if (angle >= 170 || angle <= -170) {\n\t\t\t\treturn 'left';\n\t\t\t} else if (angle >= -35 && angle <= 10) {\n\t\t\t\treturn 'right';\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\t_drag: function(e) {\n\t\t\t//\t\t\tif (this.needReset) {\n\t\t\t//\t\t\t\te.stopPropagation(); //disable parent drag(nested scroller)\n\t\t\t//\t\t\t\treturn;\n\t\t\t//\t\t\t}\n\t\t\tvar detail = e.detail;\n\t\t\tif (this.options.scrollY || detail.direction === 'up' || detail.direction === 'down') { //如果是竖向滚动或手势方向是上或下\n\t\t\t\t//ios8 hack\n\t\t\t\tif ($.os.ios && parseFloat($.os.version) >= 8) { //多webview时，离开当前webview会导致后续touch事件不触发\n\t\t\t\t\tvar clientY = detail.gesture.touches[0].clientY;\n\t\t\t\t\t//下拉刷新 or 上拉加载\n\t\t\t\t\tif ((clientY + 10) > window.innerHeight || clientY < 10) {\n\t\t\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar isPreventDefault = isReturn = false;\n\t\t\tvar direction = this._getDirectionByAngle(detail.angle);\n\t\t\tif (detail.direction === 'left' || detail.direction === 'right') {\n\t\t\t\tif (this.options.scrollX) {\n\t\t\t\t\tisPreventDefault = true;\n\t\t\t\t\tif (!this.moved) { //识别角度(该角度导致轮播不灵敏)\n\t\t\t\t\t\t//\t\t\t\t\t\tif (direction !== 'left' && direction !== 'right') {\n\t\t\t\t\t\t//\t\t\t\t\t\t\tisReturn = true;\n\t\t\t\t\t\t//\t\t\t\t\t\t} else {\n\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\n\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\n\t\t\t\t\t\t//\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (this.options.scrollY && !this.moved) {\n\t\t\t\t\tisReturn = true;\n\t\t\t\t}\n\t\t\t} else if (detail.direction === 'up' || detail.direction === 'down') {\n\t\t\t\tif (this.options.scrollY) {\n\t\t\t\t\tisPreventDefault = true;\n\t\t\t\t\t//\t\t\t\t\tif (!this.moved) { //识别角度,竖向滚动似乎没必要进行小角度验证\n\t\t\t\t\t//\t\t\t\t\t\tif (direction !== 'up' && direction !== 'down') {\n\t\t\t\t\t//\t\t\t\t\t\t\tisReturn = true;\n\t\t\t\t\t//\t\t\t\t\t\t}\n\t\t\t\t\t//\t\t\t\t\t}\n\t\t\t\t\tif (!this.moved) {\n\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\n\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\n\t\t\t\t\t}\n\t\t\t\t} else if (this.options.scrollX && !this.moved) {\n\t\t\t\t\tisReturn = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisReturn = true;\n\t\t\t}\n\t\t\tif (this.moved || isPreventDefault) {\n\t\t\t\te.stopPropagation(); //阻止冒泡(scroll类嵌套)\n\t\t\t\tdetail.gesture && detail.gesture.preventDefault();\n\t\t\t}\n\t\t\tif (isReturn) { //禁止非法方向滚动\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.moved) {\n\t\t\t\t$.trigger(this.scroller, 'scrollstart', this);\n\t\t\t} else {\n\t\t\t\te.stopPropagation(); //move期间阻止冒泡(scroll嵌套)\n\t\t\t}\n\t\t\tvar deltaX = 0;\n\t\t\tvar deltaY = 0;\n\t\t\tif (!this.moved) { //start\n\t\t\t\tdeltaX = detail.deltaX;\n\t\t\t\tdeltaY = detail.deltaY;\n\t\t\t} else { //move\n\t\t\t\tdeltaX = detail.deltaX - $.gestures.session.prevTouch.deltaX;\n\t\t\t\tdeltaY = detail.deltaY - $.gestures.session.prevTouch.deltaY;\n\t\t\t}\n\t\t\tvar absDeltaX = Math.abs(detail.deltaX);\n\t\t\tvar absDeltaY = Math.abs(detail.deltaY);\n\t\t\tif (absDeltaX > absDeltaY + this.options.directionLockThreshold) {\n\t\t\t\tdeltaY = 0;\n\t\t\t} else if (absDeltaY >= absDeltaX + this.options.directionLockThreshold) {\n\t\t\t\tdeltaX = 0;\n\t\t\t}\n\n\t\t\tdeltaX = this.hasHorizontalScroll ? deltaX : 0;\n\t\t\tdeltaY = this.hasVerticalScroll ? deltaY : 0;\n\t\t\tvar newX = this.x + deltaX;\n\t\t\tvar newY = this.y + deltaY;\n\t\t\t// Slow down if outside of the boundaries\n\t\t\tif (newX > 0 || newX < this.maxScrollX) {\n\t\t\t\tnewX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\n\t\t\t}\n\t\t\tif (newY > 0 || newY < this.maxScrollY) {\n\t\t\t\tnewY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\n\t\t\t}\n\n\t\t\tif (!this.requestAnimationFrame) {\n\t\t\t\tthis._updateTranslate();\n\t\t\t}\n\t\t\tthis.direction = detail.deltaX > 0 ? 'right' : 'left';\n\t\t\tthis.moved = true;\n\t\t\tthis.x = newX;\n\t\t\tthis.y = newY;\n\t\t\t$.trigger(this.scroller, 'scroll', this);\n\t\t},\n\t\t_flick: function(e) {\n\t\t\t//\t\t\tif (!this.moved || this.needReset) {\n\t\t\t//\t\t\t\treturn;\n\t\t\t//\t\t\t}\n\t\t\tif (!this.moved) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t\tvar detail = e.detail;\n\t\t\tthis._clearRequestAnimationFrame();\n\t\t\tif (e.type === 'dragend' && detail.flick) { //dragend\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar newX = Math.round(this.x);\n\t\t\tvar newY = Math.round(this.y);\n\n\t\t\tthis.isInTransition = false;\n\t\t\t// reset if we are outside of the boundaries\n\t\t\tif (this.resetPosition(this.options.bounceTime)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.scrollTo(newX, newY); // ensures that the last position is rounded\n\n\t\t\tif (e.type === 'dragend') { //dragend\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar time = 0;\n\t\t\tvar easing = '';\n\t\t\t// start momentum animation if needed\n\t\t\tif (this.options.momentum && detail.flickTime < 300) {\n\t\t\t\tmomentumX = this.hasHorizontalScroll ? this._momentum(this.x, detail.flickDistanceX, detail.flickTime, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : {\n\t\t\t\t\tdestination: newX,\n\t\t\t\t\tduration: 0\n\t\t\t\t};\n\t\t\t\tmomentumY = this.hasVerticalScroll ? this._momentum(this.y, detail.flickDistanceY, detail.flickTime, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : {\n\t\t\t\t\tdestination: newY,\n\t\t\t\t\tduration: 0\n\t\t\t\t};\n\t\t\t\tnewX = momentumX.destination;\n\t\t\t\tnewY = momentumY.destination;\n\t\t\t\ttime = Math.max(momentumX.duration, momentumY.duration);\n\t\t\t\tthis.isInTransition = true;\n\t\t\t}\n\n\t\t\tif (newX != this.x || newY != this.y) {\n\t\t\t\tif (newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY) {\n\t\t\t\t\teasing = ease.quadratic;\n\t\t\t\t}\n\t\t\t\tthis.scrollTo(newX, newY, time, easing);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t//\t\t\te.stopPropagation();\n\t\t},\n\t\t_end: function(e) {\n\t\t\tthis.needReset = false;\n\t\t\tif ((!this.moved && this.needReset) || e.type === $.EVENT_CANCEL) {\n\t\t\t\tthis.resetPosition();\n\t\t\t}\n\t\t},\n\t\t_transitionEnd: function(e) {\n\t\t\tif (e.target != this.scroller || !this.isInTransition) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._transitionTime();\n\t\t\tif (!this.resetPosition(this.options.bounceTime)) {\n\t\t\t\tthis.isInTransition = false;\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\n\t\t\t}\n\t\t},\n\t\t_scrollend: function(e) {\n\t\t\tif ((this.y === 0 && this.maxScrollY === 0) || (Math.abs(this.y) > 0 && this.y <= this.maxScrollY)) {\n\t\t\t\t$.trigger(this.scroller, 'scrollbottom', this);\n\t\t\t}\n\t\t},\n\t\t_resize: function() {\n\t\t\tvar that = this;\n\t\t\tclearTimeout(that.resizeTimeout);\n\t\t\tthat.resizeTimeout = setTimeout(function() {\n\t\t\t\tthat.refresh();\n\t\t\t}, that.options.resizePolling);\n\t\t},\n\t\t_transitionTime: function(time) {\n\t\t\ttime = time || 0;\n\t\t\tthis.scrollerStyle['webkitTransitionDuration'] = time + 'ms';\n\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = time + 'ms';\n\t\t\t}\n\t\t\tif (this.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\n\t\t\t\tthis.scrollerStyle['webkitTransitionDuration'] = '0.001s';\n\t\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = '0.001s';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.indicators) {\n\t\t\t\tfor (var i = this.indicators.length; i--;) {\n\t\t\t\t\tthis.indicators[i].transitionTime(time);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (time) { //自定义timer，保证webkitTransitionEnd始终触发\n\t\t\t\tthis.transitionTimer && this.transitionTimer.cancel();\n\t\t\t\tthis.transitionTimer = $.later(function() {\n\t\t\t\t\t$.trigger(this.scroller, 'webkitTransitionEnd');\n\t\t\t\t}, time + 100, this);\n\t\t\t}\n\t\t},\n\t\t_transitionTimingFunction: function(easing) {\n\t\t\tthis.scrollerStyle['webkitTransitionTimingFunction'] = easing;\n\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = easing;\n\t\t\t}\n\t\t\tif (this.indicators) {\n\t\t\t\tfor (var i = this.indicators.length; i--;) {\n\t\t\t\t\tthis.indicators[i].transitionTimingFunction(easing);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_translate: function(x, y) {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t},\n\t\t_clearRequestAnimationFrame: function() {\n\t\t\tif (this.requestAnimationFrame) {\n\t\t\t\tcancelAnimationFrame(this.requestAnimationFrame);\n\t\t\t\tthis.requestAnimationFrame = null;\n\t\t\t}\n\t\t},\n\t\t_updateTranslate: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.x !== self.lastX || self.y !== self.lastY) {\n\t\t\t\tself.setTranslate(self.x, self.y);\n\t\t\t}\n\t\t\tself.requestAnimationFrame = requestAnimationFrame(function() {\n\t\t\t\tself._updateTranslate();\n\t\t\t});\n\t\t},\n\t\t_createScrollBar: function(clazz) {\n\t\t\tvar scrollbar = document.createElement('div');\n\t\t\tvar indicator = document.createElement('div');\n\t\t\tscrollbar.className = CLASS_SCROLLBAR + ' ' + clazz;\n\t\t\tindicator.className = CLASS_INDICATOR;\n\t\t\tscrollbar.appendChild(indicator);\n\t\t\tif (clazz === CLASS_SCROLLBAR_VERTICAL) {\n\t\t\t\tthis.scrollbarY = scrollbar;\n\t\t\t\tthis.scrollbarIndicatorY = indicator;\n\t\t\t} else if (clazz === CLASS_SCROLLBAR_HORIZONTAL) {\n\t\t\t\tthis.scrollbarX = scrollbar;\n\t\t\t\tthis.scrollbarIndicatorX = indicator;\n\t\t\t}\n\t\t\tthis.wrapper.appendChild(scrollbar);\n\t\t\treturn scrollbar;\n\t\t},\n\t\t_preventDefaultException: function(el, exceptions) {\n\t\t\tfor (var i in exceptions) {\n\t\t\t\tif (exceptions[i].test(el[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_reLayout: function() {\n\t\t\tif (!this.hasHorizontalScroll) {\n\t\t\t\tthis.maxScrollX = 0;\n\t\t\t\tthis.scrollerWidth = this.wrapperWidth;\n\t\t\t}\n\n\t\t\tif (!this.hasVerticalScroll) {\n\t\t\t\tthis.maxScrollY = 0;\n\t\t\t\tthis.scrollerHeight = this.wrapperHeight;\n\t\t\t}\n\n\t\t\tthis.indicators.map(function(indicator) {\n\t\t\t\tindicator.refresh();\n\t\t\t});\n\n\t\t\t//以防slider类嵌套使用\n\t\t\tif (this.options.snap && typeof this.options.snap === 'string') {\n\t\t\t\tvar items = this.scroller.querySelectorAll(this.options.snap);\n\t\t\t\tthis.itemLength = 0;\n\t\t\t\tthis.snaps = [];\n\t\t\t\tfor (var i = 0, len = items.length; i < len; i++) {\n\t\t\t\t\tvar item = items[i];\n\t\t\t\t\tif (item.parentNode === this.scroller) {\n\t\t\t\t\t\tthis.itemLength++;\n\t\t\t\t\t\tthis.snaps.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._initSnap(); //需要每次都_initSnap么。其实init的时候执行一次，后续resize的时候执行一次就行了吧.先这么做吧，如果影响性能，再调整\n\t\t\t}\n\t\t},\n\t\t_momentum: function(current, distance, time, lowerMargin, wrapperSize, deceleration) {\n\t\t\tvar speed = parseFloat(Math.abs(distance) / time),\n\t\t\t\tdestination,\n\t\t\t\tduration;\n\n\t\t\tdeceleration = deceleration === undefined ? 0.0006 : deceleration;\n\t\t\tdestination = current + (speed * speed) / (2 * deceleration) * (distance < 0 ? -1 : 1);\n\t\t\tduration = speed / deceleration;\n\t\t\tif (destination < lowerMargin) {\n\t\t\t\tdestination = wrapperSize ? lowerMargin - (wrapperSize / 2.5 * (speed / 8)) : lowerMargin;\n\t\t\t\tdistance = Math.abs(destination - current);\n\t\t\t\tduration = distance / speed;\n\t\t\t} else if (destination > 0) {\n\t\t\t\tdestination = wrapperSize ? wrapperSize / 2.5 * (speed / 8) : 0;\n\t\t\t\tdistance = Math.abs(current) + destination;\n\t\t\t\tduration = distance / speed;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdestination: Math.round(destination),\n\t\t\t\tduration: duration\n\t\t\t};\n\t\t},\n\t\t_getTranslateStr: function(x, y) {\n\t\t\tif (this.options.hardwareAccelerated) {\n\t\t\t\treturn 'translate3d(' + x + 'px,' + y + 'px,0px) ' + this.translateZ;\n\t\t\t}\n\t\t\treturn 'translate(' + x + 'px,' + y + 'px) ';\n\t\t},\n\t\t//API\n\t\tsetStopped: function(stopped) {\n\t\t\t// this.stopped = !!stopped;\n\n\t\t\t// fixed ios双webview模式下拉刷新\n\t\t\tif(stopped) {\n\t\t\t\tthis.disablePullupToRefresh();\n\t\t\t\tthis.disablePulldownToRefresh();\n\t\t\t} else {\n\t\t\t\tthis.enablePullupToRefresh();\n\t\t\t\tthis.enablePulldownToRefresh();\n\t\t\t}\n\t\t},\n\t\tsetTranslate: function(x, y) {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.scrollerStyle['webkitTransform'] = this._getTranslateStr(x, y);\n\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n\t\t\t\tvar parallaxY = y * this.options.parallaxRatio;\n\t\t\t\tvar scale = 1 + parallaxY / ((this.parallaxHeight - parallaxY) / 2);\n\t\t\t\tif (scale > 1) {\n\t\t\t\t\tthis.parallaxImgStyle['opacity'] = 1 - parallaxY / 100 * this.options.parallaxRatio;\n\t\t\t\t\tthis.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -parallaxY) + ' scale(' + scale + ',' + scale + ')';\n\t\t\t\t} else {\n\t\t\t\t\tthis.parallaxImgStyle['opacity'] = 1;\n\t\t\t\t\tthis.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -1) + ' scale(1,1)';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.indicators) {\n\t\t\t\tfor (var i = this.indicators.length; i--;) {\n\t\t\t\t\tthis.indicators[i].updatePosition();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.lastX = this.x;\n\t\t\tthis.lastY = this.y;\n\t\t\t$.trigger(this.scroller, 'scroll', this);\n\t\t},\n\t\treLayout: function() {\n\t\t\tthis.wrapper.offsetHeight;\n\n\t\t\tvar paddingLeft = parseFloat($.getStyles(this.wrapper, 'padding-left')) || 0;\n\t\t\tvar paddingRight = parseFloat($.getStyles(this.wrapper, 'padding-right')) || 0;\n\t\t\tvar paddingTop = parseFloat($.getStyles(this.wrapper, 'padding-top')) || 0;\n\t\t\tvar paddingBottom = parseFloat($.getStyles(this.wrapper, 'padding-bottom')) || 0;\n\n\t\t\tvar clientWidth = this.wrapper.clientWidth;\n\t\t\tvar clientHeight = this.wrapper.clientHeight;\n\n\t\t\tthis.scrollerWidth = this.scroller.offsetWidth;\n\t\t\tthis.scrollerHeight = this.scroller.offsetHeight;\n\n\t\t\tthis.wrapperWidth = clientWidth - paddingLeft - paddingRight;\n\t\t\tthis.wrapperHeight = clientHeight - paddingTop - paddingBottom;\n\n\t\t\tthis.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\n\t\t\tthis.maxScrollY = Math.min(this.wrapperHeight - this.scrollerHeight, 0);\n\t\t\tthis.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < 0;\n\t\t\tthis.hasVerticalScroll = this.options.scrollY && this.maxScrollY < 0;\n\t\t\tthis._reLayout();\n\t\t},\n\t\tresetPosition: function(time) {\n\t\t\tvar x = this.x,\n\t\t\t\ty = this.y;\n\n\t\t\ttime = time || 0;\n\t\t\tif (!this.hasHorizontalScroll || this.x > 0) {\n\t\t\t\tx = 0;\n\t\t\t} else if (this.x < this.maxScrollX) {\n\t\t\t\tx = this.maxScrollX;\n\t\t\t}\n\n\t\t\tif (!this.hasVerticalScroll || this.y > 0) {\n\t\t\t\ty = 0;\n\t\t\t} else if (this.y < this.maxScrollY) {\n\t\t\t\ty = this.maxScrollY;\n\t\t\t}\n\n\t\t\tif (x == this.x && y == this.y) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.scrollTo(x, y, time, this.options.scrollEasing);\n\n\t\t\treturn true;\n\t\t},\n\t\t_reInit: function() {\n\t\t\tvar groups = this.wrapper.querySelectorAll('.' + CLASS_SCROLL);\n\t\t\tfor (var i = 0, len = groups.length; i < len; i++) {\n\t\t\t\tif (groups[i].parentNode === this.wrapper) {\n\t\t\t\t\tthis.scroller = groups[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\n\t\t},\n\t\trefresh: function() {\n\t\t\tthis._reInit();\n\t\t\tthis.reLayout();\n\t\t\t$.trigger(this.scroller, 'refresh', this);\n\t\t\tthis.resetPosition();\n\t\t},\n\t\tscrollTo: function(x, y, time, easing) {\n\t\t\tvar easing = easing || ease.circular;\n\t\t\t//\t\t\tthis.isInTransition = time > 0 && (this.lastX != x || this.lastY != y);\n\t\t\t//暂不严格判断x,y，否则会导致部分版本上不正常触发轮播\n\t\t\tthis.isInTransition = time > 0;\n\t\t\tif (this.isInTransition) {\n\t\t\t\tthis._clearRequestAnimationFrame();\n\t\t\t\tthis._transitionTimingFunction(easing.style);\n\t\t\t\tthis._transitionTime(time);\n\t\t\t\tthis.setTranslate(x, y);\n\t\t\t} else {\n\t\t\t\tthis.setTranslate(x, y);\n\t\t\t}\n\n\t\t},\n\t\tscrollToBottom: function(time, easing) {\n\t\t\ttime = time || this.options.scrollTime;\n\t\t\tthis.scrollTo(0, this.maxScrollY, time, easing);\n\t\t},\n\t\tgotoPage: function(index) {\n\t\t\tthis._gotoPage(index);\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis._initEvent(true); //detach\n\t\t\tdelete $.data[this.wrapper.getAttribute('data-scroll')];\n\t\t\tthis.wrapper.setAttribute('data-scroll', '');\n\t\t}\n\t});\n\t//Indicator\n\tvar Indicator = function(scroller, options) {\n\t\tthis.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\n\t\tthis.wrapperStyle = this.wrapper.style;\n\t\tthis.indicator = this.wrapper.children[0];\n\t\tthis.indicatorStyle = this.indicator.style;\n\t\tthis.scroller = scroller;\n\n\t\tthis.options = $.extend({\n\t\t\tlistenX: true,\n\t\t\tlistenY: true,\n\t\t\tfade: false,\n\t\t\tspeedRatioX: 0,\n\t\t\tspeedRatioY: 0\n\t\t}, options);\n\n\t\tthis.sizeRatioX = 1;\n\t\tthis.sizeRatioY = 1;\n\t\tthis.maxPosX = 0;\n\t\tthis.maxPosY = 0;\n\n\t\tif (this.options.fade) {\n\t\t\tthis.wrapperStyle['webkitTransform'] = this.scroller.translateZ;\n\t\t\tthis.wrapperStyle['webkitTransitionDuration'] = this.options.fixedBadAndorid && $.os.isBadAndroid ? '0.001s' : '0ms';\n\t\t\tthis.wrapperStyle.opacity = '0';\n\t\t}\n\t}\n\tIndicator.prototype = {\n\t\thandleEvent: function(e) {\n\n\t\t},\n\t\ttransitionTime: function(time) {\n\t\t\ttime = time || 0;\n\t\t\tthis.indicatorStyle['webkitTransitionDuration'] = time + 'ms';\n\t\t\tif (this.scroller.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\n\t\t\t\tthis.indicatorStyle['webkitTransitionDuration'] = '0.001s';\n\t\t\t}\n\t\t},\n\t\ttransitionTimingFunction: function(easing) {\n\t\t\tthis.indicatorStyle['webkitTransitionTimingFunction'] = easing;\n\t\t},\n\t\trefresh: function() {\n\t\t\tthis.transitionTime();\n\n\t\t\tif (this.options.listenX && !this.options.listenY) {\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\n\t\t\t} else if (this.options.listenY && !this.options.listenX) {\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\n\t\t\t} else {\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\n\t\t\t}\n\n\t\t\tthis.wrapper.offsetHeight; // force refresh\n\n\t\t\tif (this.options.listenX) {\n\t\t\t\tthis.wrapperWidth = this.wrapper.clientWidth;\n\t\t\t\tthis.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\n\t\t\t\tthis.indicatorStyle.width = this.indicatorWidth + 'px';\n\n\t\t\t\tthis.maxPosX = this.wrapperWidth - this.indicatorWidth;\n\n\t\t\t\tthis.minBoundaryX = 0;\n\t\t\t\tthis.maxBoundaryX = this.maxPosX;\n\n\t\t\t\tthis.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));\n\t\t\t}\n\n\t\t\tif (this.options.listenY) {\n\t\t\t\tthis.wrapperHeight = this.wrapper.clientHeight;\n\t\t\t\tthis.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\n\t\t\t\tthis.indicatorStyle.height = this.indicatorHeight + 'px';\n\n\t\t\t\tthis.maxPosY = this.wrapperHeight - this.indicatorHeight;\n\n\t\t\t\tthis.minBoundaryY = 0;\n\t\t\t\tthis.maxBoundaryY = this.maxPosY;\n\n\t\t\t\tthis.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));\n\t\t\t}\n\n\t\t\tthis.updatePosition();\n\t\t},\n\n\t\tupdatePosition: function() {\n\t\t\tvar x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\n\t\t\t\ty = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\n\n\t\t\tif (x < this.minBoundaryX) {\n\t\t\t\tthis.width = Math.max(this.indicatorWidth + x, 8);\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t\tx = this.minBoundaryX;\n\t\t\t} else if (x > this.maxBoundaryX) {\n\t\t\t\tthis.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t\tx = this.maxPosX + this.indicatorWidth - this.width;\n\t\t\t} else if (this.width != this.indicatorWidth) {\n\t\t\t\tthis.width = this.indicatorWidth;\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\n\t\t\t}\n\n\t\t\tif (y < this.minBoundaryY) {\n\t\t\t\tthis.height = Math.max(this.indicatorHeight + y * 3, 8);\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t\ty = this.minBoundaryY;\n\t\t\t} else if (y > this.maxBoundaryY) {\n\t\t\t\tthis.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t\ty = this.maxPosY + this.indicatorHeight - this.height;\n\t\t\t} else if (this.height != this.indicatorHeight) {\n\t\t\t\tthis.height = this.indicatorHeight;\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\n\t\t\t}\n\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\n\t\t\tthis.indicatorStyle['webkitTransform'] = this.scroller._getTranslateStr(x, y);\n\n\t\t},\n\t\tfade: function(val, hold) {\n\t\t\tif (hold && !this.visible) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(this.fadeTimeout);\n\t\t\tthis.fadeTimeout = null;\n\n\t\t\tvar time = val ? 250 : 500,\n\t\t\t\tdelay = val ? 0 : 300;\n\n\t\t\tval = val ? '1' : '0';\n\n\t\t\tthis.wrapperStyle['webkitTransitionDuration'] = time + 'ms';\n\n\t\t\tthis.fadeTimeout = setTimeout((function(val) {\n\t\t\t\tthis.wrapperStyle.opacity = val;\n\t\t\t\tthis.visible = +val;\n\t\t\t}).bind(this, val), delay);\n\t\t}\n\t};\n\n\t$.Scroll = Scroll;\n\n\t$.fn.scroll = function(options) {\n\t\tvar scrollApis = [];\n\t\tthis.each(function() {\n\t\t\tvar scrollApi = null;\n\t\t\tvar self = this;\n\t\t\tvar id = self.getAttribute('data-scroll');\n\t\t\tif (!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\tvar _options = $.extend({}, options);\n\t\t\t\tif (self.classList.contains('mui-segmented-control')) {\n\t\t\t\t\t_options = $.extend(_options, {\n\t\t\t\t\t\tscrollY: false,\n\t\t\t\t\t\tscrollX: true,\n\t\t\t\t\t\tindicators: false,\n\t\t\t\t\t\tsnap: '.mui-control-item'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t$.data[id] = scrollApi = new Scroll(self, _options);\n\t\t\t\tself.setAttribute('data-scroll', id);\n\t\t\t} else {\n\t\t\t\tscrollApi = $.data[id];\n\t\t\t}\n\t\t\tscrollApis.push(scrollApi);\n\t\t});\n\t\treturn scrollApis.length === 1 ? scrollApis[0] : scrollApis;\n\t};\n})(mui, window, document);\n(function($, window, document, undefined) {\n\n    var CLASS_VISIBILITY = 'mui-visibility';\n    var CLASS_HIDDEN = 'mui-hidden';\n\n    var PullRefresh = $.Scroll.extend($.extend({\n        handleEvent: function(e) {\n            this._super(e);\n            if (e.type === 'scrollbottom') {\n                if (e.target === this.scroller) {\n                    this._scrollbottom();\n                }\n            }\n        },\n        _scrollbottom: function() {\n            if (!this.pulldown && !this.loading) {\n                this.pulldown = false;\n                this._initPullupRefresh();\n                this.pullupLoading();\n            }\n        },\n        _start: function(e) {\n            //仅下拉刷新在start阻止默认事件\n            if (e.touches && e.touches.length && e.touches[0].clientX > 30) {\n                e.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\n            }\n            if (!this.loading) {\n                this.pulldown = this.pullPocket = this.pullCaption = this.pullLoading = false\n            }\n            this._super(e);\n        },\n        _drag: function(e) {\n            if (this.y >= 0 && this.disablePulldown && e.detail.direction === 'down') { //禁用下拉刷新\n                return;\n            }\n            this._super(e);\n            if (!this.pulldown && !this.loading && this.topPocket && e.detail.direction === 'down' && this.y >= 0) {\n                this._initPulldownRefresh();\n            }\n            if (this.pulldown) {\n                this._setCaption(this.y > this.options.down.height ? this.options.down.contentover : this.options.down.contentdown);\n            }\n        },\n\n        _reLayout: function() {\n            this.hasVerticalScroll = true;\n            this._super();\n        },\n        //API\n        resetPosition: function(time) {\n            if (this.pulldown && !this.disablePulldown) {\n                if (this.y >= this.options.down.height) {\n                    this.pulldownLoading(undefined, time || 0);\n                    return true;\n                } else {\n                    !this.loading && this.topPocket.classList.remove(CLASS_VISIBILITY);\n                }\n            }\n            return this._super(time);\n        },\n        pulldownLoading: function(y, time) {\n            typeof y === 'undefined' && (y = this.options.down.height); //默认高度\n            this.scrollTo(0, y, time, this.options.bounceEasing);\n            if (this.loading) {\n                return;\n            }\n            //\t\t\tif (!this.pulldown) {\n            this._initPulldownRefresh();\n            //\t\t\t}\n            this._setCaption(this.options.down.contentrefresh);\n            this.loading = true;\n            this.indicators.map(function(indicator) {\n                indicator.fade(0);\n            });\n            var callback = this.options.down.callback;\n            callback && callback.call(this);\n        },\n        endPulldownToRefresh: function() {\n            var self = this;\n            if (self.topPocket && self.loading && this.pulldown) {\n                self.scrollTo(0, 0, self.options.bounceTime, self.options.bounceEasing);\n                self.loading = false;\n                self._setCaption(self.options.down.contentdown, true);\n                setTimeout(function() {\n                    self.loading || self.topPocket.classList.remove(CLASS_VISIBILITY);\n                }, 350);\n            }\n        },\n        pullupLoading: function(callback, x, time) {\n            x = x || 0;\n            this.scrollTo(x, this.maxScrollY, time, this.options.bounceEasing);\n            if (this.loading) {\n                return;\n            }\n            this._initPullupRefresh();\n            this._setCaption(this.options.up.contentrefresh);\n            this.indicators.map(function(indicator) {\n                indicator.fade(0);\n            });\n            this.loading = true;\n            callback = callback || this.options.up.callback;\n            callback && callback.call(this);\n        },\n        endPullupToRefresh: function(finished) {\n            var self = this;\n            if (self.bottomPocket) { // && self.loading && !this.pulldown\n                self.loading = false;\n                if (finished) {\n                    this.finished = true;\n                    self._setCaption(self.options.up.contentnomore);\n                    //\t\t\t\t\tself.bottomPocket.classList.remove(CLASS_VISIBILITY);\n                    //\t\t\t\t\tself.bottomPocket.classList.add(CLASS_HIDDEN);\n                    self.wrapper.removeEventListener('scrollbottom', self);\n                } else {\n                    self._setCaption(self.options.up.contentdown);\n                    //\t\t\t\t\tsetTimeout(function() {\n                    self.loading || self.bottomPocket.classList.remove(CLASS_VISIBILITY);\n                    //\t\t\t\t\t}, 300);\n                }\n            }\n        },\n        disablePullupToRefresh: function() {\n            this._initPullupRefresh();\n            this.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\n            this.wrapper.removeEventListener('scrollbottom', this);\n        },\n        disablePulldownToRefresh: function() {\n            this._initPulldownRefresh();\n            this.topPocket.className = 'mui-pull-top-pocket' + ' ' + CLASS_HIDDEN;\n            this.disablePulldown = true;\n        },\n        enablePulldownToRefresh: function() {\n            this._initPulldownRefresh();\n            this.topPocket.classList.remove(CLASS_HIDDEN);\n            this._setCaption(this.options.down.contentdown);\n            this.disablePulldown = false;\n        },\n        enablePullupToRefresh: function() {\n            this._initPullupRefresh();\n            this.bottomPocket.classList.remove(CLASS_HIDDEN);\n            this._setCaption(this.options.up.contentdown);\n            this.wrapper.addEventListener('scrollbottom', this);\n        },\n        refresh: function(isReset) {\n            if (isReset && this.finished) {\n                this.enablePullupToRefresh();\n                this.finished = false;\n            }\n            this._super();\n        },\n    }, $.PullRefresh));\n    $.fn.pullRefresh = function(options) {\n        if (this.length === 1) {\n            var self = this[0];\n            var pullRefreshApi = null;\n            var id = self.getAttribute('data-pullrefresh');\n            if (!id && typeof options === 'undefined') {\n                return false;\n            }\n            options = options || {};\n            if (!id) {\n                id = ++$.uuid;\n                $.data[id] = pullRefreshApi = new PullRefresh(self, options);\n                self.setAttribute('data-pullrefresh', id);\n            } else {\n                pullRefreshApi = $.data[id];\n            }\n            if (options.down && options.down.auto) { //如果设置了auto，则自动下拉一次\n                pullRefreshApi.pulldownLoading(options.down.autoY);\n            } else if (options.up && options.up.auto) { //如果设置了auto，则自动上拉一次\n                pullRefreshApi.pullupLoading();\n            }\n            //暂不提供这种调用方式吧\t\t\t\n            //\t\t\tif (typeof options === 'string') {\n            //\t\t\t\tvar methodValue = pullRefreshApi[options].apply(pullRefreshApi, $.slice.call(arguments, 1));\n            //\t\t\t\tif (methodValue !== undefined) {\n            //\t\t\t\t\treturn methodValue;\n            //\t\t\t\t}\n            //\t\t\t}\n            return pullRefreshApi;\n        }\n    };\n})(mui, window, document);\n/**\n * snap 重构\n * @param {Object} $\n * @param {Object} window\n */\n(function($, window) {\n\tvar CLASS_SLIDER = 'mui-slider';\n\tvar CLASS_SLIDER_GROUP = 'mui-slider-group';\n\tvar CLASS_SLIDER_LOOP = 'mui-slider-loop';\n\tvar CLASS_SLIDER_INDICATOR = 'mui-slider-indicator';\n\tvar CLASS_ACTION_PREVIOUS = 'mui-action-previous';\n\tvar CLASS_ACTION_NEXT = 'mui-action-next';\n\tvar CLASS_SLIDER_ITEM = 'mui-slider-item';\n\n\tvar CLASS_ACTIVE = 'mui-active';\n\n\tvar SELECTOR_SLIDER_ITEM = '.' + CLASS_SLIDER_ITEM;\n\tvar SELECTOR_SLIDER_INDICATOR = '.' + CLASS_SLIDER_INDICATOR;\n\tvar SELECTOR_SLIDER_PROGRESS_BAR = '.mui-slider-progress-bar';\n\n\tvar Slider = $.Slider = $.Scroll.extend({\n\t\tinit: function(element, options) {\n\t\t\tthis._super(element, $.extend(true, {\n\t\t\t\tfingers: 1,\n\t\t\t\tinterval: 0, //设置为0，则不定时轮播\n\t\t\t\tscrollY: false,\n\t\t\t\tscrollX: true,\n\t\t\t\tindicators: false,\n\t\t\t\tscrollTime: 1000,\n\t\t\t\tstartX: false,\n\t\t\t\tslideTime: 0, //滑动动画时间\n\t\t\t\tsnap: SELECTOR_SLIDER_ITEM\n\t\t\t}, options));\n\t\t\tif (this.options.startX) {\n\t\t\t\t//\t\t\t\t$.trigger(this.wrapper, 'scrollend', this);\n\t\t\t}\n\t\t},\n\t\t_init: function() {\n\t\t\tthis._reInit();\n\t\t\tif (this.scroller) {\n\t\t\t\tthis.scrollerStyle = this.scroller.style;\n\t\t\t\tthis.progressBar = this.wrapper.querySelector(SELECTOR_SLIDER_PROGRESS_BAR);\n\t\t\t\tif (this.progressBar) {\n\t\t\t\t\tthis.progressBarWidth = this.progressBar.offsetWidth;\n\t\t\t\t\tthis.progressBarStyle = this.progressBar.style;\n\t\t\t\t}\n\t\t\t\t//忘记这个代码是干什么的了？\n\t\t\t\t//\t\t\t\tthis.x = this._getScroll();\n\t\t\t\t//\t\t\t\tif (this.options.startX === false) {\n\t\t\t\t//\t\t\t\t\tthis.options.startX = this.x;\n\t\t\t\t//\t\t\t\t}\n\t\t\t\t//根据active修正startX\n\n\t\t\t\tthis._super();\n\t\t\t\tthis._initTimer();\n\t\t\t}\n\t\t},\n\t\t_triggerSlide: function() {\n\t\t\tvar self = this;\n\t\t\tself.isInTransition = false;\n\t\t\tvar page = self.currentPage;\n\t\t\tself.slideNumber = self._fixedSlideNumber();\n\t\t\tif (self.loop) {\n\t\t\t\tif (self.slideNumber === 0) {\n\t\t\t\t\tself.setTranslate(self.pages[1][0].x, 0);\n\t\t\t\t} else if (self.slideNumber === self.itemLength - 3) {\n\t\t\t\t\tself.setTranslate(self.pages[self.itemLength - 2][0].x, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (self.lastSlideNumber != self.slideNumber) {\n\t\t\t\tself.lastSlideNumber = self.slideNumber;\n\t\t\t\tself.lastPage = self.currentPage;\n\t\t\t\t$.trigger(self.wrapper, 'slide', {\n\t\t\t\t\tslideNumber: self.slideNumber\n\t\t\t\t});\n\t\t\t}\n\t\t\tself._initTimer();\n\t\t},\n\t\t_handleSlide: function(e) {\n\t\t\tvar self = this;\n\t\t\tif (e.target !== self.wrapper) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar detail = e.detail;\n\t\t\tdetail.slideNumber = detail.slideNumber || 0;\n\t\t\tvar temps = self.scroller.querySelectorAll(SELECTOR_SLIDER_ITEM);\n\t\t\tvar items = [];\n\t\t\tfor (var i = 0, len = temps.length; i < len; i++) {\n\t\t\t\tvar item = temps[i];\n\t\t\t\tif (item.parentNode === self.scroller) {\n\t\t\t\t\titems.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar _slideNumber = detail.slideNumber;\n\t\t\tif (self.loop) {\n\t\t\t\t_slideNumber += 1;\n\t\t\t}\n\t\t\tif (!self.wrapper.classList.contains('mui-segmented-control')) {\n\t\t\t\tfor (var i = 0, len = items.length; i < len; i++) {\n\t\t\t\t\tvar item = items[i];\n\t\t\t\t\tif (item.parentNode === self.scroller) {\n\t\t\t\t\t\tif (i === _slideNumber) {\n\t\t\t\t\t\t\titem.classList.add(CLASS_ACTIVE);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.classList.remove(CLASS_ACTIVE);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar indicatorWrap = self.wrapper.querySelector('.mui-slider-indicator');\n\t\t\tif (indicatorWrap) {\n\t\t\t\tif (indicatorWrap.getAttribute('data-scroll')) { //scroll\n\t\t\t\t\t$(indicatorWrap).scroll().gotoPage(detail.slideNumber);\n\t\t\t\t}\n\t\t\t\tvar indicators = indicatorWrap.querySelectorAll('.mui-indicator');\n\t\t\t\tif (indicators.length > 0) { //图片轮播\n\t\t\t\t\tfor (var i = 0, len = indicators.length; i < len; i++) {\n\t\t\t\t\t\tindicators[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar number = indicatorWrap.querySelector('.mui-number span');\n\t\t\t\t\tif (number) { //图文表格\n\t\t\t\t\t\tnumber.innerText = (detail.slideNumber + 1);\n\t\t\t\t\t} else { //segmented controls\n\t\t\t\t\t\tvar controlItems = indicatorWrap.querySelectorAll('.mui-control-item');\n\t\t\t\t\t\tfor (var i = 0, len = controlItems.length; i < len; i++) {\n\t\t\t\t\t\t\tcontrolItems[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t},\n\t\t_handleTabShow: function(e) {\n\t\t\tvar self = this;\n\t\t\tself.gotoItem((e.detail.tabNumber || 0), self.options.slideTime);\n\t\t},\n\t\t_handleIndicatorTap: function(event) {\n\t\t\tvar self = this;\n\t\t\tvar target = event.target;\n\t\t\tif (target.classList.contains(CLASS_ACTION_PREVIOUS) || target.classList.contains(CLASS_ACTION_NEXT)) {\n\t\t\t\tself[target.classList.contains(CLASS_ACTION_PREVIOUS) ? 'prevItem' : 'nextItem']();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\t_initEvent: function(detach) {\n\t\t\tvar self = this;\n\t\t\tself._super(detach);\n\t\t\tvar action = detach ? 'removeEventListener' : 'addEventListener';\n\t\t\tself.wrapper[action]('slide', this);\n\t\t\tself.wrapper[action]($.eventName('shown', 'tab'), this);\n\t\t},\n\t\thandleEvent: function(e) {\n\t\t\tthis._super(e);\n\t\t\tswitch (e.type) {\n\t\t\t\tcase 'slide':\n\t\t\t\t\tthis._handleSlide(e);\n\t\t\t\t\tbreak;\n\t\t\t\tcase $.eventName('shown', 'tab'):\n\t\t\t\t\tif (~this.snaps.indexOf(e.target)) { //避免嵌套监听错误的tab show\n\t\t\t\t\t\tthis._handleTabShow(e);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t_scrollend: function(e) {\n\t\t\tthis._super(e);\n\t\t\tthis._triggerSlide(e);\n\t\t},\n\t\t_drag: function(e) {\n\t\t\tthis._super(e);\n\t\t\tvar direction = e.detail.direction;\n\t\t\tif (direction === 'left' || direction === 'right') {\n\t\t\t\t//拖拽期间取消定时\n\t\t\t\tvar slidershowTimer = this.wrapper.getAttribute('data-slidershowTimer');\n\t\t\t\tslidershowTimer && window.clearTimeout(slidershowTimer);\n\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t},\n\t\t_initTimer: function() {\n\t\t\tvar self = this;\n\t\t\tvar slider = self.wrapper;\n\t\t\tvar interval = self.options.interval;\n\t\t\tvar slidershowTimer = slider.getAttribute('data-slidershowTimer');\n\t\t\tslidershowTimer && window.clearTimeout(slidershowTimer);\n\t\t\tif (interval) {\n\t\t\t\tslidershowTimer = window.setTimeout(function() {\n\t\t\t\t\tif (!slider) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t//仅slider显示状态进行自动轮播\n\t\t\t\t\tif (!!(slider.offsetWidth || slider.offsetHeight)) {\n\t\t\t\t\t\tself.nextItem(true);\n\t\t\t\t\t\t//下一个\n\t\t\t\t\t}\n\t\t\t\t\tself._initTimer();\n\t\t\t\t}, interval);\n\t\t\t\tslider.setAttribute('data-slidershowTimer', slidershowTimer);\n\t\t\t}\n\t\t},\n\n\t\t_fixedSlideNumber: function(page) {\n\t\t\tpage = page || this.currentPage;\n\t\t\tvar slideNumber = page.pageX;\n\t\t\tif (this.loop) {\n\t\t\t\tif (page.pageX === 0) {\n\t\t\t\t\tslideNumber = this.itemLength - 3;\n\t\t\t\t} else if (page.pageX === (this.itemLength - 1)) {\n\t\t\t\t\tslideNumber = 0;\n\t\t\t\t} else {\n\t\t\t\t\tslideNumber = page.pageX - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn slideNumber;\n\t\t},\n\t\t_reLayout: function() {\n\t\t\tthis.hasHorizontalScroll = true;\n\t\t\tthis.loop = this.scroller.classList.contains(CLASS_SLIDER_LOOP);\n\t\t\tthis._super();\n\t\t},\n\t\t_getScroll: function() {\n\t\t\tvar result = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\n\t\t\treturn result ? result.x : 0;\n\t\t},\n\t\t_transitionEnd: function(e) {\n\t\t\tif (e.target !== this.scroller || !this.isInTransition) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._transitionTime();\n\t\t\tthis.isInTransition = false;\n\t\t\t$.trigger(this.wrapper, 'scrollend', this);\n\t\t},\n\t\t_flick: function(e) {\n\t\t\tif (!this.moved) { //无moved\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar detail = e.detail;\n\t\t\tvar direction = detail.direction;\n\t\t\tthis._clearRequestAnimationFrame();\n\t\t\tthis.isInTransition = true;\n\t\t\t//\t\t\tif (direction === 'up' || direction === 'down') {\n\t\t\t//\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t//\t\t\t\treturn;\n\t\t\t//\t\t\t}\n\t\t\tif (e.type === 'flick') {\n\t\t\t\tif (detail.deltaTime < 200) { //flick，太容易触发，额外校验一下deltaTime\n\t\t\t\t\tthis.x = this._getPage((this.slideNumber + (direction === 'right' ? -1 : 1)), true).x;\n\t\t\t\t}\n\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t} else if (e.type === 'dragend' && !detail.flick) {\n\t\t\t\tthis.resetPosition(this.options.bounceTime);\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t},\n\t\t_initSnap: function() {\n\t\t\tthis.scrollerWidth = this.itemLength * this.scrollerWidth;\n\t\t\tthis.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\n\t\t\tthis._super();\n\t\t\tif (!this.currentPage.x) {\n\t\t\t\t//当slider处于隐藏状态时，导致snap计算是错误的，临时先这么判断一下，后续要考虑解决所有scroll在隐藏状态下初始化属性不正确的问题\n\t\t\t\tvar currentPage = this.pages[this.loop ? 1 : 0];\n\t\t\t\tcurrentPage = currentPage || this.pages[0];\n\t\t\t\tif (!currentPage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.currentPage = currentPage[0];\n\t\t\t\tthis.slideNumber = 0;\n\t\t\t\tthis.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? 0 : this.lastSlideNumber;\n\t\t\t} else {\n\t\t\t\tthis.slideNumber = this._fixedSlideNumber();\n\t\t\t\tthis.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? this.slideNumber : this.lastSlideNumber;\n\t\t\t}\n\t\t\tthis.options.startX = this.currentPage.x || 0;\n\t\t},\n\t\t_getSnapX: function(offsetLeft) {\n\t\t\treturn Math.max(-offsetLeft, this.maxScrollX);\n\t\t},\n\t\t_getPage: function(slideNumber, isFlick) {\n\t\t\tif (this.loop) {\n\t\t\t\tif (slideNumber > (this.itemLength - (isFlick ? 2 : 3))) {\n\t\t\t\t\tslideNumber = 1;\n\t\t\t\t\ttime = 0;\n\t\t\t\t} else if (slideNumber < (isFlick ? -1 : 0)) {\n\t\t\t\t\tslideNumber = this.itemLength - 2;\n\t\t\t\t\ttime = 0;\n\t\t\t\t} else {\n\t\t\t\t\tslideNumber += 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!isFlick) {\n\t\t\t\t\tif (slideNumber > (this.itemLength - 1)) {\n\t\t\t\t\t\tslideNumber = 0;\n\t\t\t\t\t\ttime = 0;\n\t\t\t\t\t} else if (slideNumber < 0) {\n\t\t\t\t\t\tslideNumber = this.itemLength - 1;\n\t\t\t\t\t\ttime = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tslideNumber = Math.min(Math.max(0, slideNumber), this.itemLength - 1);\n\t\t\t}\n\t\t\treturn this.pages[slideNumber][0];\n\t\t},\n\t\t_gotoItem: function(slideNumber, time) {\n\t\t\tthis.currentPage = this._getPage(slideNumber, true); //此处传true。可保证程序切换时，动画与人手操作一致(第一张，最后一张的切换动画)\n\t\t\tthis.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\n\t\t\tif (time === 0) {\n\t\t\t\t$.trigger(this.wrapper, 'scrollend', this);\n\t\t\t}\n\t\t},\n\t\t//API\n\t\tsetTranslate: function(x, y) {\n\t\t\tthis._super(x, y);\n\t\t\tvar progressBar = this.progressBar;\n\t\t\tif (progressBar) {\n\t\t\t\tthis.progressBarStyle.webkitTransform = this._getTranslateStr((-x * (this.progressBarWidth / this.wrapperWidth)), 0);\n\t\t\t}\n\t\t},\n\t\tresetPosition: function(time) {\n\t\t\ttime = time || 0;\n\t\t\tif (this.x > 0) {\n\t\t\t\tthis.x = 0;\n\t\t\t} else if (this.x < this.maxScrollX) {\n\t\t\t\tthis.x = this.maxScrollX;\n\t\t\t}\n\t\t\tthis.currentPage = this._nearestSnap(this.x);\n\t\t\tthis.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\n\t\t\treturn true;\n\t\t},\n\t\tgotoItem: function(slideNumber, time) {\n\t\t\tthis._gotoItem(slideNumber, typeof time === 'undefined' ? this.options.scrollTime : time);\n\t\t},\n\t\tnextItem: function() {\n\t\t\tthis._gotoItem(this.slideNumber + 1, this.options.scrollTime);\n\t\t},\n\t\tprevItem: function() {\n\t\t\tthis._gotoItem(this.slideNumber - 1, this.options.scrollTime);\n\t\t},\n\t\tgetSlideNumber: function() {\n\t\t\treturn this.slideNumber || 0;\n\t\t},\n\t\t_reInit: function() {\n\t\t\tvar groups = this.wrapper.querySelectorAll('.' + CLASS_SLIDER_GROUP);\n\t\t\tfor (var i = 0, len = groups.length; i < len; i++) {\n\t\t\t\tif (groups[i].parentNode === this.wrapper) {\n\t\t\t\t\tthis.scroller = groups[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\n\t\t\tif (this.progressBar) {\n\t\t\t\tthis.progressBarWidth = this.progressBar.offsetWidth;\n\t\t\t\tthis.progressBarStyle = this.progressBar.style;\n\t\t\t}\n\t\t},\n\t\trefresh: function(options) {\n\t\t\tif (options) {\n\t\t\t\t$.extend(this.options, options);\n\t\t\t\tthis._super();\n\t\t\t\tthis._initTimer();\n\t\t\t} else {\n\t\t\t\tthis._super();\n\t\t\t}\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis._initEvent(true); //detach\n\t\t\tdelete $.data[this.wrapper.getAttribute('data-slider')];\n\t\t\tthis.wrapper.setAttribute('data-slider', '');\n\t\t}\n\t});\n\t$.fn.slider = function(options) {\n\t\tvar slider = null;\n\t\tthis.each(function() {\n\t\t\tvar sliderElement = this;\n\t\t\tif (!this.classList.contains(CLASS_SLIDER)) {\n\t\t\t\tsliderElement = this.querySelector('.' + CLASS_SLIDER);\n\t\t\t}\n\t\t\tif (sliderElement && sliderElement.querySelector(SELECTOR_SLIDER_ITEM)) {\n\t\t\t\tvar id = sliderElement.getAttribute('data-slider');\n\t\t\t\tif (!id) {\n\t\t\t\t\tid = ++$.uuid;\n\t\t\t\t\t$.data[id] = slider = new Slider(sliderElement, options);\n\t\t\t\t\tsliderElement.setAttribute('data-slider', id);\n\t\t\t\t} else {\n\t\t\t\t\tslider = $.data[id];\n\t\t\t\t\tif (slider && options) {\n\t\t\t\t\t\tslider.refresh(options);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn slider;\n\t};\n\t$.ready(function() {\n\t\t//\t\tsetTimeout(function() {\n\t\t$('.mui-slider').slider();\n\t\t$('.mui-scroll-wrapper.mui-slider-indicator.mui-segmented-control').scroll({\n\t\t\tscrollY: false,\n\t\t\tscrollX: true,\n\t\t\tindicators: false,\n\t\t\tsnap: '.mui-control-item'\n\t\t});\n\t\t//\t\t}, 500); //临时处理slider宽度计算不正确的问题(初步确认是scrollbar导致的)\n\n\t});\n})(mui, window);\n/**\n * pullRefresh 5+\n * @param {type} $\n * @returns {undefined}\n */\n(function($, document) {\n    if (!($.os.plus)) { //仅在5+android支持多webview的使用\n        return;\n    }\n    $.plusReady(function() {\n        if (window.__NWin_Enable__ === false) { //不支持多webview，则不用5+下拉刷新\n            return;\n        }\n        var CLASS_PLUS_PULLREFRESH = 'mui-plus-pullrefresh';\n        var CLASS_VISIBILITY = 'mui-visibility';\n        var CLASS_HIDDEN = 'mui-hidden';\n        var CLASS_BLOCK = 'mui-block';\n\n        var CLASS_PULL_CAPTION = 'mui-pull-caption';\n        var CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\n        var CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\n        var CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\n\n        var PlusPullRefresh = $.Class.extend({\n            init: function(element, options) {\n                this.element = element;\n                this.options = options;\n                this.wrapper = this.scroller = element;\n                this._init();\n                this._initPulldownRefreshEvent();\n            },\n            _init: function() {\n                var self = this;\n                //document.addEventListener('plusscrollbottom', this);\n                window.addEventListener('dragup', self);\n                document.addEventListener(\"plusscrollbottom\", self);\n                self.scrollInterval = window.setInterval(function() {\n                    if (self.isScroll && !self.loading) {\n                        if (window.pageYOffset + window.innerHeight + 10 >= document.documentElement.scrollHeight) {\n                            self.isScroll = false; //放在这里是因为快速滚动的话，有可能检测时，还没到底，所以只要有滚动，没到底之前一直检测高度变化\n                            if (self.bottomPocket) {\n                                self.pullupLoading();\n                            }\n                        }\n                    }\n                }, 100);\n            },\n            _initPulldownRefreshEvent: function() {\n                var self = this;\n                $.plusReady(function() {\n                    if (self.options.down.style == \"circle\") {\n                        //单webview、原生转圈\n                        self.options.webview = plus.webview.currentWebview();\n                        self.options.webview.setPullToRefresh({\n                            support: true,\n                            color: self.options.down.color || '#2BD009',\n                            height: self.options.down.height || '50px',\n                            range: self.options.down.range || '100px',\n                            style: 'circle',\n                            offset: self.options.down.offset || '0px'\n                        }, function() {\n                            self.options.down.callback();\n                        });\n                    } else if (self.topPocket && self.options.webviewId) {\n                        var webview = plus.webview.getWebviewById(self.options.webviewId); //子窗口\n                        if (!webview) {\n                            return;\n                        }\n                        self.options.webview = webview;\n                        var downOptions = self.options.down;\n                        var height = downOptions.height;\n                        webview.addEventListener('close', function() {\n                            var attrWebviewId = self.options.webviewId && self.options.webviewId.replace(/\\//g, \"_\"); //替换所有\"/\" \n                            self.element.removeAttribute('data-pullrefresh-plus-' + attrWebviewId);\n                        });\n                        webview.addEventListener(\"dragBounce\", function(e) {\n                            if (!self.pulldown) {\n                                self._initPulldownRefresh();\n                            } else {\n                                self.pullPocket.classList.add(CLASS_BLOCK);\n                            }\n                            switch (e.status) {\n                                case \"beforeChangeOffset\": //下拉可刷新状态\n                                    self._setCaption(downOptions.contentdown);\n                                    break;\n                                case \"afterChangeOffset\": //松开可刷新状态\n                                    self._setCaption(downOptions.contentover);\n                                    break;\n                                case \"dragEndAfterChangeOffset\": //正在刷新状态\n                                    //执行下拉刷新所在webview的回调函数\n                                    webview.evalJS(\"window.mui&&mui.options.pullRefresh.down.callback()\");\n                                    self._setCaption(downOptions.contentrefresh);\n                                    break;\n                                default:\n                                    break;\n                            }\n                        }, false);\n\n                        webview.setBounce({\n                            position: {\n                                top: height * 2 + 'px'\n                            },\n                            changeoffset: {\n                                top: height + 'px'\n                            }\n                        });\n\n                    }\n                });\n            },\n            handleEvent: function(e) {\n                var self = this;\n                if (self.stopped) {\n                    return;\n                }\n                self.isScroll = false;\n                if (e.type === 'dragup' || e.type === 'plusscrollbottom') {\n                    self.isScroll = true;\n                    setTimeout(function() {\n                        self.isScroll = false;\n                    }, 1000);\n                }\n            }\n        }).extend($.extend({\n            setStopped: function(stopped) { //该方法是子页面调用的\n                this.stopped = !!stopped;\n                // TODO 此处需要设置当前webview的bounce为none,目前5+有BUG\n                if (this.stopped) {\n                    this.disablePullupToRefresh();\n                    this.disablePulldownToRefresh();\n                } else {\n                    this.enablePullupToRefresh();\n                    this.enablePulldownToRefresh();\n                }\n            },\n            beginPulldown: function() {\n                var self = this;\n                $.plusReady(function() {\n                    //这里延时的目的是为了保证下拉刷新组件初始化完成，后续应该做成有状态的\n                    setTimeout(function() {\n                        if (self.options.down.style == \"circle\") { //单webview下拉刷新\n                            plus.webview.currentWebview().beginPullToRefresh();\n                        } else { //双webview模式\n                            var webview = self.options.webview;\n                            if (webview) {\n                                webview.setBounce({\n                                    offset: {\n                                        top: self.options.down.height + \"px\"\n                                    }\n                                });\n                            }\n                        }\n                    }, 15);\n                }.bind(this));\n            },\n            pulldownLoading: function() { //该方法是子页面调用的，兼容老的历史API\n                this.beginPulldown();\n            },\n            _pulldownLoading: function() { //该方法是父页面调用的\n                var self = this;\n                $.plusReady(function() {\n                    var childWebview = plus.webview.getWebviewById(self.options.webviewId);\n                    childWebview && childWebview.setBounce({\n                        offset: {\n                            top: self.options.down.height + \"px\"\n                        }\n                    });\n                });\n            },\n            endPulldown: function() {\n                var _wv = plus.webview.currentWebview();\n                //双webview的下拉刷新，需要修改父窗口提示信息\n                if (_wv.parent() && this.options.down.style !== \"circle\") {\n                    _wv.parent().evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify({\n                        webviewId: _wv.id\n                    }) + \"')._endPulldownToRefresh()\");\n                } else {\n                    _wv.endPullToRefresh();\n                }\n            },\n            endPulldownToRefresh: function() { //该方法是子页面调用的，兼容老的历史API\n                this.endPulldown();\n            },\n            _endPulldownToRefresh: function() { //该方法是父页面调用的\n                var self = this;\n                if (self.topPocket && self.options.webview) {\n                    self.options.webview.endPullToRefresh(); //下拉刷新所在webview回弹\n                    self.loading = false;\n                    self._setCaption(self.options.down.contentdown, true);\n                    setTimeout(function() {\n                        self.loading || self.topPocket.classList.remove(CLASS_BLOCK);\n                    }, 350);\n                }\n            },\n            beginPullup: function(callback) { //开始上拉加载\n                var self = this;\n                if (self.isLoading) return;\n                self.isLoading = true;\n                if (self.pulldown !== false) {\n                    self._initPullupRefresh();\n                } else {\n                    this.pullPocket.classList.add(CLASS_BLOCK);\n                }\n                setTimeout(function() {\n                    self.pullLoading.classList.add(CLASS_VISIBILITY);\n                    self.pullLoading.classList.remove(CLASS_HIDDEN);\n                    self.pullCaption.innerHTML = ''; //修正5+里边第一次加载时，文字显示的bug(还会显示出来个“多”,猜测应该是渲染问题导致的)\n                    self.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH;\n                    self.pullCaption.innerHTML = self.options.up.contentrefresh;\n                    callback = callback || self.options.up.callback;\n                    callback && callback.call(self);\n                }, 300);\n            },\n            pullupLoading: function(callback) { //兼容老的API\n                this.beginPullup(callback);\n            },\n            endPullup: function(finished) { //上拉加载结束\n                var self = this;\n                if (self.pullLoading) {\n                    self.pullLoading.classList.remove(CLASS_VISIBILITY);\n                    self.pullLoading.classList.add(CLASS_HIDDEN);\n                    self.isLoading = false;\n                    if (finished) {\n                        self.finished = true;\n                        self.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\n                        self.pullCaption.innerHTML = self.options.up.contentnomore;\n                        //取消5+的plusscrollbottom事件\n                        document.removeEventListener('plusscrollbottom', self);\n                        window.removeEventListener('dragup', self);\n                    } else { //初始化时隐藏，后续不再隐藏\n                        self.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n                        self.pullCaption.innerHTML = self.options.up.contentdown;\n                    }\n                }\n            },\n            endPullupToRefresh: function(finished) { //上拉加载结束，兼容老的API\n                this.endPullup(finished);\n            },\n            disablePulldownToRefresh: function() {\n                var webview = plus.webview.currentWebview();\n                if (this.options.down.style && this.options.down.style == 'circle') { // 单webview模式禁止原生下拉刷新\n                    this.options.webview.setPullToRefresh({\n                        support: false,\n                        style: 'circle'\n                    });\n                } else { // 双webview模式禁止下拉刷新\n                    webview.setStyle({\n                        bounce: 'none'\n                    });\n                    webview.setBounce({\n                        position: {\n                            top: 'none'\n                        }\n                    });\n                }\n            },\n            enablePulldownToRefresh: function() {\n                var self = this,\n                    webview = plus.webview.currentWebview(),\n                    height = this.options.down.height;\n                // 单webview模式禁止原生下拉刷新\n                if (this.options.down.style && this.options.down.style == 'circle') {\n                    webview.setPullToRefresh({\n                        support: true,\n                        height: height || '50px',\n                        range: self.options.down.range || '100px',\n                        style: 'circle',\n                        offset: self.options.down.offset || '0px'\n                    });\n                } else { // 重新初始化双webview模式下拉刷新\n                    webview.setStyle({\n                        bounce: 'vertical'\n                    });\n                    webview.setBounce({\n                        position: {\n                            top: height * 2 + 'px'\n                        },\n                        changeoffset: {\n                            top: height + 'px'\n                        }\n                    });\n                }\n            },\n            disablePullupToRefresh: function() {\n                this._initPullupRefresh();\n                this.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\n                window.removeEventListener('dragup', this);\n            },\n            enablePullupToRefresh: function() {\n                this._initPullupRefresh();\n                this.bottomPocket.classList.remove(CLASS_HIDDEN);\n                this.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n                this.pullCaption.innerHTML = this.options.up.contentdown;\n                document.addEventListener(\"plusscrollbottom\", this);\n                window.addEventListener('dragup', this);\n            },\n            scrollTo: function(x, y, time) {\n                $.scrollTo(y, time);\n            },\n            scrollToBottom: function(time) {\n                $.scrollTo(document.documentElement.scrollHeight, time);\n            },\n            refresh: function(isReset) {\n                if (isReset && this.finished) {\n                    this.enablePullupToRefresh();\n                    this.finished = false;\n                }\n            }\n        }, $.PullRefresh));\n\n        //override h5 pullRefresh\n        $.fn.pullRefresh_native = function(options) {\n            var self;\n            if (this.length === 0) {\n                self = document.createElement('div');\n                self.className = 'mui-content';\n                document.body.appendChild(self);\n            } else {\n                self = this[0];\n            }\n            var args = options;\n            //一个父需要支持多个子下拉刷新\n            options = options || {}\n            if (typeof options === 'string') {\n                options = $.parseJSON(options);\n            };\n            !options.webviewId && (options.webviewId = (plus.webview.currentWebview().id || plus.webview.currentWebview().getURL()));\n            var pullRefreshApi = null;\n            var attrWebviewId = options.webviewId && options.webviewId.replace(/\\//g, \"_\"); //替换所有\"/\"\n            var id = self.getAttribute('data-pullrefresh-plus-' + attrWebviewId);\n            if (!id && typeof args === 'undefined') {\n                return false;\n            }\n            if (!id) { //避免重复初始化5+ pullrefresh\n                id = ++$.uuid;\n                self.setAttribute('data-pullrefresh-plus-' + attrWebviewId, id);\n                document.body.classList.add(CLASS_PLUS_PULLREFRESH);\n                $.data[id] = pullRefreshApi = new PlusPullRefresh(self, options);\n            } else {\n                pullRefreshApi = $.data[id];\n            }\n            if (options.down && options.down.auto) { //如果设置了auto，则自动下拉一次\n                //pullRefreshApi._pulldownLoading(); //parent webview\n                pullRefreshApi.beginPulldown();\n            } else if (options.up && options.up.auto) { //如果设置了auto，则自动上拉一次\n                pullRefreshApi.beginPullup();\n            }\n            return pullRefreshApi;\n        };\n    });\n\n})(mui, document);\n/**\n * off-canvas\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} action\n * @returns {undefined}\n */\n(function($, window, document, name) {\n\tvar CLASS_OFF_CANVAS_LEFT = 'mui-off-canvas-left';\n\tvar CLASS_OFF_CANVAS_RIGHT = 'mui-off-canvas-right';\n\tvar CLASS_ACTION_BACKDROP = 'mui-off-canvas-backdrop';\n\tvar CLASS_OFF_CANVAS_WRAP = 'mui-off-canvas-wrap';\n\n\tvar CLASS_SLIDE_IN = 'mui-slide-in';\n\tvar CLASS_ACTIVE = 'mui-active';\n\n\n\tvar CLASS_TRANSITIONING = 'mui-transitioning';\n\n\tvar SELECTOR_INNER_WRAP = '.mui-inner-wrap';\n\n\n\tvar OffCanvas = $.Class.extend({\n\t\tinit: function(element, options) {\n\t\t\tthis.wrapper = this.element = element;\n\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n\t\t\tthis.classList = this.wrapper.classList;\n\t\t\tif (this.scroller) {\n\t\t\t\tthis.options = $.extend(true, {\n\t\t\t\t\tdragThresholdX: 10,\n\t\t\t\t\tscale: 0.8,\n\t\t\t\t\topacity: 0.1,\n\t\t\t\t\tpreventDefaultException: {\n\t\t\t\t\t\ttagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\n\t\t\t\t\t},\n\t\t\t\t}, options);\n\t\t\t\tdocument.body.classList.add('mui-fullscreen'); //fullscreen\n\t\t\t\tthis.refresh();\n\t\t\t\tthis.initEvent();\n\t\t\t}\n\t\t},\n\t\t_preventDefaultException: function(el, exceptions) {\n\t\t\tfor (var i in exceptions) {\n\t\t\t\tif (exceptions[i].test(el[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\trefresh: function(offCanvas) {\n\t\t\t//\t\t\toffCanvas && !offCanvas.classList.contains(CLASS_ACTIVE) && this.classList.remove(CLASS_ACTIVE);\n\t\t\tthis.slideIn = this.classList.contains(CLASS_SLIDE_IN);\n\t\t\tthis.scalable = this.classList.contains('mui-scalable') && !this.slideIn;\n\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n\t\t\t//\t\t\t!offCanvas && this.scroller.classList.remove(CLASS_TRANSITIONING);\n\t\t\t//\t\t\t!offCanvas && this.scroller.setAttribute('style', '');\n\t\t\tthis.offCanvasLefts = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_LEFT);\n\t\t\tthis.offCanvasRights = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_RIGHT);\n\t\t\tif (offCanvas) {\n\t\t\t\tif (offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\n\t\t\t\t\tthis.offCanvasLeft = offCanvas;\n\t\t\t\t} else if (offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\n\t\t\t\t\tthis.offCanvasRight = offCanvas;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.offCanvasRight = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT);\n\t\t\t\tthis.offCanvasLeft = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT);\n\t\t\t}\n\t\t\tthis.offCanvasRightWidth = this.offCanvasLeftWidth = 0;\n\t\t\tthis.offCanvasLeftSlideIn = this.offCanvasRightSlideIn = false;\n\t\t\tif (this.offCanvasRight) {\n\t\t\t\tthis.offCanvasRightWidth = this.offCanvasRight.offsetWidth;\n\t\t\t\tthis.offCanvasRightSlideIn = this.slideIn && (this.offCanvasRight.parentNode === this.wrapper);\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_ACTIVE);\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.setAttribute('style', '');\n\t\t\t}\n\t\t\tif (this.offCanvasLeft) {\n\t\t\t\tthis.offCanvasLeftWidth = this.offCanvasLeft.offsetWidth;\n\t\t\t\tthis.offCanvasLeftSlideIn = this.slideIn && (this.offCanvasLeft.parentNode === this.wrapper);\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_ACTIVE);\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.setAttribute('style', '');\n\t\t\t}\n\t\t\tthis.backdrop = this.scroller.querySelector('.' + CLASS_ACTION_BACKDROP);\n\n\t\t\tthis.options.dragThresholdX = this.options.dragThresholdX || 10;\n\n\t\t\tthis.visible = false;\n\t\t\tthis.startX = null;\n\t\t\tthis.lastX = null;\n\t\t\tthis.offsetX = null;\n\t\t\tthis.lastTranslateX = null;\n\t\t},\n\t\thandleEvent: function(e) {\n\t\t\tswitch (e.type) {\n\t\t\t\tcase $.EVENT_START:\n\t\t\t\t\te.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'webkitTransitionEnd': //有个bug需要处理，需要考虑假设没有触发webkitTransitionEnd的情况\n\t\t\t\t\tif (e.target === this.scroller) {\n\t\t\t\t\t\tthis._dispatchEvent();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'drag':\n\t\t\t\t\tvar detail = e.detail;\n\t\t\t\t\tif (!this.startX) {\n\t\t\t\t\t\tthis.startX = detail.center.x;\n\t\t\t\t\t\tthis.lastX = this.startX;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.lastX = detail.center.x;\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.isDragging && Math.abs(this.lastX - this.startX) > this.options.dragThresholdX && (detail.direction === 'left' || (detail.direction === 'right'))) {\n\t\t\t\t\t\tif (this.slideIn) {\n\t\t\t\t\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n\t\t\t\t\t\t\tif (this.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\t\t\t\tif (this.offCanvasRight && this.offCanvasRight.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (detail.direction === 'left' && this.offCanvasRight) {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t} else if (detail.direction === 'right' && this.offCanvasLeft) {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.scroller = null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (this.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\t\t\t\tif (detail.direction === 'left') {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (detail.direction === 'right') {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.offCanvas && this.scroller) {\n\t\t\t\t\t\t\tthis.startX = this.lastX;\n\t\t\t\t\t\t\tthis.isDragging = true;\n\n\t\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\n\t\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\n\n\t\t\t\t\t\t\tthis.offCanvas.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t\t\t\tthis.scroller.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t\t\t\tthis.offsetX = this.getTranslateX();\n\t\t\t\t\t\t\tthis._initOffCanvasVisible();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (this.isDragging) {\n\t\t\t\t\t\tthis.updateTranslate(this.offsetX + (this.lastX - this.startX));\n\t\t\t\t\t\tdetail.gesture.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tif (this.isDragging) {\n\t\t\t\t\t\tvar detail = e.detail;\n\t\t\t\t\t\tvar direction = detail.direction;\n\t\t\t\t\t\tthis.isDragging = false;\n\t\t\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\n\t\t\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\n\t\t\t\t\t\tvar ratio = 0;\n\t\t\t\t\t\tvar x = this.getTranslateX();\n\t\t\t\t\t\tif (!this.slideIn) {\n\t\t\t\t\t\t\tif (x >= 0) {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasLeftWidth && (x / this.offCanvasLeftWidth)) || 0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasRightWidth && (x / this.offCanvasRightWidth)) || 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (ratio === 0) {\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t\tthis._dispatchEvent(); //此处不触发webkitTransitionEnd,所以手动dispatch\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (direction === 'right' && ratio >= 0 && (ratio >= 0.5 || detail.swipe)) { //右滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio < 0 && (ratio > -0.5 || detail.swipe)) { //右滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio > 0 && ratio < 0.5) { //右滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio < 0.5) { //右滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio <= 0 && (ratio <= -0.5 || detail.swipe)) { //左滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio > 0 && (ratio <= 0.5 || detail.swipe)) { //左滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio < 0 && ratio >= -0.5) { //左滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio > 0.5) { //左滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else { //默认关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (ratio === 1 || ratio === -1) { //此处不触发webkitTransitionEnd,所以手动dispatch\n\t\t\t\t\t\t\t\tthis._dispatchEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (x >= 0) {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasRightWidth && (x / this.offCanvasRightWidth)) || 0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tratio = (this.offCanvasLeftWidth && (x / this.offCanvasLeftWidth)) || 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (direction === 'right' && ratio <= 0 && (ratio >= -0.5 || detail.swipe)) { //右滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio > 0 && (ratio >= 0.5 || detail.swipe)) { //右滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio <= -0.5) { //右滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio > 0 && ratio <= 0.5) { //右滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio >= 0 && (ratio <= 0.5 || detail.swipe)) { //左滑打开\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio < 0 && (ratio <= -0.5 || detail.swipe)) { //左滑关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio >= 0.5) { //左滑还原关闭\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio >= -0.5 && ratio < 0) { //左滑还原打开\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (ratio === 1 || ratio === -1 || ratio === 0) {\n\t\t\t\t\t\t\t\tthis._dispatchEvent();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t_dispatchEvent: function() {\n\t\t\tif (this.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t$.trigger(this.wrapper, 'shown', this);\n\t\t\t} else {\n\t\t\t\t$.trigger(this.wrapper, 'hidden', this);\n\t\t\t}\n\t\t},\n\t\t_initOffCanvasVisible: function() {\n\t\t\tif (!this.visible) {\n\t\t\t\tthis.visible = true;\n\t\t\t\tif (this.offCanvasLeft) {\n\t\t\t\t\tthis.offCanvasLeft.style.visibility = 'visible';\n\t\t\t\t}\n\t\t\t\tif (this.offCanvasRight) {\n\t\t\t\t\tthis.offCanvasRight.style.visibility = 'visible';\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tinitEvent: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.backdrop) {\n\t\t\t\tself.backdrop.addEventListener('tap', function(e) {\n\t\t\t\t\tself.close();\n\t\t\t\t\te.detail.gesture.preventDefault();\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.classList.contains('mui-draggable')) {\n\t\t\t\tthis.wrapper.addEventListener($.EVENT_START, this); //临时处理\n\t\t\t\tthis.wrapper.addEventListener('drag', this);\n\t\t\t\tthis.wrapper.addEventListener('dragend', this);\n\t\t\t}\n\t\t\tthis.wrapper.addEventListener('webkitTransitionEnd', this);\n\t\t},\n\t\topenPercentage: function(percentage) {\n\t\t\tvar p = percentage / 100;\n\t\t\tif (!this.slideIn) {\n\t\t\t\tif (this.offCanvasLeft && percentage >= 0) {\n\t\t\t\t\tthis.updateTranslate(this.offCanvasLeftWidth * p);\n\t\t\t\t\tthis.offCanvasLeft.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t} else if (this.offCanvasRight && percentage <= 0) {\n\t\t\t\t\tthis.updateTranslate(this.offCanvasRightWidth * p);\n\t\t\t\t\tthis.offCanvasRight.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t\tthis.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t} else {\n\t\t\t\tif (this.offCanvasLeft && percentage >= 0) {\n\t\t\t\t\tp = p === 0 ? -1 : 0;\n\t\t\t\t\tthis.updateTranslate(this.offCanvasLeftWidth * p);\n\t\t\t\t\tthis.offCanvasLeft.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t} else if (this.offCanvasRight && percentage <= 0) {\n\t\t\t\t\tp = p === 0 ? 1 : 0;\n\t\t\t\t\tthis.updateTranslate(this.offCanvasRightWidth * p);\n\t\t\t\t\tthis.offCanvasRight.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t\tthis.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t}\n\t\t},\n\t\tupdateTranslate: function(x) {\n\t\t\tif (x !== this.lastTranslateX) {\n\t\t\t\tif (!this.slideIn) {\n\t\t\t\t\tif ((!this.offCanvasLeft && x > 0) || (!this.offCanvasRight && x < 0)) {\n\t\t\t\t\t\tthis.setTranslateX(0);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.leftShowing && x > this.offCanvasLeftWidth) {\n\t\t\t\t\t\tthis.setTranslateX(this.offCanvasLeftWidth);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.rightShowing && x < -this.offCanvasRightWidth) {\n\t\t\t\t\t\tthis.setTranslateX(-this.offCanvasRightWidth);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.setTranslateX(x);\n\t\t\t\t\tif (x >= 0) {\n\t\t\t\t\t\tthis.leftShowing = true;\n\t\t\t\t\t\tthis.rightShowing = false;\n\t\t\t\t\t\tif (x > 0) {\n\t\t\t\t\t\t\tif (this.offCanvasLeft) {\n\t\t\t\t\t\t\t\t$.each(this.offCanvasLefts, function(index, offCanvas) {\n\t\t\t\t\t\t\t\t\tif (offCanvas === this.offCanvasLeft) {\n\t\t\t\t\t\t\t\t\t\tthis.offCanvasLeft.style.zIndex = 0;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = -1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.offCanvasRight) {\n\t\t\t\t\t\t\t\tthis.offCanvasRight.style.zIndex = -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.rightShowing = true;\n\t\t\t\t\t\tthis.leftShowing = false;\n\t\t\t\t\t\tif (this.offCanvasRight) {\n\t\t\t\t\t\t\t$.each(this.offCanvasRights, function(index, offCanvas) {\n\t\t\t\t\t\t\t\tif (offCanvas === this.offCanvasRight) {\n\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = 0;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = -1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.offCanvasLeft) {\n\t\t\t\t\t\t\tthis.offCanvasLeft.style.zIndex = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (this.offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\n\t\t\t\t\t\tif (x < 0) {\n\t\t\t\t\t\t\tthis.setTranslateX(0);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (x > this.offCanvasRightWidth) {\n\t\t\t\t\t\t\tthis.setTranslateX(this.offCanvasRightWidth);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (x > 0) {\n\t\t\t\t\t\t\tthis.setTranslateX(0);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (x < -this.offCanvasLeftWidth) {\n\t\t\t\t\t\t\tthis.setTranslateX(-this.offCanvasLeftWidth);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.setTranslateX(x);\n\t\t\t\t}\n\t\t\t\tthis.lastTranslateX = x;\n\t\t\t}\n\t\t},\n\t\tsetTranslateX: $.animationFrame(function(x) {\n\t\t\tif (this.scroller) {\n\t\t\t\tif (this.scalable && this.offCanvas.parentNode === this.wrapper) {\n\t\t\t\t\tvar percent = Math.abs(x) / this.offCanvasWidth;\n\t\t\t\t\tvar zoomOutScale = 1 - (1 - this.options.scale) * percent;\n\t\t\t\t\tvar zoomInScale = this.options.scale + (1 - this.options.scale) * percent;\n\t\t\t\t\tvar zoomOutOpacity = 1 - (1 - this.options.opacity) * percent;\n\t\t\t\t\tvar zoomInOpacity = this.options.opacity + (1 - this.options.opacity) * percent;\n\t\t\t\t\tif (this.offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransformOrigin = '-100%';\n\t\t\t\t\t\tthis.scroller.style.webkitTransformOrigin = 'left';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransformOrigin = '200%';\n\t\t\t\t\t\tthis.scroller.style.webkitTransformOrigin = 'right';\n\t\t\t\t\t}\n\t\t\t\t\tthis.offCanvas.style.opacity = zoomInOpacity;\n\t\t\t\t\tthis.offCanvas.style.webkitTransform = 'translate3d(0,0,0) scale(' + zoomInScale + ')';\n\t\t\t\t\tthis.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0) scale(' + zoomOutScale + ')';\n\t\t\t\t} else {\n\t\t\t\t\tif (this.slideIn) {\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\tgetTranslateX: function() {\n\t\t\tif (this.offCanvas) {\n\t\t\t\tvar scroller = this.slideIn ? this.offCanvas : this.scroller;\n\t\t\t\tvar result = $.parseTranslateMatrix($.getStyles(scroller, 'webkitTransform'));\n\t\t\t\treturn (result && result.x) || 0;\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\t\tisShown: function(direction) {\n\t\t\tvar shown = false;\n\t\t\tif (!this.slideIn) {\n\t\t\t\tvar x = this.getTranslateX();\n\t\t\t\tif (direction === 'right') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x < 0;\n\t\t\t\t} else if (direction === 'left') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x > 0;\n\t\t\t\t} else {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x !== 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (direction === 'left') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\n\t\t\t\t} else if (direction === 'right') {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE);\n\t\t\t\t} else {\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && (this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn shown;\n\t\t},\n\t\tclose: function() {\n\t\t\tthis._initOffCanvasVisible();\n\t\t\tthis.offCanvas = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\n\t\t\tthis.offCanvasWidth = this.offCanvas.offsetWidth;\n\t\t\tif (this.scroller) {\n\t\t\t\tthis.offCanvas.offsetHeight;\n\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.openPercentage(0);\n\t\t\t}\n\t\t},\n\t\tshow: function(direction) {\n\t\t\tthis._initOffCanvasVisible();\n\t\t\tif (this.isShown(direction)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!direction) {\n\t\t\t\tdirection = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT) ? 'right' : 'left';\n\t\t\t}\n\t\t\tif (direction === 'right') {\n\t\t\t\tthis.offCanvas = this.offCanvasRight;\n\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\n\t\t\t} else {\n\t\t\t\tthis.offCanvas = this.offCanvasLeft;\n\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\n\t\t\t}\n\t\t\tif (this.scroller) {\n\t\t\t\tthis.offCanvas.offsetHeight;\n\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\n\t\t\t\tthis.openPercentage(direction === 'left' ? 100 : -100);\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\ttoggle: function(directionOrOffCanvas) {\n\t\t\tvar direction = directionOrOffCanvas;\n\t\t\tif (directionOrOffCanvas && directionOrOffCanvas.classList) {\n\t\t\t\tdirection = directionOrOffCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT) ? 'left' : 'right';\n\t\t\t\tthis.refresh(directionOrOffCanvas);\n\t\t\t}\n\t\t\tif (!this.show(direction)) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t});\n\n\t//hash to offcanvas\n\tvar findOffCanvasContainer = function(target) {\n\t\tparentNode = target.parentNode;\n\t\tif (parentNode) {\n\t\t\tif (parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n\t\t\t\treturn parentNode;\n\t\t\t} else {\n\t\t\t\tparentNode = parentNode.parentNode;\n\t\t\t\tif (parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n\t\t\t\t\treturn parentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tvar handle = function(event, target) {\n\t\tif (target.tagName === 'A' && target.hash) {\n\t\t\tvar offcanvas = document.getElementById(target.hash.replace('#', ''));\n\t\t\tif (offcanvas) {\n\t\t\t\tvar container = findOffCanvasContainer(offcanvas);\n\t\t\t\tif (container) {\n\t\t\t\t\t$.targets._container = container;\n\t\t\t\t\treturn offcanvas;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 60,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisReset: false,\n\t\tisContinue: true\n\t});\n\n\twindow.addEventListener('tap', function(e) {\n\t\tif (!$.targets.offcanvas) {\n\t\t\treturn;\n\t\t}\n\t\t//TODO 此处类型的代码后续考虑统一优化(target机制)，现在的实现费力不讨好\n\t\tvar target = e.target;\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tif (target.tagName === 'A' && target.hash && target.hash === ('#' + $.targets.offcanvas.id)) {\n\t\t\t\te.detail && e.detail.gesture && e.detail.gesture.preventDefault(); //fixed hashchange\n\t\t\t\t$($.targets._container).offCanvas().toggle($.targets.offcanvas);\n\t\t\t\t$.targets.offcanvas = $.targets._container = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\n\t$.fn.offCanvas = function(options) {\n\t\tvar offCanvasApis = [];\n\t\tthis.each(function() {\n\t\t\tvar offCanvasApi = null;\n\t\t\tvar self = this;\n\t\t\t//hack old version\n\t\t\tif (!self.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n\t\t\t\tself = findOffCanvasContainer(self);\n\t\t\t}\n\t\t\tvar id = self.getAttribute('data-offCanvas');\n\t\t\tif (!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\t$.data[id] = offCanvasApi = new OffCanvas(self, options);\n\t\t\t\tself.setAttribute('data-offCanvas', id);\n\t\t\t} else {\n\t\t\t\toffCanvasApi = $.data[id];\n\t\t\t}\n\t\t\tif (options === 'show' || options === 'close' || options === 'toggle') {\n\t\t\t\toffCanvasApi.toggle();\n\t\t\t}\n\t\t\toffCanvasApis.push(offCanvasApi);\n\t\t});\n\t\treturn offCanvasApis.length === 1 ? offCanvasApis[0] : offCanvasApis;\n\t};\n\t$.ready(function() {\n\t\t$('.mui-off-canvas-wrap').offCanvas();\n\t});\n})(mui, window, document, 'offcanvas');\n/**\n * actions\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n\tvar CLASS_ACTION = 'mui-action';\n\n\tvar handle = function(event, target) {\n\t\tvar className = target.className || '';\n\t\tif (typeof className !== 'string') { //svg className(SVGAnimatedString)\n\t\t\tclassName = '';\n\t\t}\n\t\tif (className && ~className.indexOf(CLASS_ACTION)) {\n\t\t\tif (target.classList.contains('mui-action-back')) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t\treturn target;\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 50,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisContinue: true\n\t});\n\n})(mui, 'action');\n/**\n * Modals\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} name\n * @returns {undefined}\n */\n(function($, window, document, name) {\n\tvar CLASS_MODAL = 'mui-modal';\n\n\tvar handle = function(event, target) {\n\t\tif (target.tagName === 'A' && target.hash) {\n\t\t\tvar modal = document.getElementById(target.hash.replace('#', ''));\n\t\t\tif (modal && modal.classList.contains(CLASS_MODAL)) {\n\t\t\t\treturn modal;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 50,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisReset: false,\n\t\tisContinue: true\n\t});\n\n\twindow.addEventListener('tap', function(event) {\n\t\tif ($.targets.modal) {\n\t\t\tevent.detail.gesture.preventDefault(); //fixed hashchange\n\t\t\t$.targets.modal.classList.toggle('mui-active');\n\t\t}\n\t});\n})(mui, window, document, 'modal');\n/**\n * Popovers\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} name\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, document, name) {\n\n\tvar CLASS_POPOVER = 'mui-popover';\n\tvar CLASS_POPOVER_ARROW = 'mui-popover-arrow';\n\tvar CLASS_ACTION_POPOVER = 'mui-popover-action';\n\tvar CLASS_BACKDROP = 'mui-backdrop';\n\tvar CLASS_BAR_POPOVER = 'mui-bar-popover';\n\tvar CLASS_BAR_BACKDROP = 'mui-bar-backdrop';\n\tvar CLASS_ACTION_BACKDROP = 'mui-backdrop-action';\n\tvar CLASS_ACTIVE = 'mui-active';\n\tvar CLASS_BOTTOM = 'mui-bottom';\n\n\n\n\tvar handle = function(event, target) {\n\t\tif (target.tagName === 'A' && target.hash) {\n\t\t\t$.targets._popover = document.getElementById(target.hash.replace('#', ''));\n\t\t\tif ($.targets._popover && $.targets._popover.classList.contains(CLASS_POPOVER)) {\n\t\t\t\treturn target;\n\t\t\t} else {\n\t\t\t\t$.targets._popover = null;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 60,\n\t\thandle: handle,\n\t\ttarget: false,\n\t\tisReset: false,\n\t\tisContinue: true\n\t});\n\n\tvar onPopoverShown = function(e) {\n\t\tthis.removeEventListener('webkitTransitionEnd', onPopoverShown);\n\t\tthis.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\t$.trigger(this, 'shown', this);\n\t}\n\tvar onPopoverHidden = function(e) {\n\t\tsetStyle(this, 'none');\n\t\tthis.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\tthis.removeEventListener($.EVENT_MOVE, $.preventDefault);\n\t\t$.trigger(this, 'hidden', this);\n\t};\n\n\tvar backdrop = (function() {\n\t\tvar element = document.createElement('div');\n\t\telement.classList.add(CLASS_BACKDROP);\n\t\telement.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\telement.addEventListener('tap', function(e) {\n\t\t\tvar popover = $.targets._popover;\n\t\t\tif (popover) {\n\t\t\t\tpopover.addEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\t\t\tpopover.classList.remove(CLASS_ACTIVE);\n\t\t\t\tremoveBackdrop(popover);\n\t\t\t}\n\t\t});\n\n\t\treturn element;\n\t}());\n\tvar removeBackdropTimer;\n\tvar removeBackdrop = function(popover) {\n\t\tbackdrop.setAttribute('style', 'opacity:0');\n\t\t$.targets.popover = $.targets._popover = null; //reset\n\t\tremoveBackdropTimer = $.later(function() {\n\t\t\tif (!popover.classList.contains(CLASS_ACTIVE) && backdrop.parentNode && backdrop.parentNode === document.body) {\n\t\t\t\tdocument.body.removeChild(backdrop);\n\t\t\t}\n\t\t}, 350);\n\t};\n\twindow.addEventListener('tap', function(e) {\n\t\tif (!$.targets.popover) {\n\t\t\treturn;\n\t\t}\n\t\tvar toggle = false;\n\t\tvar target = e.target;\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tif (target === $.targets.popover) {\n\t\t\t\ttoggle = true;\n\t\t\t}\n\t\t}\n\t\tif (toggle) {\n\t\t\te.detail.gesture.preventDefault(); //fixed hashchange\n\t\t\ttogglePopover($.targets._popover, $.targets.popover);\n\t\t}\n\n\t});\n\n\tvar togglePopover = function(popover, anchor, state) {\n\t\tif ((state === 'show' && popover.classList.contains(CLASS_ACTIVE)) || (state === 'hide' && !popover.classList.contains(CLASS_ACTIVE))) {\n\t\t\treturn;\n\t\t}\n\t\tremoveBackdropTimer && removeBackdropTimer.cancel(); //取消remove的timer\n\t\t//remove一遍，以免来回快速切换，导致webkitTransitionEnd不触发，无法remove\n\t\tpopover.removeEventListener('webkitTransitionEnd', onPopoverShown);\n\t\tpopover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\tbackdrop.classList.remove(CLASS_BAR_BACKDROP);\n\t\tbackdrop.classList.remove(CLASS_ACTION_BACKDROP);\n\t\tvar _popover = document.querySelector('.mui-popover.mui-active');\n\t\tif (_popover) {\n\t\t\t//\t\t\t_popover.setAttribute('style', '');\n\t\t\t_popover.addEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\t\t_popover.classList.remove(CLASS_ACTIVE);\n\t\t\t//\t\t\t_popover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n\t\t\t//同一个弹出则直接返回，解决同一个popover的toggle\n\t\t\tif (popover === _popover) {\n\t\t\t\tremoveBackdrop(_popover);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tvar isActionSheet = false;\n\t\tif (popover.classList.contains(CLASS_BAR_POPOVER) || popover.classList.contains(CLASS_ACTION_POPOVER)) { //navBar\n\t\t\tif (popover.classList.contains(CLASS_ACTION_POPOVER)) { //action sheet popover\n\t\t\t\tisActionSheet = true;\n\t\t\t\tbackdrop.classList.add(CLASS_ACTION_BACKDROP);\n\t\t\t} else { //bar popover\n\t\t\t\tbackdrop.classList.add(CLASS_BAR_BACKDROP);\n\t\t\t\t//\t\t\t\tif (anchor) {\n\t\t\t\t//\t\t\t\t\tif (anchor.parentNode) {\n\t\t\t\t//\t\t\t\t\t\tvar offsetWidth = anchor.offsetWidth;\n\t\t\t\t//\t\t\t\t\t\tvar offsetLeft = anchor.offsetLeft;\n\t\t\t\t//\t\t\t\t\t\tvar innerWidth = window.innerWidth;\n\t\t\t\t//\t\t\t\t\t\tpopover.style.left = (Math.min(Math.max(offsetLeft, defaultPadding), innerWidth - offsetWidth - defaultPadding)) + \"px\";\n\t\t\t\t//\t\t\t\t\t} else {\n\t\t\t\t//\t\t\t\t\t\t//TODO anchor is position:{left,top,bottom,right}\n\t\t\t\t//\t\t\t\t\t}\n\t\t\t\t//\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsetStyle(popover, 'block'); //actionsheet transform\n\t\tpopover.offsetHeight;\n\t\tpopover.classList.add(CLASS_ACTIVE);\n\t\tbackdrop.setAttribute('style', '');\n\t\tdocument.body.appendChild(backdrop);\n\t\tcalPosition(popover, anchor, isActionSheet); //position\n\t\tbackdrop.classList.add(CLASS_ACTIVE);\n\t\tpopover.addEventListener('webkitTransitionEnd', onPopoverShown);\n\t};\n\tvar setStyle = function(popover, display, top, left) {\n\t\tvar style = popover.style;\n\t\tif (typeof display !== 'undefined')\n\t\t\tstyle.display = display;\n\t\tif (typeof top !== 'undefined')\n\t\t\tstyle.top = top + 'px';\n\t\tif (typeof left !== 'undefined')\n\t\t\tstyle.left = left + 'px';\n\t};\n\tvar calPosition = function(popover, anchor, isActionSheet) {\n\t\tif (!popover || !anchor) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isActionSheet) { //actionsheet\n\t\t\tsetStyle(popover, 'block')\n\t\t\treturn;\n\t\t}\n\n\t\tvar wWidth = window.innerWidth;\n\t\tvar wHeight = window.innerHeight;\n\n\t\tvar pWidth = popover.offsetWidth;\n\t\tvar pHeight = popover.offsetHeight;\n\n\t\tvar aWidth = anchor.offsetWidth;\n\t\tvar aHeight = anchor.offsetHeight;\n\t\tvar offset = $.offset(anchor);\n\n\t\tvar arrow = popover.querySelector('.' + CLASS_POPOVER_ARROW);\n\t\tif (!arrow) {\n\t\t\tarrow = document.createElement('div');\n\t\t\tarrow.className = CLASS_POPOVER_ARROW;\n\t\t\tpopover.appendChild(arrow);\n\t\t}\n\t\tvar arrowSize = arrow && arrow.offsetWidth / 2 || 0;\n\n\n\n\t\tvar pTop = 0;\n\t\tvar pLeft = 0;\n\t\tvar diff = 0;\n\t\tvar arrowLeft = 0;\n\t\tvar defaultPadding = popover.classList.contains(CLASS_ACTION_POPOVER) ? 0 : 5;\n\n\t\tvar position = 'top';\n\t\tif ((pHeight + arrowSize) < (offset.top - window.pageYOffset)) { //top\n\t\t\tpTop = offset.top - pHeight - arrowSize;\n\t\t} else if ((pHeight + arrowSize) < (wHeight - (offset.top - window.pageYOffset) - aHeight)) { //bottom\n\t\t\tposition = 'bottom';\n\t\t\tpTop = offset.top + aHeight + arrowSize;\n\t\t} else { //middle\n\t\t\tposition = 'middle';\n\t\t\tpTop = Math.max((wHeight - pHeight) / 2 + window.pageYOffset, 0);\n\t\t\tpLeft = Math.max((wWidth - pWidth) / 2 + window.pageXOffset, 0);\n\t\t}\n\t\tif (position === 'top' || position === 'bottom') {\n\t\t\tpLeft = aWidth / 2 + offset.left - pWidth / 2;\n\t\t\tdiff = pLeft;\n\t\t\tif (pLeft < defaultPadding) pLeft = defaultPadding;\n\t\t\tif (pLeft + pWidth > wWidth) pLeft = wWidth - pWidth - defaultPadding;\n\n\t\t\tif (arrow) {\n\t\t\t\tif (position === 'top') {\n\t\t\t\t\tarrow.classList.add(CLASS_BOTTOM);\n\t\t\t\t} else {\n\t\t\t\t\tarrow.classList.remove(CLASS_BOTTOM);\n\t\t\t\t}\n\t\t\t\tdiff = diff - pLeft;\n\t\t\t\tarrowLeft = (pWidth / 2 - arrowSize / 2 + diff);\n\t\t\t\tarrowLeft = Math.max(Math.min(arrowLeft, pWidth - arrowSize * 2 - 6), 6);\n\t\t\t\tarrow.setAttribute('style', 'left:' + arrowLeft + 'px');\n\t\t\t}\n\t\t} else if (position === 'middle') {\n\t\t\tarrow.setAttribute('style', 'display:none');\n\t\t}\n\t\tsetStyle(popover, 'block', pTop, pLeft);\n\t};\n\n\t$.createMask = function(callback) {\n\t\tvar element = document.createElement('div');\n\t\telement.classList.add(CLASS_BACKDROP);\n\t\telement.addEventListener($.EVENT_MOVE, $.preventDefault);\n\t\telement.addEventListener('tap', function() {\n\t\t\tmask.close();\n\t\t});\n\t\tvar mask = [element];\n\t\tmask._show = false;\n\t\tmask.show = function() {\n\t\t\tmask._show = true;\n\t\t\telement.setAttribute('style', 'opacity:1');\n\t\t\tdocument.body.appendChild(element);\n\t\t\treturn mask;\n\t\t};\n\t\tmask._remove = function() {\n\t\t\tif (mask._show) {\n\t\t\t\tmask._show = false;\n\t\t\t\telement.setAttribute('style', 'opacity:0');\n\t\t\t\t$.later(function() {\n\t\t\t\t\tvar body = document.body;\n\t\t\t\t\telement.parentNode === body && body.removeChild(element);\n\t\t\t\t}, 350);\n\t\t\t}\n\t\t\treturn mask;\n\t\t};\n\t\tmask.close = function() {\n\t\t\tif (callback) {\n\t\t\t\tif (callback() !== false) {\n\t\t\t\t\tmask._remove();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmask._remove();\n\t\t\t}\n\t\t};\n\t\treturn mask;\n\t};\n\t$.fn.popover = function() {\n\t\tvar args = arguments;\n\t\tthis.each(function() {\n\t\t\t$.targets._popover = this;\n\t\t\tif (args[0] === 'show' || args[0] === 'hide' || args[0] === 'toggle') {\n\t\t\t\ttogglePopover(this, args[1], args[0]);\n\t\t\t}\n\t\t});\n\t};\n\n})(mui, window, document, 'popover');\n/**\n * segmented-controllers\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, document, name, undefined) {\n\n    var CLASS_CONTROL_ITEM = 'mui-control-item';\n    var CLASS_SEGMENTED_CONTROL = 'mui-segmented-control';\n    var CLASS_SEGMENTED_CONTROL_VERTICAL = 'mui-segmented-control-vertical';\n    var CLASS_CONTROL_CONTENT = 'mui-control-content';\n    var CLASS_TAB_BAR = 'mui-bar-tab';\n    var CLASS_TAB_ITEM = 'mui-tab-item';\n    var CLASS_SLIDER_ITEM = 'mui-slider-item';\n\n   var handle = function(event, target) {\n        if (target.classList && (target.classList.contains(CLASS_CONTROL_ITEM) || target.classList.contains(CLASS_TAB_ITEM))) {\n            if (target.parentNode && target.parentNode.classList && target.parentNode.classList.contains(CLASS_SEGMENTED_CONTROL_VERTICAL)) {\n                //vertical 如果preventDefault会导致无法滚动\n            } else {\n\n                    event.preventDefault();      \n                    // if(target.tagName == 'A') {\n                    //     // fixed 底部选项卡href 无法跳转 && stop hash change\n                    //     var curr_href = location.hostname + location.pathname,\n                    //         target_href = target.hostname + target.pathname;\n                   \n                    //     if (curr_href == target_href && target.hash !== \"\") {\n                    //         event.preventDefault();\n                    //         return target;\n                    //     }else{\n                    //             return false\n                    //     }\n                    // }\n            }\n            //          if (target.hash) {\n            return target;\n            //          }\n        }\n        return false;\n    };\n\n    $.registerTarget({\n        name: name,\n        index: 80,\n        handle: handle,\n        target: false\n    });\n\n    window.addEventListener('tap', function(e) {\n\n        var targetTab = $.targets.tab;\n        if (!targetTab) {\n            return;\n        }\n        var activeTab;\n        var activeBodies;\n        var targetBody;\n        var className = 'mui-active';\n        var classSelector = '.' + className;\n        var segmentedControl = targetTab.parentNode;\n\n        for (; segmentedControl && segmentedControl !== document; segmentedControl = segmentedControl.parentNode) {\n            if (segmentedControl.classList.contains(CLASS_SEGMENTED_CONTROL)) {\n                activeTab = segmentedControl.querySelector(classSelector + '.' + CLASS_CONTROL_ITEM);\n                break;\n            } else if (segmentedControl.classList.contains(CLASS_TAB_BAR)) {\n                activeTab = segmentedControl.querySelector(classSelector + '.' + CLASS_TAB_ITEM);\n            }\n        }\n\n        if (activeTab) {\n            activeTab.classList.remove(className);\n        }\n\n        var isLastActive = targetTab === activeTab;\n        if (targetTab) {\n            targetTab.classList.add(className);\n        }\n\n        if (!targetTab.hash) {\n            return;\n        }\n        targetBody = document.getElementById(targetTab.hash.replace('#', ''));\n\n        if (!targetBody) {\n            return;\n        }\n        if (!targetBody.classList.contains(CLASS_CONTROL_CONTENT)) { //tab bar popover\n            targetTab.classList[isLastActive ? 'remove' : 'add'](className);\n            return;\n        }\n        if (isLastActive) { //same\n            return;\n        }\n        var parentNode = targetBody.parentNode;\n        activeBodies = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT + classSelector);\n        for (var i = 0; i < activeBodies.length; i++) {\n            var activeBody = activeBodies[i];\n            activeBody.parentNode === parentNode && activeBody.classList.remove(className);\n        }\n\n        targetBody.classList.add(className);\n\n        var contents = [];\n        var _contents = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT);\n        for (var i = 0; i < _contents.length; i++) { //查找直属子节点\n            _contents[i].parentNode === parentNode && (contents.push(_contents[i]));\n        }\n        $.trigger(targetBody, $.eventName('shown', name), {\n            tabNumber: Array.prototype.indexOf.call(contents, targetBody)\n        });\n        e.detail && e.detail.gesture.preventDefault(); //fixed hashchange\n    });\n\n})(mui, window, document, 'tab');\n/**\n * Toggles switch\n * @param {type} $\n * @param {type} window\n * @param {type} name\n * @returns {undefined}\n */\n(function($, window, name) {\n\n\tvar CLASS_SWITCH = 'mui-switch';\n\tvar CLASS_SWITCH_HANDLE = 'mui-switch-handle';\n\tvar CLASS_ACTIVE = 'mui-active';\n\tvar CLASS_DRAGGING = 'mui-dragging';\n\n\tvar CLASS_DISABLED = 'mui-disabled';\n\n\tvar SELECTOR_SWITCH_HANDLE = '.' + CLASS_SWITCH_HANDLE;\n\n\tvar handle = function(event, target) {\n\t\tif (target.classList && target.classList.contains(CLASS_SWITCH)) {\n\t\t\treturn target;\n\t\t}\n\t\treturn false;\n\t};\n\n\t$.registerTarget({\n\t\tname: name,\n\t\tindex: 100,\n\t\thandle: handle,\n\t\ttarget: false\n\t});\n\n\n\tvar Toggle = function(element) {\n\t\tthis.element = element;\n\t\tthis.classList = this.element.classList;\n\t\tthis.handle = this.element.querySelector(SELECTOR_SWITCH_HANDLE);\n\t\tthis.init();\n\t\tthis.initEvent();\n\t};\n\tToggle.prototype.init = function() {\n\t\tthis.toggleWidth = this.element.offsetWidth;\n\t\tthis.handleWidth = this.handle.offsetWidth;\n\t\tthis.handleX = this.toggleWidth - this.handleWidth - 3;\n\t};\n\tToggle.prototype.initEvent = function() {\n\t\tthis.element.addEventListener($.EVENT_START, this);\n\t\tthis.element.addEventListener('drag', this);\n\t\tthis.element.addEventListener('swiperight', this);\n\t\tthis.element.addEventListener($.EVENT_END, this);\n\t\tthis.element.addEventListener($.EVENT_CANCEL, this);\n\n\t};\n\tToggle.prototype.handleEvent = function(e) {\n\t\tif (this.classList.contains(CLASS_DISABLED)) {\n\t\t\treturn;\n\t\t}\n\t\tswitch (e.type) {\n\t\t\tcase $.EVENT_START:\n\t\t\t\tthis.start(e);\n\t\t\t\tbreak;\n\t\t\tcase 'drag':\n\t\t\t\tthis.drag(e);\n\t\t\t\tbreak;\n\t\t\tcase 'swiperight':\n\t\t\t\tthis.swiperight();\n\t\t\t\tbreak;\n\t\t\tcase $.EVENT_END:\n\t\t\tcase $.EVENT_CANCEL:\n\t\t\t\tthis.end(e);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\tToggle.prototype.start = function(e) {\n\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\n\t\tthis.classList.add(CLASS_DRAGGING);\n\t\tif (this.toggleWidth === 0 || this.handleWidth === 0) { //当switch处于隐藏状态时，width为0，需要重新初始化\n\t\t\tthis.init();\n\t\t}\n\t};\n\tToggle.prototype.drag = function(e) {\n\t\tvar detail = e.detail;\n\t\tif (!this.isDragging) {\n\t\t\tif (detail.direction === 'left' || detail.direction === 'right') {\n\t\t\t\tthis.isDragging = true;\n\t\t\t\tthis.lastChanged = undefined;\n\t\t\t\tthis.initialState = this.classList.contains(CLASS_ACTIVE);\n\t\t\t}\n\t\t}\n\t\tif (this.isDragging) {\n\t\t\tthis.setTranslateX(detail.deltaX);\n\t\t\te.stopPropagation();\n\t\t\tdetail.gesture.preventDefault();\n\t\t}\n\t};\n\tToggle.prototype.swiperight = function(e) {\n\t\tif (this.isDragging) {\n\t\t\te.stopPropagation();\n\t\t}\n\t};\n\tToggle.prototype.end = function(e) {\n\t\tthis.classList.remove(CLASS_DRAGGING);\n\t\tif (this.isDragging) {\n\t\t\tthis.isDragging = false;\n\t\t\te.stopPropagation();\n\t\t\t$.trigger(this.element, 'toggle', {\n\t\t\t\tisActive: this.classList.contains(CLASS_ACTIVE)\n\t\t\t});\n\t\t} else {\n\t\t\tthis.toggle();\n\t\t}\n\t};\n\tToggle.prototype.toggle = function(animate) {\n\t\tvar classList = this.classList;\n\t\tif (animate === false) {\n\t\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '0s';\n\t\t} else {\n\t\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\n\t\t}\n\t\tif (classList.contains(CLASS_ACTIVE)) {\n\t\t\tclassList.remove(CLASS_ACTIVE);\n\t\t\tthis.handle.style.webkitTransform = 'translate(0,0)';\n\t\t} else {\n\t\t\tclassList.add(CLASS_ACTIVE);\n\t\t\tthis.handle.style.webkitTransform = 'translate(' + this.handleX + 'px,0)';\n\t\t}\n\t\t$.trigger(this.element, 'toggle', {\n\t\t\tisActive: this.classList.contains(CLASS_ACTIVE)\n\t\t});\n\t};\n\tToggle.prototype.setTranslateX = $.animationFrame(function(x) {\n\t\tif (!this.isDragging) {\n\t\t\treturn;\n\t\t}\n\t\tvar isChanged = false;\n\t\tif ((this.initialState && -x > (this.handleX / 2)) || (!this.initialState && x > (this.handleX / 2))) {\n\t\t\tisChanged = true;\n\t\t}\n\t\tif (this.lastChanged !== isChanged) {\n\t\t\tif (isChanged) {\n\t\t\t\tthis.handle.style.webkitTransform = 'translate(' + (this.initialState ? 0 : this.handleX) + 'px,0)';\n\t\t\t\tthis.classList[this.initialState ? 'remove' : 'add'](CLASS_ACTIVE);\n\t\t\t} else {\n\t\t\t\tthis.handle.style.webkitTransform = 'translate(' + (this.initialState ? this.handleX : 0) + 'px,0)';\n\t\t\t\tthis.classList[this.initialState ? 'add' : 'remove'](CLASS_ACTIVE);\n\t\t\t}\n\t\t\tthis.lastChanged = isChanged;\n\t\t}\n\n\t});\n\n\t$.fn['switch'] = function(options) {\n\t\tvar switchApis = [];\n\t\tthis.each(function() {\n\t\t\tvar switchApi = null;\n\t\t\tvar id = this.getAttribute('data-switch');\n\t\t\tif (!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\t$.data[id] = new Toggle(this);\n\t\t\t\tthis.setAttribute('data-switch', id);\n\t\t\t} else {\n\t\t\t\tswitchApi = $.data[id];\n\t\t\t}\n\t\t\tswitchApis.push(switchApi);\n\t\t});\n\t\treturn switchApis.length > 1 ? switchApis : switchApis[0];\n\t};\n\t$.ready(function() {\n\t\t$('.' + CLASS_SWITCH)['switch']();\n\t});\n})(mui, window, 'toggle');\n/**\n * Tableviews\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n(function($, window, document) {\n\n\tvar CLASS_ACTIVE = 'mui-active';\n\tvar CLASS_SELECTED = 'mui-selected';\n\tvar CLASS_GRID_VIEW = 'mui-grid-view';\n\tvar CLASS_RADIO_VIEW = 'mui-table-view-radio';\n\tvar CLASS_TABLE_VIEW_CELL = 'mui-table-view-cell';\n\tvar CLASS_COLLAPSE_CONTENT = 'mui-collapse-content';\n\tvar CLASS_DISABLED = 'mui-disabled';\n\tvar CLASS_TOGGLE = 'mui-switch';\n\tvar CLASS_BTN = 'mui-btn';\n\n\tvar CLASS_SLIDER_HANDLE = 'mui-slider-handle';\n\tvar CLASS_SLIDER_LEFT = 'mui-slider-left';\n\tvar CLASS_SLIDER_RIGHT = 'mui-slider-right';\n\tvar CLASS_TRANSITIONING = 'mui-transitioning';\n\n\n\tvar SELECTOR_SLIDER_HANDLE = '.' + CLASS_SLIDER_HANDLE;\n\tvar SELECTOR_SLIDER_LEFT = '.' + CLASS_SLIDER_LEFT;\n\tvar SELECTOR_SLIDER_RIGHT = '.' + CLASS_SLIDER_RIGHT;\n\tvar SELECTOR_SELECTED = '.' + CLASS_SELECTED;\n\tvar SELECTOR_BUTTON = '.' + CLASS_BTN;\n\tvar overFactor = 0.8;\n\tvar cell, a;\n\n\tvar isMoved = isOpened = openedActions = progress = false;\n\tvar sliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\n\tvar timer = translateX = lastTranslateX = sliderActionLeftWidth = sliderActionRightWidth = 0;\n\n\n\n\tvar toggleActive = function(isActive) {\n\t\tif (isActive) {\n\t\t\tif (a) {\n\t\t\t\ta.classList.add(CLASS_ACTIVE);\n\t\t\t} else if (cell) {\n\t\t\t\tcell.classList.add(CLASS_ACTIVE);\n\t\t\t}\n\t\t} else {\n\t\t\ttimer && timer.cancel();\n\t\t\tif (a) {\n\t\t\t\ta.classList.remove(CLASS_ACTIVE);\n\t\t\t} else if (cell) {\n\t\t\t\tcell.classList.remove(CLASS_ACTIVE);\n\t\t\t}\n\t\t}\n\t};\n\n\tvar updateTranslate = function() {\n\t\tif (translateX !== lastTranslateX) {\n\t\t\tif (buttonsRight && buttonsRight.length > 0) {\n\t\t\t\tprogress = translateX / sliderActionRightWidth;\n\t\t\t\tif (translateX < -sliderActionRightWidth) {\n\t\t\t\t\ttranslateX = -sliderActionRightWidth - Math.pow(-translateX - sliderActionRightWidth, overFactor);\n\t\t\t\t}\n\t\t\t\tfor (var i = 0, len = buttonsRight.length; i < len; i++) {\n\t\t\t\t\tvar buttonRight = buttonsRight[i];\n\t\t\t\t\tif (typeof buttonRight._buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonRight._buttonOffset = buttonRight.offsetLeft;\n\t\t\t\t\t}\n\t\t\t\t\tbuttonOffset = buttonRight._buttonOffset;\n\t\t\t\t\tsetTranslate(buttonRight, (translateX - buttonOffset * (1 + Math.max(progress, -1))));\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (buttonsLeft && buttonsLeft.length > 0) {\n\t\t\t\tprogress = translateX / sliderActionLeftWidth;\n\t\t\t\tif (translateX > sliderActionLeftWidth) {\n\t\t\t\t\ttranslateX = sliderActionLeftWidth + Math.pow(translateX - sliderActionLeftWidth, overFactor);\n\t\t\t\t}\n\t\t\t\tfor (var i = 0, len = buttonsLeft.length; i < len; i++) {\n\t\t\t\t\tvar buttonLeft = buttonsLeft[i];\n\t\t\t\t\tif (typeof buttonLeft._buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\n\t\t\t\t\t}\n\t\t\t\t\tbuttonOffset = buttonLeft._buttonOffset;\n\t\t\t\t\tif (buttonsLeft.length > 1) {\n\t\t\t\t\t\tbuttonLeft.style.zIndex = buttonsLeft.length - i;\n\t\t\t\t\t}\n\t\t\t\t\tsetTranslate(buttonLeft, (translateX + buttonOffset * (1 - Math.min(progress, 1))));\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetTranslate(sliderHandle, translateX);\n\t\t\tlastTranslateX = translateX;\n\t\t}\n\t\tsliderRequestAnimationFrame = requestAnimationFrame(function() {\n\t\t\tupdateTranslate();\n\t\t});\n\t};\n\tvar setTranslate = function(element, x) {\n\t\tif (element) {\n\t\t\telement.style.webkitTransform = 'translate(' + x + 'px,0)';\n\t\t}\n\t};\n\n\twindow.addEventListener($.EVENT_START, function(event) {\n\t\tif (cell) {\n\t\t\ttoggleActive(false);\n\t\t}\n\t\tcell = a = false;\n\t\tisMoved = isOpened = openedActions = false;\n\t\tvar target = event.target;\n\t\tvar isDisabled = false;\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tif (target.classList) {\n\t\t\t\tvar classList = target.classList;\n\t\t\t\tif ((target.tagName === 'INPUT' && target.type !== 'radio' && target.type !== 'checkbox') || target.tagName === 'BUTTON' || classList.contains(CLASS_TOGGLE) || classList.contains(CLASS_BTN) || classList.contains(CLASS_DISABLED)) {\n\t\t\t\t\tisDisabled = true;\n\t\t\t\t}\n\t\t\t\tif (classList.contains(CLASS_COLLAPSE_CONTENT)) { //collapse content\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (classList.contains(CLASS_TABLE_VIEW_CELL)) {\n\t\t\t\t\tcell = target;\n\t\t\t\t\t//TODO swipe to delete close\n\t\t\t\t\tvar selected = cell.parentNode.querySelector(SELECTOR_SELECTED);\n\t\t\t\t\tif (!cell.parentNode.classList.contains(CLASS_RADIO_VIEW) && selected && selected !== cell) {\n\t\t\t\t\t\t$.swipeoutClose(selected);\n\t\t\t\t\t\tcell = isDisabled = false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!cell.parentNode.classList.contains(CLASS_GRID_VIEW)) {\n\t\t\t\t\t\tvar link = cell.querySelector('a');\n\t\t\t\t\t\tif (link && link.parentNode === cell) { //li>a\n\t\t\t\t\t\t\ta = link;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar handle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\n\t\t\t\t\tif (handle) {\n\t\t\t\t\t\ttoggleEvents(cell);\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t\tif (!isDisabled) {\n\t\t\t\t\t\tif (handle) {\n\t\t\t\t\t\t\tif (timer) {\n\t\t\t\t\t\t\t\ttimer.cancel();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttimer = $.later(function() {\n\t\t\t\t\t\t\t\ttoggleActive(true);\n\t\t\t\t\t\t\t}, 100);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttoggleActive(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\twindow.addEventListener($.EVENT_MOVE, function(event) {\n\t\ttoggleActive(false);\n\t});\n\n\tvar handleEvent = {\n\t\thandleEvent: function(event) {\n\t\t\tswitch (event.type) {\n\t\t\t\tcase 'drag':\n\t\t\t\t\tthis.drag(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis.dragend(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'flick':\n\t\t\t\t\tthis.flick(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'swiperight':\n\t\t\t\t\tthis.swiperight(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'swipeleft':\n\t\t\t\t\tthis.swipeleft(event);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tdrag: function(event) {\n\t\t\tif (!cell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!isMoved) { //init\n\t\t\t\tsliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\n\t\t\t\tsliderHandle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\n\t\t\t\tif (sliderHandle) {\n\t\t\t\t\tsliderActionLeft = cell.querySelector(SELECTOR_SLIDER_LEFT);\n\t\t\t\t\tsliderActionRight = cell.querySelector(SELECTOR_SLIDER_RIGHT);\n\t\t\t\t\tif (sliderActionLeft) {\n\t\t\t\t\t\tsliderActionLeftWidth = sliderActionLeft.offsetWidth;\n\t\t\t\t\t\tbuttonsLeft = sliderActionLeft.querySelectorAll(SELECTOR_BUTTON);\n\t\t\t\t\t}\n\t\t\t\t\tif (sliderActionRight) {\n\t\t\t\t\t\tsliderActionRightWidth = sliderActionRight.offsetWidth;\n\t\t\t\t\t\tbuttonsRight = sliderActionRight.querySelectorAll(SELECTOR_BUTTON);\n\t\t\t\t\t}\n\t\t\t\t\tcell.classList.remove(CLASS_TRANSITIONING);\n\t\t\t\t\tisOpened = cell.classList.contains(CLASS_SELECTED);\n\t\t\t\t\tif (isOpened) {\n\t\t\t\t\t\topenedActions = cell.querySelector(SELECTOR_SLIDER_LEFT + SELECTOR_SELECTED) ? 'left' : 'right';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar detail = event.detail;\n\t\t\tvar direction = detail.direction;\n\t\t\tvar angle = detail.angle;\n\t\t\tif (direction === 'left' && (angle > 150 || angle < -150)) {\n\t\t\t\tif (buttonsRight || (buttonsLeft && isOpened)) { //存在右侧按钮或存在左侧按钮且是已打开状态\n\t\t\t\t\tisMoved = true;\n\t\t\t\t}\n\t\t\t} else if (direction === 'right' && (angle > -30 && angle < 30)) {\n\t\t\t\tif (buttonsLeft || (buttonsRight && isOpened)) { //存在左侧按钮或存在右侧按钮且是已打开状态\n\t\t\t\t\tisMoved = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.detail.gesture.preventDefault();\n\t\t\t\tvar translate = event.detail.deltaX;\n\t\t\t\tif (isOpened) {\n\t\t\t\t\tif (openedActions === 'right') {\n\t\t\t\t\t\ttranslate = translate - sliderActionRightWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttranslate = translate + sliderActionLeftWidth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ((translate > 0 && !buttonsLeft) || (translate < 0 && !buttonsRight)) {\n\t\t\t\t\tif (!isOpened) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttranslate = 0;\n\t\t\t\t}\n\t\t\t\tif (translate < 0) {\n\t\t\t\t\tsliderDirection = 'toLeft';\n\t\t\t\t} else if (translate > 0) {\n\t\t\t\t\tsliderDirection = 'toRight';\n\t\t\t\t} else {\n\t\t\t\t\tif (!sliderDirection) {\n\t\t\t\t\t\tsliderDirection = 'toLeft';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!sliderRequestAnimationFrame) {\n\t\t\t\t\tupdateTranslate();\n\t\t\t\t}\n\t\t\t\ttranslateX = translate;\n\t\t\t}\n\t\t},\n\t\tflick: function(event) {\n\t\t\tif (isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tswipeleft: function(event) {\n\t\t\tif (isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tswiperight: function(event) {\n\t\t\tif (isMoved) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t},\n\t\tdragend: function(event) {\n\t\t\tif (!isMoved) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tevent.stopPropagation();\n\t\t\tif (sliderRequestAnimationFrame) {\n\t\t\t\tcancelAnimationFrame(sliderRequestAnimationFrame);\n\t\t\t\tsliderRequestAnimationFrame = null;\n\t\t\t}\n\t\t\tvar detail = event.detail;\n\t\t\tisMoved = false;\n\t\t\tvar action = 'close';\n\t\t\tvar actionsWidth = sliderDirection === 'toLeft' ? sliderActionRightWidth : sliderActionLeftWidth;\n\t\t\tvar isToggle = detail.swipe || (Math.abs(translateX) > actionsWidth / 2);\n\t\t\tif (isToggle) {\n\t\t\t\tif (!isOpened) {\n\t\t\t\t\taction = 'open';\n\t\t\t\t} else if (detail.direction === 'left' && openedActions === 'right') {\n\t\t\t\t\taction = 'open';\n\t\t\t\t} else if (detail.direction === 'right' && openedActions === 'left') {\n\t\t\t\t\taction = 'open';\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tcell.classList.add(CLASS_TRANSITIONING);\n\t\t\tvar buttons;\n\t\t\tif (action === 'open') {\n\t\t\t\tvar newTranslate = sliderDirection === 'toLeft' ? -actionsWidth : actionsWidth;\n\t\t\t\tsetTranslate(sliderHandle, newTranslate);\n\t\t\t\tbuttons = sliderDirection === 'toLeft' ? buttonsRight : buttonsLeft;\n\t\t\t\tif (typeof buttons !== 'undefined') {\n\t\t\t\t\tvar button = null;\n\t\t\t\t\tfor (var i = 0; i < buttons.length; i++) {\n\t\t\t\t\t\tbutton = buttons[i];\n\t\t\t\t\t\tsetTranslate(button, newTranslate);\n\t\t\t\t\t}\n\t\t\t\t\tbutton.parentNode.classList.add(CLASS_SELECTED);\n\t\t\t\t\tcell.classList.add(CLASS_SELECTED);\n\t\t\t\t\tif (!isOpened) {\n\t\t\t\t\t\t$.trigger(cell, sliderDirection === 'toLeft' ? 'slideleft' : 'slideright');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetTranslate(sliderHandle, 0);\n\t\t\t\tsliderActionLeft && sliderActionLeft.classList.remove(CLASS_SELECTED);\n\t\t\t\tsliderActionRight && sliderActionRight.classList.remove(CLASS_SELECTED);\n\t\t\t\tcell.classList.remove(CLASS_SELECTED);\n\t\t\t}\n\t\t\tvar buttonOffset;\n\t\t\tif (buttonsLeft && buttonsLeft.length > 0 && buttonsLeft !== buttons) {\n\t\t\t\tfor (var i = 0, len = buttonsLeft.length; i < len; i++) {\n\t\t\t\t\tvar buttonLeft = buttonsLeft[i];\n\t\t\t\t\tbuttonOffset = buttonLeft._buttonOffset;\n\t\t\t\t\tif (typeof buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\n\t\t\t\t\t}\n\t\t\t\t\tsetTranslate(buttonLeft, buttonOffset);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (buttonsRight && buttonsRight.length > 0 && buttonsRight !== buttons) {\n\t\t\t\tfor (var i = 0, len = buttonsRight.length; i < len; i++) {\n\t\t\t\t\tvar buttonRight = buttonsRight[i];\n\t\t\t\t\tbuttonOffset = buttonRight._buttonOffset;\n\t\t\t\t\tif (typeof buttonOffset === 'undefined') {\n\t\t\t\t\t\tbuttonRight._buttonOffset = buttonRight.offsetLeft;\n\t\t\t\t\t}\n\t\t\t\t\tsetTranslate(buttonRight, -buttonOffset);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction toggleEvents(element, isRemove) {\n\t\tvar method = !!isRemove ? 'removeEventListener' : 'addEventListener';\n\t\telement[method]('drag', handleEvent);\n\t\telement[method]('dragend', handleEvent);\n\t\telement[method]('swiperight', handleEvent);\n\t\telement[method]('swipeleft', handleEvent);\n\t\telement[method]('flick', handleEvent);\n\t};\n\t/**\n\t * 打开滑动菜单\n\t * @param {Object} el\n\t * @param {Object} direction\n\t */\n\t$.swipeoutOpen = function(el, direction) {\n\t\tif (!el) return;\n\t\tvar classList = el.classList;\n\t\tif (classList.contains(CLASS_SELECTED)) return;\n\t\tif (!direction) {\n\t\t\tif (el.querySelector(SELECTOR_SLIDER_RIGHT)) {\n\t\t\t\tdirection = 'right';\n\t\t\t} else {\n\t\t\t\tdirection = 'left';\n\t\t\t}\n\t\t}\n\t\tvar swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\n\t\tif (!swipeoutAction) return;\n\t\tswipeoutAction.classList.add(CLASS_SELECTED);\n\t\tclassList.add(CLASS_SELECTED);\n\t\tclassList.remove(CLASS_TRANSITIONING);\n\t\tvar buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\n\t\tvar swipeoutWidth = swipeoutAction.offsetWidth;\n\t\tvar translate = (direction === 'right') ? -swipeoutWidth : swipeoutWidth;\n\t\tvar length = buttons.length;\n\t\tvar button;\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tbutton = buttons[i];\n\t\t\tif (direction === 'right') {\n\t\t\t\tsetTranslate(button, -button.offsetLeft);\n\t\t\t} else {\n\t\t\t\tsetTranslate(button, (swipeoutWidth - button.offsetWidth - button.offsetLeft));\n\t\t\t}\n\t\t}\n\t\tclassList.add(CLASS_TRANSITIONING);\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tsetTranslate(buttons[i], translate);\n\t\t}\n\t\tsetTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), translate);\n\t};\n\t/**\n\t * 关闭滑动菜单\n\t * @param {Object} el\n\t */\n\t$.swipeoutClose = function(el) {\n\t\tif (!el) return;\n\t\tvar classList = el.classList;\n\t\tif (!classList.contains(CLASS_SELECTED)) return;\n\t\tvar direction = el.querySelector(SELECTOR_SLIDER_RIGHT + SELECTOR_SELECTED) ? 'right' : 'left';\n\t\tvar swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\n\t\tif (!swipeoutAction) return;\n\t\tswipeoutAction.classList.remove(CLASS_SELECTED);\n\t\tclassList.remove(CLASS_SELECTED);\n\t\tclassList.add(CLASS_TRANSITIONING);\n\t\tvar buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\n\t\tvar swipeoutWidth = swipeoutAction.offsetWidth;\n\t\tvar length = buttons.length;\n\t\tvar button;\n\t\tsetTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), 0);\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tbutton = buttons[i];\n\t\t\tif (direction === 'right') {\n\t\t\t\tsetTranslate(button, (-button.offsetLeft));\n\t\t\t} else {\n\t\t\t\tsetTranslate(button, (swipeoutWidth - button.offsetWidth - button.offsetLeft));\n\t\t\t}\n\t\t}\n\t};\n\n\twindow.addEventListener($.EVENT_END, function(event) { //使用touchend来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\n\t\tif (!cell) {\n\t\t\treturn;\n\t\t}\n\t\ttoggleActive(false);\n\t\tsliderHandle && toggleEvents(cell, true);\n\t});\n\twindow.addEventListener($.EVENT_CANCEL, function(event) { //使用touchcancel来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\n\t\tif (!cell) {\n\t\t\treturn;\n\t\t}\n\t\ttoggleActive(false);\n\t\tsliderHandle && toggleEvents(cell, true);\n\t});\n\tvar radioOrCheckboxClick = function(event) {\n\t\tvar type = event.target && event.target.type || '';\n\t\tif (type === 'radio' || type === 'checkbox') {\n\t\t\treturn;\n\t\t}\n\t\tvar classList = cell.classList;\n\t\tif (classList.contains('mui-radio')) {\n\t\t\tvar input = cell.querySelector('input[type=radio]');\n\t\t\tif (input) {\n\t\t\t\t//\t\t\t\tinput.click();\n\t\t\t\tif (!input.disabled && !input.readOnly) {\n\t\t\t\t\tinput.checked = !input.checked;\n\t\t\t\t\t$.trigger(input, 'change');\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (classList.contains('mui-checkbox')) {\n\t\t\tvar input = cell.querySelector('input[type=checkbox]');\n\t\t\tif (input) {\n\t\t\t\t//\t\t\t\tinput.click();\n\t\t\t\tif (!input.disabled && !input.readOnly) {\n\t\t\t\t\tinput.checked = !input.checked;\n\t\t\t\t\t$.trigger(input, 'change');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t//fixed hashchange(android)\n\twindow.addEventListener($.EVENT_CLICK, function(e) {\n\t\tif (cell && cell.classList.contains('mui-collapse')) {\n\t\t\te.preventDefault();\n\t\t}\n\t});\n\twindow.addEventListener('doubletap', function(event) {\n\t\tif (cell) {\n\t\t\tradioOrCheckboxClick(event);\n\t\t}\n\t});\n\tvar preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\n\twindow.addEventListener('tap', function(event) {\n\t\tif (!cell) {\n\t\t\treturn;\n\t\t}\n\t\tvar isExpand = false;\n\t\tvar classList = cell.classList;\n\t\tvar ul = cell.parentNode;\n\t\tif (ul && ul.classList.contains(CLASS_RADIO_VIEW)) {\n\t\t\tif (classList.contains(CLASS_SELECTED)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar selected = ul.querySelector('li' + SELECTOR_SELECTED);\n\t\t\tif (selected) {\n\t\t\t\tselected.classList.remove(CLASS_SELECTED);\n\t\t\t}\n\t\t\tclassList.add(CLASS_SELECTED);\n\t\t\t$.trigger(cell, 'selected', {\n\t\t\t\tel: cell\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif (classList.contains('mui-collapse') && !cell.parentNode.classList.contains('mui-unfold')) {\n\t\t\tif (!preventDefaultException.test(event.target.tagName)) {\n\t\t\t\tevent.detail.gesture.preventDefault();\n\t\t\t}\n\n\t\t\tif (!classList.contains(CLASS_ACTIVE)) { //展开时,需要收缩其他同类\n\t\t\t\tvar collapse = cell.parentNode.querySelector('.mui-collapse.mui-active');\n\t\t\t\tif (collapse) {\n\t\t\t\t\tcollapse.classList.remove(CLASS_ACTIVE);\n\t\t\t\t}\n\t\t\t\tisExpand = true;\n\t\t\t}\n\t\t\tclassList.toggle(CLASS_ACTIVE);\n\t\t\tif (isExpand) {\n\t\t\t\t//触发展开事件\n\t\t\t\t$.trigger(cell, 'expand');\n\n\t\t\t\t//scroll\n\t\t\t\t//暂不滚动\n\t\t\t\t// var offsetTop = $.offset(cell).top;\n\t\t\t\t// var scrollTop = document.body.scrollTop;\n\t\t\t\t// var height = window.innerHeight;\n\t\t\t\t// var offsetHeight = cell.offsetHeight;\n\t\t\t\t// var cellHeight = (offsetTop - scrollTop + offsetHeight);\n\t\t\t\t// if (offsetHeight > height) {\n\t\t\t\t// \t$.scrollTo(offsetTop, 300);\n\t\t\t\t// } else if (cellHeight > height) {\n\t\t\t\t// \t$.scrollTo(cellHeight - height + scrollTop, 300);\n\t\t\t\t// }\n\t\t\t}\n\t\t} else {\n\t\t\tradioOrCheckboxClick(event);\n\t\t}\n\t});\n})(mui, window, document);\n(function($, window) {\n\t/**\n\t * 警告消息框\n\t */\n\t$.alert = function(message, title, btnValue, callback) {\n\t\tif ($.os.plus) {\n\t\t\tif (typeof message === 'undefined') {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tif (typeof title === 'function') {\n\t\t\t\t\tcallback = title;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnValue = '确定';\n\t\t\t\t} else if (typeof btnValue === 'function') {\n\t\t\t\t\tcallback = btnValue;\n\t\t\t\t\tbtnValue = null;\n\t\t\t\t}\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tplus.nativeUI.alert(message, callback, title, btnValue);\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\t\t\t//TODO H5版本\n\t\t\twindow.alert(message);\n\t\t}\n\t};\n\n})(mui, window);\n(function($, window) {\n\t/**\n\t * 确认消息框\n\t */\n\t$.confirm = function(message, title, btnArray, callback) {\n\t\tif ($.os.plus) {\n\t\t\tif (typeof message === 'undefined') {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tif (typeof title === 'function') {\n\t\t\t\t\tcallback = title;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t} else if (typeof btnArray === 'function') {\n\t\t\t\t\tcallback = btnArray;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t}\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tplus.nativeUI.confirm(message, callback, title, btnArray);\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\t\t\t//H5版本，0为确认，1为取消\n\t\t\tif (window.confirm(message)) {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 0\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 1\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n})(mui, window);\n(function($, window) {\n\t/**\n\t * 输入对话框\n\t */\n\t$.prompt = function(text, defaultText, title, btnArray, callback) {\n\t\tif ($.os.plus) {\n\t\t\tif (typeof message === 'undefined') {\n\t\t\t\treturn;\n\t\t\t} else {\n\n\t\t\t\tif (typeof defaultText === 'function') {\n\t\t\t\t\tcallback = defaultText;\n\t\t\t\t\tdefaultText = null;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t} else if (typeof title === 'function') {\n\t\t\t\t\tcallback = title;\n\t\t\t\t\ttitle = null;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t} else if (typeof btnArray === 'function') {\n\t\t\t\t\tcallback = btnArray;\n\t\t\t\t\tbtnArray = null;\n\t\t\t\t}\n\t\t\t\t$.plusReady(function() {\n\t\t\t\t\tplus.nativeUI.prompt(text, callback, title, defaultText, btnArray);\n\t\t\t\t});\n\t\t\t}\n\n\t\t} else {\n\t\t\t//H5版本(确认index为0，取消index为1)\n\t\t\tvar result = window.prompt(text);\n\t\t\tif (result) {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tvalue: result\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcallback({\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tvalue: ''\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n})(mui, window);\n(function($, window) {\n\tvar CLASS_ACTIVE = 'mui-active';\n\t/**\n\t * 自动消失提示框\n\t */\n\t$.toast = function(message,options) {\n\t\tvar durations = {\n\t\t    'long': 3500,\n\t\t    'short': 2000\n\t\t};\n\n\t\t//计算显示时间\n\t\t options = $.extend({\n\t        duration: 'short'\n\t    }, options || {});\n\n\n\t\tif ($.os.plus && options.type !== 'div') {\n\t\t\t//默认显示在底部；\n\t\t\t$.plusReady(function() {\n\t\t\t\tplus.nativeUI.toast(message, {\n\t\t\t\t\tverticalAlign: 'bottom',\n\t\t\t\t\tduration:options.duration\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tif (typeof options.duration === 'number') {\n\t\t        duration = options.duration>0 ? options.duration:durations['short'];\n\t\t    } else {\n\t\t        duration = durations[options.duration];\n\t\t    }\n\t\t    if (!duration) {\n\t\t        duration = durations['short'];\n\t\t    }\n\t\t\tvar toast = document.createElement('div');\n\t\t\ttoast.classList.add('mui-toast-container');\n\t\t\ttoast.innerHTML = '<div class=\"' + 'mui-toast-message' + '\">' + message + '</div>';\n\t\t\ttoast.addEventListener('webkitTransitionEnd', function() {\n\t\t\t\tif (!toast.classList.contains(CLASS_ACTIVE)) {\n\t\t\t\t\ttoast.parentNode.removeChild(toast);\n\t\t\t\t\ttoast = null;\n\t\t\t\t}\n\t\t\t});\n\t\t\t//点击则自动消失\n\t\t\ttoast.addEventListener('click', function() {\n\t\t        toast.parentNode.removeChild(toast);\n\t\t        toast = null;\n\t\t    });\n\t\t\tdocument.body.appendChild(toast);\n\t\t\ttoast.offsetHeight;\n\t\t\ttoast.classList.add(CLASS_ACTIVE);\n\t\t\tsetTimeout(function() {\n\t\t\t\ttoast && toast.classList.remove(CLASS_ACTIVE);\n\t\t\t}, duration);\n\t\t\t\n\t\t\treturn {\n\t\t        isVisible: function() {return !!toast;}\n\t\t    }\n\t\t}   \n\t};\n\n})(mui, window);\n/**\n * Popup(alert,confirm,prompt)  \n * @param {Object} $\n * @param {Object} window\n * @param {Object} document\n */\n(function($, window, document) {\n    var CLASS_POPUP = 'mui-popup';\n    var CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\n    var CLASS_POPUP_IN = 'mui-popup-in';\n    var CLASS_POPUP_OUT = 'mui-popup-out';\n    var CLASS_POPUP_INNER = 'mui-popup-inner';\n    var CLASS_POPUP_TITLE = 'mui-popup-title';\n    var CLASS_POPUP_TEXT = 'mui-popup-text';\n    var CLASS_POPUP_INPUT = 'mui-popup-input';\n    var CLASS_POPUP_BUTTONS = 'mui-popup-buttons';\n    var CLASS_POPUP_BUTTON = 'mui-popup-button';\n    var CLASS_POPUP_BUTTON_BOLD = 'mui-popup-button-bold';\n    var CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\n    var CLASS_ACTIVE = 'mui-active';\n\n    var popupStack = [];\n    var backdrop = (function() {\n        var element = document.createElement('div');\n        element.classList.add(CLASS_POPUP_BACKDROP);\n        element.addEventListener($.EVENT_MOVE, $.preventDefault);\n        element.addEventListener('webkitTransitionEnd', function() {\n            if (!this.classList.contains(CLASS_ACTIVE)) {\n                element.parentNode && element.parentNode.removeChild(element);\n            }\n        });\n        return element;\n    }());\n\n    var createInput = function(placeholder) {\n        return '<div class=\"' + CLASS_POPUP_INPUT + '\"><input type=\"text\" autofocus placeholder=\"' + (placeholder || '') + '\"/></div>';\n    };\n    var createInner = function(message, title, extra) {\n        return '<div class=\"' + CLASS_POPUP_INNER + '\"><div class=\"' + CLASS_POPUP_TITLE + '\">' + title + '</div><div class=\"' + CLASS_POPUP_TEXT + '\">' + message.replace(/\\r\\n/g, \"<br/>\").replace(/\\n/g, \"<br/>\") + '</div>' + (extra || '') + '</div>';\n    };\n    var createButtons = function(btnArray) {\n        var length = btnArray.length;\n        var btns = [];\n        for (var i = 0; i < length; i++) {\n            btns.push('<span class=\"' + CLASS_POPUP_BUTTON + (i === length - 1 ? (' ' + CLASS_POPUP_BUTTON_BOLD) : '') + '\">' + btnArray[i] + '</span>');\n        }\n        return '<div class=\"' + CLASS_POPUP_BUTTONS + '\">' + btns.join('') + '</div>';\n    };\n\n    var createPopup = function(html, callback) {\n        var popupElement = document.createElement('div');\n        popupElement.className = CLASS_POPUP;\n        popupElement.innerHTML = html;\n        var removePopupElement = function() {\n            popupElement.parentNode && popupElement.parentNode.removeChild(popupElement);\n            popupElement = null;\n        };\n        popupElement.addEventListener($.EVENT_MOVE, $.preventDefault);\n        popupElement.addEventListener('webkitTransitionEnd', function(e) {\n            if (popupElement && e.target === popupElement && popupElement.classList.contains(CLASS_POPUP_OUT)) {\n                removePopupElement();\n            }\n        });\n        popupElement.style.display = 'block';\n        document.body.appendChild(popupElement);\n        popupElement.offsetHeight;\n        popupElement.classList.add(CLASS_POPUP_IN);\n\n        if (!backdrop.classList.contains(CLASS_ACTIVE)) {\n            backdrop.style.display = 'block';\n            document.body.appendChild(backdrop);\n            backdrop.offsetHeight;\n            backdrop.classList.add(CLASS_ACTIVE);\n        }\n        var btns = $.qsa('.' + CLASS_POPUP_BUTTON, popupElement);\n        var input = popupElement.querySelector('.' + CLASS_POPUP_INPUT + ' input');\n        var popup = {\n            element: popupElement,\n            close: function(index, animate) {\n                if (popupElement) {\n                    var result = callback && callback({\n                        index: index || 0,\n                        value: input && input.value || ''\n                    });\n                    if (result === false) { //返回false则不关闭当前popup\n                        return;\n                    }\n                    if (animate !== false) {\n                        popupElement.classList.remove(CLASS_POPUP_IN);\n                        popupElement.classList.add(CLASS_POPUP_OUT);\n                    } else {\n                        removePopupElement();\n                    }\n                    popupStack.pop();\n                    //如果还有其他popup，则不remove backdrop\n                    if (popupStack.length) {\n                        popupStack[popupStack.length - 1]['show'](animate);\n                    } else {\n                        backdrop.classList.remove(CLASS_ACTIVE);\n                    }\n                }\n            }\n        };\n        var handleEvent = function(e) {\n            popup.close(btns.indexOf(e.target));\n        };\n        $(popupElement).on('tap', '.' + CLASS_POPUP_BUTTON, handleEvent);\n        if (popupStack.length) {\n            popupStack[popupStack.length - 1]['hide']();\n        }\n        popupStack.push({\n            close: popup.close,\n            show: function(animate) {\n                popupElement.style.display = 'block';\n                popupElement.offsetHeight;\n                popupElement.classList.add(CLASS_POPUP_IN);\n            },\n            hide: function() {\n                popupElement.style.display = 'none';\n                popupElement.classList.remove(CLASS_POPUP_IN);\n            }\n        });\n        return popup;\n    };\n    var createAlert = function(message, title, btnValue, callback, type) {\n        if (typeof message === 'undefined') {\n            return;\n        } else {\n            if (typeof title === 'function') {\n                callback = title;\n                type = btnValue;\n                title = null;\n                btnValue = null;\n            } else if (typeof btnValue === 'function') {\n                type = callback;\n                callback = btnValue;\n                btnValue = null;\n            }\n        }\n        if (!$.os.plus || type === 'div') {\n            return createPopup(createInner(message, title || '提示') + createButtons([btnValue || '确定']), callback);\n        }\n        return plus.nativeUI.alert(message, callback, title || '提示', btnValue || '确定');\n    };\n    var createConfirm = function(message, title, btnArray, callback, type) {\n        if (typeof message === 'undefined') {\n            return;\n        } else {\n            if (typeof title === 'function') {\n                callback = title;\n                type = btnArray;\n                title = null;\n                btnArray = null;\n            } else if (typeof btnArray === 'function') {\n                type = callback;\n                callback = btnArray;\n                btnArray = null;\n            }\n        }\n        if (!$.os.plus || type === 'div') {\n            return createPopup(createInner(message, title || '提示') + createButtons(btnArray || ['取消', '确认']), callback);\n        }\n        return plus.nativeUI.confirm(message, callback, title, btnArray || ['取消', '确认']);\n    };\n    var createPrompt = function(message, placeholder, title, btnArray, callback, type) {\n        if (typeof message === 'undefined') {\n            return;\n        } else {\n            if (typeof placeholder === 'function') {\n                callback = placeholder;\n                type = title;\n                placeholder = null;\n                title = null;\n                btnArray = null;\n            } else if (typeof title === 'function') {\n                callback = title;\n                type = btnArray;\n                title = null;\n                btnArray = null;\n            } else if (typeof btnArray === 'function') {\n                type = callback;\n                callback = btnArray;\n                btnArray = null;\n            }\n        }\n        if (!$.os.plus || type === 'div') {\n            return createPopup(createInner(message, title || '提示', createInput(placeholder)) + createButtons(btnArray || ['取消', '确认']), callback);\n        }\n        return plus.nativeUI.prompt(message, callback, title || '提示', placeholder, btnArray || ['取消', '确认']);\n    };\n    var closePopup = function() {\n        if (popupStack.length) {\n            popupStack[popupStack.length - 1]['close']();\n            return true;\n        } else {\n            return false;\n        }\n    };\n    var closePopups = function() {\n        while (popupStack.length) {\n            popupStack[popupStack.length - 1]['close']();\n        }\n    };\n\n    $.closePopup = closePopup;\n    $.closePopups = closePopups;\n    $.alert = createAlert;\n    $.confirm = createConfirm;\n    $.prompt = createPrompt;\n})(mui, window, document);\n(function($, document) {\n\tvar CLASS_PROGRESSBAR = 'mui-progressbar';\n\tvar CLASS_PROGRESSBAR_IN = 'mui-progressbar-in';\n\tvar CLASS_PROGRESSBAR_OUT = 'mui-progressbar-out';\n\tvar CLASS_PROGRESSBAR_INFINITE = 'mui-progressbar-infinite';\n\n\tvar SELECTOR_PROGRESSBAR = '.mui-progressbar';\n\n\tvar _findProgressbar = function(container) {\n\t\tcontainer = $(container || 'body');\n\t\tif (container.length === 0) return;\n\t\tcontainer = container[0];\n\t\tif (container.classList.contains(CLASS_PROGRESSBAR)) {\n\t\t\treturn container;\n\t\t}\n\t\tvar progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR);\n\t\tif (progressbars) {\n\t\t\tfor (var i = 0, len = progressbars.length; i < len; i++) {\n\t\t\t\tvar progressbar = progressbars[i];\n\t\t\t\tif (progressbar.parentNode === container) {\n\t\t\t\t\treturn progressbar;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t/**\n\t * 创建并显示进度条 \n\t * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\n\t * @param {Object} progress 可选，undefined表示循环，数字表示具体进度\n\t * @param {Object} color 可选，指定颜色样式(目前暂未提供实际样式，可暂时不暴露此参数)\n\t */\n\tvar showProgressbar = function(container, progress, color) {\n\t\tif (typeof container === 'number') {\n\t\t\tcolor = progress;\n\t\t\tprogress = container;\n\t\t\tcontainer = 'body';\n\t\t}\n\t\tcontainer = $(container || 'body');\n\t\tif (container.length === 0) return;\n\t\tcontainer = container[0];\n\t\tvar progressbar;\n\t\tif (container.classList.contains(CLASS_PROGRESSBAR)) {\n\t\t\tprogressbar = container;\n\t\t} else {\n\t\t\tvar progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR + ':not(.' + CLASS_PROGRESSBAR_OUT + ')');\n\t\t\tif (progressbars) {\n\t\t\t\tfor (var i = 0, len = progressbars.length; i < len; i++) {\n\t\t\t\t\tvar _progressbar = progressbars[i];\n\t\t\t\t\tif (_progressbar.parentNode === container) {\n\t\t\t\t\t\tprogressbar = _progressbar;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!progressbar) {\n\t\t\t\tprogressbar = document.createElement('span');\n\t\t\t\tprogressbar.className = CLASS_PROGRESSBAR + ' ' + CLASS_PROGRESSBAR_IN + (typeof progress !== 'undefined' ? '' : (' ' + CLASS_PROGRESSBAR_INFINITE)) + (color ? (' ' + CLASS_PROGRESSBAR + '-' + color) : '');\n\t\t\t\tif (typeof progress !== 'undefined') {\n\t\t\t\t\tprogressbar.innerHTML = '<span></span>';\n\t\t\t\t}\n\t\t\t\tcontainer.appendChild(progressbar);\n\t\t\t} else {\n\t\t\t\tprogressbar.classList.add(CLASS_PROGRESSBAR_IN);\n\t\t\t}\n\t\t}\n\t\tif (progress) setProgressbar(container, progress);\n\t\treturn progressbar;\n\t};\n\t/**\n\t * 关闭进度条 \n\t * @param {Object} container 可选，默认body，支持selector,DOM Node,mui wrapper\n\t */\n\tvar hideProgressbar = function(container) {\n\t\tvar progressbar = _findProgressbar(container);\n\t\tif (!progressbar) {\n\t\t\treturn;\n\t\t}\n\t\tvar classList = progressbar.classList;\n\t\tif (!classList.contains(CLASS_PROGRESSBAR_IN) || classList.contains(CLASS_PROGRESSBAR_OUT)) {\n\t\t\treturn;\n\t\t}\n\t\tclassList.remove(CLASS_PROGRESSBAR_IN);\n\t\tclassList.add(CLASS_PROGRESSBAR_OUT);\n\t\tprogressbar.addEventListener('webkitAnimationEnd', function() {\n\t\t\tprogressbar.parentNode && progressbar.parentNode.removeChild(progressbar);\n\t\t\tprogressbar = null;\n\t\t});\n\t\treturn;\n\t};\n\t/**\n\t * 设置指定进度条进度 \n\t * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\n\t * @param {Object} progress 可选，默认0 取值范围[0-100]\n\t * @param {Object} speed 进度条动画时间\n\t */\n\tvar setProgressbar = function(container, progress, speed) {\n\t\tif (typeof container === 'number') {\n\t\t\tspeed = progress;\n\t\t\tprogress = container;\n\t\t\tcontainer = false;\n\t\t}\n\t\tvar progressbar = _findProgressbar(container);\n\t\tif (!progressbar || progressbar.classList.contains(CLASS_PROGRESSBAR_INFINITE)) {\n\t\t\treturn;\n\t\t}\n\t\tif (progress) progress = Math.min(Math.max(progress, 0), 100);\n\t\tprogressbar.offsetHeight;\n\t\tvar span = progressbar.querySelector('span');\n\t\tif (span) {\n\t\t\tvar style = span.style;\n\t\t\tstyle.webkitTransform = 'translate3d(' + (-100 + progress) + '%,0,0)';\n\t\t\tif (typeof speed !== 'undefined') {\n\t\t\t\tstyle.webkitTransitionDuration = speed + 'ms';\n\t\t\t} else {\n\t\t\t\tstyle.webkitTransitionDuration = '';\n\t\t\t}\n\t\t}\n\t\treturn progressbar;\n\t};\n\t$.fn.progressbar = function(options) {\n\t\tvar progressbarApis = [];\n\t\toptions = options || {};\n\t\tthis.each(function() {\n\t\t\tvar self = this;\n\t\t\tvar progressbarApi = self.mui_plugin_progressbar;\n\t\t\tif (!progressbarApi) {\n\t\t\t\tself.mui_plugin_progressbar = progressbarApi = {\n\t\t\t\t\toptions: options,\n\t\t\t\t\tsetOptions: function(options) {\n\t\t\t\t\t\tthis.options = options;\n\t\t\t\t\t},\n\t\t\t\t\tshow: function() {\n\t\t\t\t\t\treturn showProgressbar(self, this.options.progress, this.options.color);\n\t\t\t\t\t},\n\t\t\t\t\tsetProgress: function(progress) {\n\t\t\t\t\t\treturn setProgressbar(self, progress);\n\t\t\t\t\t},\n\t\t\t\t\thide: function() {\n\t\t\t\t\t\treturn hideProgressbar(self);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else if (options) {\n\t\t\t\tprogressbarApi.setOptions(options);\n\t\t\t}\n\t\t\tprogressbarApis.push(progressbarApi);\n\t\t});\n\t\treturn progressbarApis.length === 1 ? progressbarApis[0] : progressbarApis;\n\t};\n\t//\t$.setProgressbar = setProgressbar;\n\t//\t$.showProgressbar = showProgressbar;\n\t//\t$.hideProgressbar = hideProgressbar;\n})(mui, document);\n/**\n * Input(TODO resize)\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n(function($, window, document) {\n\tvar CLASS_ICON = 'mui-icon';\n\tvar CLASS_ICON_CLEAR = 'mui-icon-clear';\n\tvar CLASS_ICON_SPEECH = 'mui-icon-speech';\n\tvar CLASS_ICON_SEARCH = 'mui-icon-search';\n\tvar CLASS_ICON_PASSWORD = 'mui-icon-eye';\n\tvar CLASS_INPUT_ROW = 'mui-input-row';\n\tvar CLASS_PLACEHOLDER = 'mui-placeholder';\n\tvar CLASS_TOOLTIP = 'mui-tooltip';\n\tvar CLASS_HIDDEN = 'mui-hidden';\n\tvar CLASS_FOCUSIN = 'mui-focusin';\n\tvar SELECTOR_ICON_CLOSE = '.' + CLASS_ICON_CLEAR;\n\tvar SELECTOR_ICON_SPEECH = '.' + CLASS_ICON_SPEECH;\n\tvar SELECTOR_ICON_PASSWORD = '.' + CLASS_ICON_PASSWORD;\n\tvar SELECTOR_PLACEHOLDER = '.' + CLASS_PLACEHOLDER;\n\tvar SELECTOR_TOOLTIP = '.' + CLASS_TOOLTIP;\n\n\tvar findRow = function(target) {\n\t\tfor (; target && target !== document; target = target.parentNode) {\n\t\t\tif (target.classList && target.classList.contains(CLASS_INPUT_ROW)) {\n\t\t\t\treturn target;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\tvar Input = function(element, options) {\n\t\tthis.element = element;\n\t\tthis.options = options || {\n\t\t\tactions: 'clear'\n\t\t};\n\t\tif (~this.options.actions.indexOf('slider')) { //slider\n\t\t\tthis.sliderActionClass = CLASS_TOOLTIP + ' ' + CLASS_HIDDEN;\n\t\t\tthis.sliderActionSelector = SELECTOR_TOOLTIP;\n\t\t} else { //clear,speech,search\n\t\t\tif (~this.options.actions.indexOf('clear')) {\n\t\t\t\tthis.clearActionClass = CLASS_ICON + ' ' + CLASS_ICON_CLEAR + ' ' + CLASS_HIDDEN;\n\t\t\t\tthis.clearActionSelector = SELECTOR_ICON_CLOSE;\n\t\t\t}\n\t\t\tif (~this.options.actions.indexOf('speech')) { //only for 5+\n\t\t\t\tthis.speechActionClass = CLASS_ICON + ' ' + CLASS_ICON_SPEECH;\n\t\t\t\tthis.speechActionSelector = SELECTOR_ICON_SPEECH;\n\t\t\t}\n\t\t\tif (~this.options.actions.indexOf('search')) {\n\t\t\t\tthis.searchActionClass = CLASS_PLACEHOLDER;\n\t\t\t\tthis.searchActionSelector = SELECTOR_PLACEHOLDER;\n\t\t\t}\n\t\t\tif (~this.options.actions.indexOf('password')) {\n\t\t\t\tthis.passwordActionClass = CLASS_ICON + ' ' + CLASS_ICON_PASSWORD;\n\t\t\t\tthis.passwordActionSelector = SELECTOR_ICON_PASSWORD;\n\t\t\t}\n\t\t}\n\t\tthis.init();\n\t};\n\tInput.prototype.init = function() {\n\t\tthis.initAction();\n\t\tthis.initElementEvent();\n\t};\n\tInput.prototype.initAction = function() {\n\t\tvar self = this;\n\n\t\tvar row = self.element.parentNode;\n\t\tif (row) {\n\t\t\tif (self.sliderActionClass) {\n\t\t\t\tself.sliderAction = self.createAction(row, self.sliderActionClass, self.sliderActionSelector);\n\t\t\t} else {\n\t\t\t\tif (self.searchActionClass) {\n\t\t\t\t\tself.searchAction = self.createAction(row, self.searchActionClass, self.searchActionSelector);\n\t\t\t\t\tself.searchAction.addEventListener('tap', function(e) {\n\t\t\t\t\t\t$.focus(self.element);\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (self.speechActionClass) {\n\t\t\t\t\tself.speechAction = self.createAction(row, self.speechActionClass, self.speechActionSelector);\n\t\t\t\t\tself.speechAction.addEventListener('click', $.stopPropagation);\n\t\t\t\t\tself.speechAction.addEventListener('tap', function(event) {\n\t\t\t\t\t\tself.speechActionClick(event);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (self.clearActionClass) {\n\t\t\t\t\tself.clearAction = self.createAction(row, self.clearActionClass, self.clearActionSelector);\n\t\t\t\t\tself.clearAction.addEventListener('tap', function(event) {\n\t\t\t\t\t\tself.clearActionClick(event);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (self.passwordActionClass) {\n\t\t\t\t\tself.passwordAction = self.createAction(row, self.passwordActionClass, self.passwordActionSelector);\n\t\t\t\t\tself.passwordAction.addEventListener('tap', function(event) {\n\t\t\t\t\t\tself.passwordActionClick(event);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tInput.prototype.createAction = function(row, actionClass, actionSelector) {\n\t\tvar action = row.querySelector(actionSelector);\n\t\tif (!action) {\n\t\t\tvar action = document.createElement('span');\n\t\t\taction.className = actionClass;\n\t\t\tif (actionClass === this.searchActionClass) {\n\t\t\t\taction.innerHTML = '<span class=\"' + CLASS_ICON + ' ' + CLASS_ICON_SEARCH + '\"></span><span>' + this.element.getAttribute('placeholder') + '</span>';\n\t\t\t\tthis.element.setAttribute('placeholder', '');\n\t\t\t\tif (this.element.value.trim()) {\n\t\t\t\t\trow.classList.add('mui-active');\n\t\t\t\t}\n\t\t\t}\n\t\t\trow.insertBefore(action, this.element.nextSibling);\n\t\t}\n\t\treturn action;\n\t};\n\tInput.prototype.initElementEvent = function() {\n\t\tvar element = this.element;\n\n\t\tif (this.sliderActionClass) {\n\t\t\tvar tooltip = this.sliderAction;\n\t\t\tvar timer = null;\n\t\t\tvar showTip = function() { //每次重新计算是因为控件可能被隐藏，初始化时计算是不正确的\n\t\t\t\ttooltip.classList.remove(CLASS_HIDDEN);\n\t\t\t\tvar offsetLeft = element.offsetLeft;\n\t\t\t\tvar width = element.offsetWidth - 28;\n\t\t\t\tvar tooltipWidth = tooltip.offsetWidth;\n\t\t\t\tvar distince = Math.abs(element.max - element.min);\n\t\t\t\tvar scaleWidth = (width / distince) * Math.abs(element.value - element.min);\n\t\t\t\ttooltip.style.left = (14 + offsetLeft + scaleWidth - tooltipWidth / 2) + 'px';\n\t\t\t\ttooltip.innerText = element.value;\n\t\t\t\tif (timer) {\n\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t}\n\t\t\t\ttimer = setTimeout(function() {\n\t\t\t\t\ttooltip.classList.add(CLASS_HIDDEN);\n\t\t\t\t}, 1000);\n\t\t\t};\n\t\t\telement.addEventListener('input', showTip);\n\t\t\telement.addEventListener('tap', showTip);\n\t\t\telement.addEventListener($.EVENT_MOVE, function(e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t} else {\n\t\t\tif (this.clearActionClass) {\n\t\t\t\tvar action = this.clearAction;\n\t\t\t\tif (!action) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$.each(['keyup', 'change', 'input', 'focus', 'cut', 'paste'], function(index, type) {\n\t\t\t\t\t(function(type) {\n\t\t\t\t\t\telement.addEventListener(type, function() {\n\t\t\t\t\t\t\taction.classList[element.value.trim() ? 'remove' : 'add'](CLASS_HIDDEN);\n\t\t\t\t\t\t});\n\t\t\t\t\t})(type);\n\t\t\t\t});\n\t\t\t\telement.addEventListener('blur', function() {\n\t\t\t\t\taction.classList.add(CLASS_HIDDEN);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.searchActionClass) {\n\t\t\t\telement.addEventListener('focus', function() {\n\t\t\t\t\telement.parentNode.classList.add('mui-active');\n\t\t\t\t});\n\t\t\t\telement.addEventListener('blur', function() {\n\t\t\t\t\tif (!element.value.trim()) {\n\t\t\t\t\t\telement.parentNode.classList.remove('mui-active');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\tInput.prototype.setPlaceholder = function(text) {\n\t\tif (this.searchActionClass) {\n\t\t\tvar placeholder = this.element.parentNode.querySelector(SELECTOR_PLACEHOLDER);\n\t\t\tplaceholder && (placeholder.getElementsByTagName('span')[1].innerText = text);\n\t\t} else {\n\t\t\tthis.element.setAttribute('placeholder', text);\n\t\t}\n\t};\n\tInput.prototype.passwordActionClick = function(event) {\n\t\tif (this.element.type === 'text') {\n\t\t\tthis.element.type = 'password';\n\t\t} else {\n\t\t\tthis.element.type = 'text';\n\t\t}\n\t\tthis.passwordAction.classList.toggle('mui-active');\n\t\tevent.preventDefault();\n\t};\n\tInput.prototype.clearActionClick = function(event) {\n\t\tvar self = this;\n\t\tself.element.value = '';\n\t\t$.focus(self.element);\n\t\tself.clearAction.classList.add(CLASS_HIDDEN);\n\t\tevent.preventDefault();\n\t};\n\tInput.prototype.speechActionClick = function(event) {\n\t\tif (window.plus) {\n\t\t\tvar self = this;\n\t\t\tvar oldValue = self.element.value;\n\t\t\tself.element.value = '';\n\t\t\tdocument.body.classList.add(CLASS_FOCUSIN);\n\t\t\tplus.speech.startRecognize({\n\t\t\t\tengine: 'iFly'\n\t\t\t}, function(s) {\n\t\t\t\tself.element.value += s;\n\t\t\t\t$.focus(self.element);\n\t\t\t\tplus.speech.stopRecognize();\n\t\t\t\t$.trigger(self.element, 'recognized', {\n\t\t\t\t\tvalue: self.element.value\n\t\t\t\t});\n\t\t\t\tif (oldValue !== self.element.value) {\n\t\t\t\t\t$.trigger(self.element, 'change');\n\t\t\t\t\t$.trigger(self.element, 'input');\n\t\t\t\t}\n\t\t\t\t// document.body.classList.remove(CLASS_FOCUSIN);\n\t\t\t}, function(e) {\n\t\t\t\tdocument.body.classList.remove(CLASS_FOCUSIN);\n\t\t\t});\n\t\t} else {\n\t\t\talert('only for 5+');\n\t\t}\n\t\tevent.preventDefault();\n\t};\n\t$.fn.input = function(options) {\n\t\tvar inputApis = [];\n\t\tthis.each(function() {\n\t\t\tvar inputApi = null;\n\t\t\tvar actions = [];\n\t\t\tvar row = findRow(this.parentNode);\n\t\t\tif (this.type === 'range' && row.classList.contains('mui-input-range')) {\n\t\t\t\tactions.push('slider');\n\t\t\t} else {\n\t\t\t\tvar classList = this.classList;\n\t\t\t\tif (classList.contains('mui-input-clear')) {\n\t\t\t\t\tactions.push('clear');\n\t\t\t\t}\n\t\t\t\tif (!($.os.android && $.os.stream) && classList.contains('mui-input-speech')) {\n\t\t\t\t\tactions.push('speech');\n\t\t\t\t}\n\t\t\t\tif (classList.contains('mui-input-password')) {\n\t\t\t\t\tactions.push('password');\n\t\t\t\t}\n\t\t\t\tif (this.type === 'search' && row.classList.contains('mui-search')) {\n\t\t\t\t\tactions.push('search');\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar id = this.getAttribute('data-input-' + actions[0]);\n\t\t\tif (!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\tinputApi = $.data[id] = new Input(this, {\n\t\t\t\t\tactions: actions.join(',')\n\t\t\t\t});\n\t\t\t\tfor (var i = 0, len = actions.length; i < len; i++) {\n\t\t\t\t\tthis.setAttribute('data-input-' + actions[i], id);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinputApi = $.data[id];\n\t\t\t}\n\t\t\tinputApis.push(inputApi);\n\t\t});\n\t\treturn inputApis.length === 1 ? inputApis[0] : inputApis;\n\t};\n\t$.ready(function() {\n\t\t$('.mui-input-row input').input();\n\t});\n})(mui, window, document);\n(function($, window) {\n    var CLASS_ACTIVE = 'mui-active';\n    var rgbaRegex = /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d*(?:\\.\\d+)?)\\)$/;\n    var getColor = function(colorStr) {\n        var matches = colorStr.match(rgbaRegex);\n        if (matches && matches.length === 5) {\n            return [\n                matches[1],\n                matches[2],\n                matches[3],\n                matches[4]\n            ];\n        }\n        return [];\n    };\n    var Transparent = function(element, options) {\n        this.element = element;\n        this.options = $.extend({\n            top: 0, //距离顶部高度(到达该高度即触发)\n            offset: 150, //滚动透明距离\n            duration: 16, //过渡时间\n            scrollby: window//监听滚动距离容器\n        }, options || {});\n\n        this.scrollByElem = this.options.scrollby || window;\n        if (!this.scrollByElem) {\n            throw new Error(\"监听滚动的元素不存在\");\n        }\n        this.isNativeScroll = false;\n        if (this.scrollByElem === window) {\n            this.isNativeScroll = true;\n        } else if (!~this.scrollByElem.className.indexOf('mui-scroll-wrapper')) {\n            this.isNativeScroll = true;\n        }\n\n        this._style = this.element.style;\n        this._bgColor = this._style.backgroundColor;\n        var color = getColor(mui.getStyles(this.element, 'backgroundColor'));\n        if (color.length) {\n            this._R = color[0];\n            this._G = color[1];\n            this._B = color[2];\n            this._A = parseFloat(color[3]);\n            this.lastOpacity = this._A;\n            this._bufferFn = $.buffer(this.handleScroll, this.options.duration, this);\n            this.initEvent();\n        } else {\n            throw new Error(\"元素背景颜色必须为RGBA\");\n        }\n    };\n\n    Transparent.prototype.initEvent = function() {\n        this.scrollByElem.addEventListener('scroll', this._bufferFn);\n        if (this.isNativeScroll) { //原生scroll\n            this.scrollByElem.addEventListener($.EVENT_MOVE, this._bufferFn);\n        }\n    }\n    Transparent.prototype.handleScroll = function(e) {\n        var y = window.scrollY;\n        if (!this.isNativeScroll && e && e.detail) {\n            y = -e.detail.y;\n        }\n        var opacity = (y - this.options.top) / this.options.offset + this._A;\n        opacity = Math.min(Math.max(this._A, opacity), 1);\n        this._style.backgroundColor = 'rgba(' + this._R + ',' + this._G + ',' + this._B + ',' + opacity + ')';\n        if (opacity > this._A) {\n            this.element.classList.add(CLASS_ACTIVE);\n        } else {\n            this.element.classList.remove(CLASS_ACTIVE);\n        }\n        if (this.lastOpacity !== opacity) {\n            $.trigger(this.element, 'alpha', {\n                alpha: opacity\n            });\n            this.lastOpacity = opacity;\n        }\n    };\n    Transparent.prototype.destory = function() {\n        this.scrollByElem.removeEventListener('scroll', this._bufferFn);\n        this.scrollByElem.removeEventListener($.EVENT_MOVE, this._bufferFn);\n        this.element.style.backgroundColor = this._bgColor;\n        this.element.mui_plugin_transparent = null;\n    };\n    $.fn.transparent = function(options) {\n        options = options || {};\n        var transparentApis = [];\n        this.each(function() {\n            var transparentApi = this.mui_plugin_transparent;\n            if (!transparentApi) {\n                var top = this.getAttribute('data-top');\n                var offset = this.getAttribute('data-offset');\n                var duration = this.getAttribute('data-duration');\n                var scrollby = this.getAttribute('data-scrollby');\n                if (top !== null && typeof options.top === 'undefined') {\n                    options.top = top;\n                }\n                if (offset !== null && typeof options.offset === 'undefined') {\n                    options.offset = offset;\n                }\n                if (duration !== null && typeof options.duration === 'undefined') {\n                    options.duration = duration;\n                }\n                if (scrollby !== null && typeof options.scrollby === 'undefined') {\n                    options.scrollby = document.querySelector(scrollby) || window;\n                }\n                transparentApi = this.mui_plugin_transparent = new Transparent(this, options);\n            }\n            transparentApis.push(transparentApi);\n        });\n        return transparentApis.length === 1 ? transparentApis[0] : transparentApis;\n    };\n    $.ready(function() {\n        $('.mui-bar-transparent').transparent();\n    });\n})(mui, window);\n/**\n * 数字输入框\n * varstion 1.0.1\n * by Houfeng\n * Houfeng@DCloud.io\n */\n\n(function($) {\n\n    var touchSupport = ('ontouchstart' in document);\n    var tapEventName = touchSupport ? 'tap' : 'click';\n    var changeEventName = 'change';\n    var holderClassName = 'mui-numbox';\n    var plusClassSelector = '.mui-btn-numbox-plus,.mui-numbox-btn-plus';\n    var minusClassSelector = '.mui-btn-numbox-minus,.mui-numbox-btn-minus';\n    var inputClassSelector = '.mui-input-numbox,.mui-numbox-input';\n\n    var Numbox = $.Numbox = $.Class.extend({\n        /**\n         * 构造函数\n         **/\n        init: function(holder, options) {\n            var self = this;\n            if (!holder) {\n                throw \"构造 numbox 时缺少容器元素\";\n            }\n            self.holder = holder;\n            options = options || {};\n            options.step = parseInt(options.step || 1);\n            self.options = options;\n            self.input = $.qsa(inputClassSelector, self.holder)[0];\n            self.plus = $.qsa(plusClassSelector, self.holder)[0];\n            self.minus = $.qsa(minusClassSelector, self.holder)[0];\n            self.checkValue();\n            self.initEvent();\n        },\n        /**\n         * 初始化事件绑定\n         **/\n        initEvent: function() {\n            var self = this;\n            self.plus.addEventListener(tapEventName, function(event) {\n                var val = parseInt(self.input.value) + self.options.step;\n                self.input.value = val.toString();\n                $.trigger(self.input, changeEventName, null);\n            });\n            self.minus.addEventListener(tapEventName, function(event) {\n                var val = parseInt(self.input.value) - self.options.step;\n                self.input.value = val.toString();\n                $.trigger(self.input, changeEventName, null);\n            });\n            self.input.addEventListener(changeEventName, function(event) {\n                self.checkValue();\n                var val = parseInt(self.input.value);\n                //触发顶层容器\n                $.trigger(self.holder, changeEventName, {\n                    value: val\n                });\n            });\n        },\n        /**\n         * 获取当前值\n         **/\n        getValue: function() {\n            var self = this;\n            return parseInt(self.input.value);\n        },\n        /**\n         * 验证当前值是法合法\n         **/\n        checkValue: function() {\n            var self = this;\n            var val = self.input.value;\n            if (val == null || val == '' || isNaN(val)) {\n                self.input.value = self.options.min || 0;\n                self.minus.disabled = self.options.min != null;\n            } else {\n                var val = parseInt(val);\n                if (self.options.max != null && !isNaN(self.options.max) && val >= parseInt(self.options.max)) {\n                    val = self.options.max;\n                    self.plus.disabled = true;\n                } else {\n                    self.plus.disabled = false;\n                }\n                if (self.options.min != null && !isNaN(self.options.min) && val <= parseInt(self.options.min)) {\n                    val = self.options.min;\n                    self.minus.disabled = true;\n                } else {\n                    self.minus.disabled = false;\n                }\n                self.input.value = val;\n            }\n        },\n        /**\n         * 更新选项\n         **/\n        setOption: function(name, value) {\n            var self = this;\n            self.options[name] = value;\n        },\n        /**\n         * 动态设置新值\n         **/\n        setValue: function(value) {\n            this.input.value = value;\n            this.checkValue();\n        }\n    });\n\n    $.fn.numbox = function(options) {\n        var instanceArray = [];\n        //遍历选择的元素\n        this.each(function(i, element) {\n            if (element.numbox) {\n                return;\n            }\n            if (options) {\n                element.numbox = new Numbox(element, options);\n            } else {\n                var optionsText = element.getAttribute('data-numbox-options');\n                var options = optionsText ? JSON.parse(optionsText) : {};\n                options.step = element.getAttribute('data-numbox-step') || options.step;\n                options.min = element.getAttribute('data-numbox-min') || options.min;\n                options.max = element.getAttribute('data-numbox-max') || options.max;\n                element.numbox = new Numbox(element, options);\n            }\n        });\n        return this[0] ? this[0].numbox : null;\n    }\n\n    //自动处理 class='mui-locker' 的 dom\n    $.ready(function() {\n        $('.' + holderClassName).numbox();\n    });\n\n}(mui));\n/**\n * Button\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n(function($, window, document) {\n    var CLASS_ICON = 'mui-icon';\n    var CLASS_DISABLED = 'mui-disabled';\n\n    var STATE_RESET = 'reset';\n    var STATE_LOADING = 'loading';\n\n    var defaultOptions = {\n        loadingText: 'Loading...', //文案\n        loadingIcon: 'mui-spinner' + ' ' + 'mui-spinner-white', //图标，可为空\n        loadingIconPosition: 'left' //图标所处位置，仅支持left|right\n    };\n\n    var Button = function(element, options) {\n        this.element = element;\n        this.options = $.extend({}, defaultOptions, options);\n        if (!this.options.loadingText) {\n            this.options.loadingText = defaultOptions.loadingText;\n        }\n        if (this.options.loadingIcon === null) {\n            this.options.loadingIcon = 'mui-spinner';\n            if ($.getStyles(this.element, 'color') === 'rgb(255, 255, 255)') {\n                this.options.loadingIcon += ' ' + 'mui-spinner-white';\n            }\n        }\n        this.isInput = this.element.tagName === 'INPUT';\n        this.resetHTML = this.isInput ? this.element.value : this.element.innerHTML;\n        this.state = '';\n    };\n    Button.prototype.loading = function() {\n        this.setState(STATE_LOADING);\n    };\n    Button.prototype.reset = function() {\n        this.setState(STATE_RESET);\n    };\n    Button.prototype.setState = function(state) {\n        if (this.state === state) {\n            return false;\n        }\n        this.state = state;\n        if (state === STATE_RESET) {\n            this.element.disabled = false;\n            this.element.classList.remove(CLASS_DISABLED);\n            this.setHtml(this.resetHTML);\n        } else if (state === STATE_LOADING) {\n            this.element.disabled = true;\n            this.element.classList.add(CLASS_DISABLED);\n            var html = this.isInput ? this.options.loadingText : ('<span>' + this.options.loadingText + '</span>');\n            if (this.options.loadingIcon && !this.isInput) {\n                if (this.options.loadingIconPosition === 'right') {\n                    html += '&nbsp;<span class=\"' + this.options.loadingIcon + '\"></span>';\n                } else {\n                    html = '<span class=\"' + this.options.loadingIcon + '\"></span>&nbsp;' + html;\n                }\n            }\n            this.setHtml(html);\n        }\n    };\n    Button.prototype.setHtml = function(html) {\n        if (this.isInput) {\n            this.element.value = html;\n        } else {\n            this.element.innerHTML = html;\n        }\n    }\n    $.fn.button = function(state) {\n        var buttonApis = [];\n        this.each(function() {\n            var buttonApi = this.mui_plugin_button;\n            if (!buttonApi) {\n                var loadingText = this.getAttribute('data-loading-text');\n                var loadingIcon = this.getAttribute('data-loading-icon');\n                var loadingIconPosition = this.getAttribute('data-loading-icon-position');\n                this.mui_plugin_button = buttonApi = new Button(this, {\n                    loadingText: loadingText,\n                    loadingIcon: loadingIcon,\n                    loadingIconPosition: loadingIconPosition\n                });\n            }\n            if (state === STATE_LOADING || state === STATE_RESET) {\n                buttonApi.setState(state);\n            }\n            buttonApis.push(buttonApi);\n        });\n        return buttonApis.length === 1 ? buttonApis[0] : buttonApis;\n    };\n})(mui, window, document);"]}